"use strict";(()=>{var e={};e.id=209,e.ids=[209],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},5477:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")},335:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>c,originalPathname:()=>q,patchFetch:()=>h,requestAsyncStorage:()=>p,routeModule:()=>u,serverHooks:()=>m,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>_});var o={};t.r(o),t.d(o,{PATCH:()=>l});var i=t(5419),s=t(9108),a=t(9678),d=t(8070),n=t(4102);async function l(e,{params:r}){try{let{fields:t,title:o}=await e.json(),{formId:i}=r;if(void 0!==o){let{error:e}=await n.O.from("forms").update({title:o,updated_at:new Date().toISOString()}).eq("id",i);if(e)return console.error("Error updating form title:",e),d.Z.json({error:"Failed to update form title"},{status:500})}let s=t.map(e=>{let r={field_label:e.field_label,placeholder:e.placeholder,options:e.options,required:e.required,id:e.id,form_id:e.form_id,field_name:e.field_name,field_type:e.field_type,field_order:e.field_order,section:e.section,min:e.min,max:e.max,pattern:e.pattern};return n.O.from("form_fields").update(r).eq("id",e.id).eq("form_id",i)}),a=(await Promise.all(s)).filter(e=>e.error);if(a.length>0)return console.error("Update errors:",a),d.Z.json({error:"Failed to update some fields"},{status:500});return d.Z.json({success:!0})}catch(e){return console.error("Error updating form fields:",e),d.Z.json({error:"Failed to update form fields"},{status:500})}}let u=new i.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/forms/edit-fields/[formId]/route",pathname:"/api/forms/edit-fields/[formId]",filename:"route",bundlePath:"app/api/forms/edit-fields/[formId]/route"},resolvedPagePath:"/Users/rosspalmer/Ross GitHub Projects/custom-forms/app/api/forms/edit-fields/[formId]/route.js",nextConfigOutput:"",userland:o}),{requestAsyncStorage:p,staticGenerationAsyncStorage:f,serverHooks:m,headerHooks:c,staticGenerationBailout:_}=u,q="/api/forms/edit-fields/[formId]/route";function h(){return(0,a.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:f})}},4102:(e,r,t)=>{t.d(r,{O:()=>a});var o=t(2409);let i="https://eycgzjqwowrdmjlzqqyg.supabase.co",s="sb_publishable_eG0lH_ACpyOjqG44mN_5PA_1-oFLr5n",a=null;i&&s?a=(0,o.eI)(i,s):console.error("Warning: Supabase environment variables are missing")}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[638,409,206],()=>t(335));module.exports=o})();