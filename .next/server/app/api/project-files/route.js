"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/project-files/route";
exports.ids = ["app/api/project-files/route"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fproject-files%2Froute&page=%2Fapi%2Fproject-files%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fproject-files%2Froute.js&appDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Faloa-web-design-project-manager%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Faloa-web-design-project-manager&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fproject-files%2Froute&page=%2Fapi%2Fproject-files%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fproject-files%2Froute.js&appDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Faloa-web-design-project-manager%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Faloa-web-design-project-manager&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_rosspalmer_Ross_GitHub_Projects_aloa_web_design_project_manager_app_api_project_files_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/project-files/route.js */ \"(rsc)/./app/api/project-files/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/project-files/route\",\n        pathname: \"/api/project-files\",\n        filename: \"route\",\n        bundlePath: \"app/api/project-files/route\"\n    },\n    resolvedPagePath: \"/Users/rosspalmer/Ross GitHub Projects/aloa-web-design-project-manager/app/api/project-files/route.js\",\n    nextConfigOutput,\n    userland: _Users_rosspalmer_Ross_GitHub_Projects_aloa_web_design_project_manager_app_api_project_files_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/project-files/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwcm9qZWN0LWZpbGVzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZwcm9qZWN0LWZpbGVzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGcHJvamVjdC1maWxlcyUyRnJvdXRlLmpzJmFwcERpcj0lMkZVc2VycyUyRnJvc3NwYWxtZXIlMkZSb3NzJTIwR2l0SHViJTIwUHJvamVjdHMlMkZhbG9hLXdlYi1kZXNpZ24tcHJvamVjdC1tYW5hZ2VyJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRnJvc3NwYWxtZXIlMkZSb3NzJTIwR2l0SHViJTIwUHJvamVjdHMlMkZhbG9hLXdlYi1kZXNpZ24tcHJvamVjdC1tYW5hZ2VyJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNxRDtBQUNsSTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2Fsb2EtcHJvamVjdC1tYW5hZ2VyLz9jNjM3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9yb3NzcGFsbWVyL1Jvc3MgR2l0SHViIFByb2plY3RzL2Fsb2Etd2ViLWRlc2lnbi1wcm9qZWN0LW1hbmFnZXIvYXBwL2FwaS9wcm9qZWN0LWZpbGVzL3JvdXRlLmpzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9wcm9qZWN0LWZpbGVzL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcHJvamVjdC1maWxlc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcHJvamVjdC1maWxlcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9yb3NzcGFsbWVyL1Jvc3MgR2l0SHViIFByb2plY3RzL2Fsb2Etd2ViLWRlc2lnbi1wcm9qZWN0LW1hbmFnZXIvYXBwL2FwaS9wcm9qZWN0LWZpbGVzL3JvdXRlLmpzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9wcm9qZWN0LWZpbGVzL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fproject-files%2Froute&page=%2Fapi%2Fproject-files%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fproject-files%2Froute.js&appDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Faloa-web-design-project-manager%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Faloa-web-design-project-manager&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/project-files/route.js":
/*!****************************************!*\
  !*** ./app/api/project-files/route.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   PATCH: () => (/* binding */ PATCH),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n/* harmony import */ var next_headers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/headers */ \"(rsc)/./node_modules/next/dist/api/headers.js\");\n\n\n\n// Initialize Supabase service client\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__.createClient)(\"https://eycgzjqwowrdmjlzqqyg.supabase.co\", process.env.SUPABASE_SECRET_KEY // Using service key to bypass RLS\n);\n// POST - Create new project file record or upload file\nasync function POST(request) {\n    try {\n        const contentType = request.headers.get(\"content-type\");\n        // Handle file upload with FormData\n        if (contentType?.includes(\"multipart/form-data\")) {\n            const formData = await request.formData();\n            const file = formData.get(\"file\");\n            const projectId = formData.get(\"projectId\");\n            const category = formData.get(\"category\") || \"general\";\n            const description = formData.get(\"description\") || \"\";\n            const tags = formData.get(\"tags\") ? JSON.parse(formData.get(\"tags\")) : [];\n            if (!file || !projectId) {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"File and projectId are required\"\n                }, {\n                    status: 400\n                });\n            }\n            // Get user from cookies\n            const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n            const userRole = cookieStore.get(\"userRole\")?.value;\n            const userId = cookieStore.get(\"userId\")?.value;\n            // Generate unique file path\n            const timestamp = Date.now();\n            const sanitizedName = file.name.replace(/[^a-zA-Z0-9.-]/g, \"_\");\n            const storagePath = `${projectId}/${timestamp}_${sanitizedName}`;\n            // Upload file to Supabase Storage\n            const fileBuffer = await file.arrayBuffer();\n            const { data: uploadData, error: uploadError } = await supabase.storage.from(\"project-files\").upload(storagePath, fileBuffer, {\n                contentType: file.type,\n                upsert: false\n            });\n            if (uploadError) {\n                console.error(\"Error uploading file to storage:\", uploadError);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Failed to upload file\"\n                }, {\n                    status: 500\n                });\n            }\n            // Get public URL for the file\n            const { data: { publicUrl } } = supabase.storage.from(\"project-files\").getPublicUrl(storagePath);\n            // Create database record\n            const { data: fileRecord, error: dbError } = await supabase.from(\"aloa_project_files\").insert([\n                {\n                    project_id: projectId,\n                    file_name: file.name,\n                    file_size: file.size,\n                    file_type: file.type,\n                    storage_path: storagePath,\n                    category: category,\n                    is_public: false,\n                    requires_auth: true,\n                    uploaded_by: userRole || \"admin\",\n                    uploaded_by_id: userId,\n                    description: description,\n                    tags: tags,\n                    metadata: {},\n                    url: publicUrl,\n                    download_count: 0,\n                    is_visible: true,\n                    is_latest: true\n                }\n            ]).select().single();\n            if (dbError) {\n                console.error(\"Error creating file record:\", dbError);\n                // Clean up uploaded file\n                await supabase.storage.from(\"project-files\").remove([\n                    storagePath\n                ]);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Failed to create file record\"\n                }, {\n                    status: 500\n                });\n            }\n            // Log activity to timeline\n            await supabase.from(\"aloa_project_timeline\").insert({\n                project_id: projectId,\n                event_type: \"file_upload\",\n                description: `File \"${file.name}\" uploaded by ${userRole || \"user\"}`,\n                user_id: userId,\n                metadata: {\n                    file_id: fileRecord.id,\n                    file_name: file.name,\n                    file_size: file.size,\n                    category: category\n                }\n            });\n            // Send notification to admins if uploaded by client\n            if (userRole === \"client\") {\n                await supabase.from(\"aloa_applet_interactions\").insert({\n                    project_id: projectId,\n                    interaction_type: \"file_upload\",\n                    user_identifier: userId || \"anonymous\",\n                    data: {\n                        file_name: file.name,\n                        file_size: file.size,\n                        category: category,\n                        file_id: fileRecord.id\n                    },\n                    created_at: new Date().toISOString(),\n                    read: false\n                });\n            }\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                file: fileRecord,\n                url: publicUrl,\n                id: fileRecord.id\n            });\n        }\n        // Handle JSON body (for backwards compatibility)\n        const body = await request.json();\n        // Get user from cookies\n        const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n        const userRole = cookieStore.get(\"userRole\")?.value;\n        const userId = cookieStore.get(\"userId\")?.value;\n        const { data: file, error } = await supabase.from(\"aloa_project_files\").insert([\n            {\n                project_id: body.project_id,\n                projectlet_id: body.projectlet_id,\n                applet_id: body.applet_id,\n                file_name: body.file_name,\n                file_size: body.file_size,\n                file_type: body.file_type,\n                storage_path: body.storage_path,\n                category: body.category || \"general\",\n                is_public: body.is_public || false,\n                requires_auth: body.requires_auth !== false,\n                uploaded_by: body.uploaded_by || userRole || \"admin\",\n                uploaded_by_id: userId,\n                description: body.description,\n                tags: body.tags || [],\n                metadata: body.metadata || {},\n                url: body.url,\n                download_count: 0,\n                is_visible: true,\n                is_latest: true\n            }\n        ]).select().single();\n        if (error) {\n            console.error(\"Error creating project file record:\", error);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to create file record\"\n            }, {\n                status: 500\n            });\n        }\n        // Log activity to timeline\n        await supabase.from(\"aloa_project_timeline\").insert({\n            project_id: body.project_id,\n            event_type: \"file_upload\",\n            description: `File \"${body.file_name}\" uploaded by ${body.uploaded_by || userRole || \"user\"}`,\n            user_id: userId,\n            metadata: {\n                file_id: file.id,\n                file_name: body.file_name,\n                file_size: body.file_size,\n                category: body.category\n            }\n        });\n        // Send notification to admins if uploaded by client\n        if (body.uploaded_by === \"client\" || userRole === \"client\") {\n            await supabase.from(\"aloa_applet_interactions\").insert({\n                project_id: body.project_id,\n                interaction_type: \"file_upload\",\n                user_identifier: userId || \"anonymous\",\n                data: {\n                    file_name: body.file_name,\n                    file_size: body.file_size,\n                    category: body.category,\n                    file_id: file.id\n                },\n                created_at: new Date().toISOString(),\n                read: false\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            file\n        });\n    } catch (error) {\n        console.error(\"Error in project files route:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n// GET - Get project files\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const projectId = searchParams.get(\"project_id\");\n        const category = searchParams.get(\"category\");\n        let query = supabase.from(\"aloa_project_files\").select(\"*\").eq(\"is_visible\", true).order(\"uploaded_at\", {\n            ascending: false\n        });\n        if (projectId) {\n            query = query.eq(\"project_id\", projectId);\n        }\n        if (category && category !== \"all\") {\n            query = query.eq(\"category\", category);\n        }\n        const { data: files, error } = await query;\n        if (error) {\n            console.error(\"Error fetching project files:\", error);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to fetch files\"\n            }, {\n                status: 500\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            files: files || []\n        });\n    } catch (error) {\n        console.error(\"Error in project files route:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n// DELETE - Delete project file\nasync function DELETE(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const fileId = searchParams.get(\"id\");\n        const storagePath = searchParams.get(\"storage_path\");\n        if (!fileId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"File ID required\"\n            }, {\n                status: 400\n            });\n        }\n        // Get file details first\n        const { data: fileData } = await supabase.from(\"aloa_project_files\").select(\"*\").eq(\"id\", fileId).single();\n        // Delete from storage if path provided\n        const pathToDelete = storagePath || fileData?.storage_path;\n        if (pathToDelete) {\n            try {\n                const { error: storageError } = await supabase.storage.from(\"project-files\").remove([\n                    pathToDelete\n                ]);\n                if (storageError) {\n                    console.error(\"Storage deletion error:\", storageError);\n                // Continue anyway - maybe file is already gone\n                }\n            } catch (err) {\n                console.error(\"Storage deletion failed:\", err);\n            }\n        }\n        // Delete from database\n        const { error } = await supabase.from(\"aloa_project_files\").delete().eq(\"id\", fileId);\n        if (error) {\n            console.error(\"Error deleting project file:\", error);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to delete file\"\n            }, {\n                status: 500\n            });\n        }\n        // Log deletion activity\n        if (fileData) {\n            const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n            const userId = cookieStore.get(\"userId\")?.value;\n            await supabase.from(\"aloa_project_timeline\").insert({\n                project_id: fileData.project_id,\n                event_type: \"file_delete\",\n                description: `File \"${fileData.file_name}\" deleted`,\n                user_id: userId,\n                metadata: {\n                    file_id: fileData.id,\n                    file_name: fileData.file_name\n                }\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true\n        });\n    } catch (error) {\n        console.error(\"Error in project files route:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n// PATCH - Update file access count or other properties\nasync function PATCH(request) {\n    try {\n        const body = await request.json();\n        const { id, action, ...updates } = body;\n        if (!id) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"File ID required\"\n            }, {\n                status: 400\n            });\n        }\n        let updateData = {\n            last_accessed: new Date().toISOString(),\n            ...updates\n        };\n        // Handle download tracking\n        if (action === \"download\" || body.increment_download) {\n            // Increment download count\n            const { data: currentFile } = await supabase.from(\"aloa_project_files\").select(\"download_count\").eq(\"id\", id).single();\n            updateData.download_count = (currentFile?.download_count || 0) + 1;\n            updateData.last_downloaded_at = new Date().toISOString();\n        }\n        const { data: file, error } = await supabase.from(\"aloa_project_files\").update(updateData).eq(\"id\", id).select().single();\n        if (error) {\n            console.error(\"Error updating project file:\", error);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to update file\"\n            }, {\n                status: 500\n            });\n        }\n        // Log download activity if applicable\n        if (action === \"download\" || body.increment_download) {\n            const cookieStore = (0,next_headers__WEBPACK_IMPORTED_MODULE_1__.cookies)();\n            const userId = cookieStore.get(\"userId\")?.value;\n            await supabase.from(\"aloa_project_timeline\").insert({\n                project_id: file.project_id,\n                event_type: \"file_download\",\n                description: `File \"${file.file_name}\" downloaded`,\n                user_id: userId,\n                metadata: {\n                    file_id: file.id,\n                    file_name: file.file_name\n                }\n            });\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            file\n        });\n    } catch (error) {\n        console.error(\"Error in project files route:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3Byb2plY3QtZmlsZXMvcm91dGUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUEyQztBQUNVO0FBQ2Q7QUFFdkMscUNBQXFDO0FBQ3JDLE1BQU1HLFdBQVdGLG1FQUFZQSxDQUMzQkcsMENBQW9DLEVBQ3BDQSxRQUFRQyxHQUFHLENBQUNFLG1CQUFtQixDQUFDLGtDQUFrQzs7QUFHcEUsdURBQXVEO0FBQ2hELGVBQWVDLEtBQUtDLE9BQU87SUFDaEMsSUFBSTtRQUNGLE1BQU1DLGNBQWNELFFBQVFFLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDO1FBRXhDLG1DQUFtQztRQUNuQyxJQUFJRixhQUFhRyxTQUFTLHdCQUF3QjtZQUNoRCxNQUFNQyxXQUFXLE1BQU1MLFFBQVFLLFFBQVE7WUFDdkMsTUFBTUMsT0FBT0QsU0FBU0YsR0FBRyxDQUFDO1lBQzFCLE1BQU1JLFlBQVlGLFNBQVNGLEdBQUcsQ0FBQztZQUMvQixNQUFNSyxXQUFXSCxTQUFTRixHQUFHLENBQUMsZUFBZTtZQUM3QyxNQUFNTSxjQUFjSixTQUFTRixHQUFHLENBQUMsa0JBQWtCO1lBQ25ELE1BQU1PLE9BQU9MLFNBQVNGLEdBQUcsQ0FBQyxVQUFVUSxLQUFLQyxLQUFLLENBQUNQLFNBQVNGLEdBQUcsQ0FBQyxXQUFXLEVBQUU7WUFFekUsSUFBSSxDQUFDRyxRQUFRLENBQUNDLFdBQVc7Z0JBQ3ZCLE9BQU9oQixxREFBWUEsQ0FBQ3NCLElBQUksQ0FBQztvQkFBRUMsT0FBTztnQkFBa0MsR0FBRztvQkFBRUMsUUFBUTtnQkFBSTtZQUN2RjtZQUVBLHdCQUF3QjtZQUN4QixNQUFNQyxjQUFjdkIscURBQU9BO1lBQzNCLE1BQU13QixXQUFXRCxZQUFZYixHQUFHLENBQUMsYUFBYWU7WUFDOUMsTUFBTUMsU0FBU0gsWUFBWWIsR0FBRyxDQUFDLFdBQVdlO1lBRTFDLDRCQUE0QjtZQUM1QixNQUFNRSxZQUFZQyxLQUFLQyxHQUFHO1lBQzFCLE1BQU1DLGdCQUFnQmpCLEtBQUtr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QUM7Z0JBQ2xEa0IsU0FBUzNDO2dCQUNUa0MsVUFBVTtvQkFDUlUsU0FBU3pELEtBQUswRCxFQUFFO29CQUNoQnBCLFdBQVd0QyxLQUFLc0MsU0FBUztnQkFDM0I7WUFDRjtRQUNKO1FBRUEsT0FBT3JELHFEQUFZQSxDQUFDc0IsSUFBSSxDQUFDO1lBQUVQO1FBQUs7SUFDbEMsRUFBRSxPQUFPUSxPQUFPO1FBQ2R1QixRQUFRdkIsS0FBSyxDQUFDLGlDQUFpQ0E7UUFDL0MsT0FBT3ZCLHFEQUFZQSxDQUFDc0IsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBd0IsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDN0U7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2Fsb2EtcHJvamVjdC1tYW5hZ2VyLy4vYXBwL2FwaS9wcm9qZWN0LWZpbGVzL3JvdXRlLmpzPzcwNDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcbmltcG9ydCB7IGNvb2tpZXMgfSBmcm9tICduZXh0L2hlYWRlcnMnO1xuXG4vLyBJbml0aWFsaXplIFN1cGFiYXNlIHNlcnZpY2UgY2xpZW50XG5jb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChcbiAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMLFxuICBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRUNSRVRfS0VZIC8vIFVzaW5nIHNlcnZpY2Uga2V5IHRvIGJ5cGFzcyBSTFNcbik7XG5cbi8vIFBPU1QgLSBDcmVhdGUgbmV3IHByb2plY3QgZmlsZSByZWNvcmQgb3IgdXBsb2FkIGZpbGVcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjb250ZW50VHlwZSA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpO1xuXG4gICAgLy8gSGFuZGxlIGZpbGUgdXBsb2FkIHdpdGggRm9ybURhdGFcbiAgICBpZiAoY29udGVudFR5cGU/LmluY2x1ZGVzKCdtdWx0aXBhcnQvZm9ybS1kYXRhJykpIHtcbiAgICAgIGNvbnN0IGZvcm1EYXRhID0gYXdhaXQgcmVxdWVzdC5mb3JtRGF0YSgpO1xuICAgICAgY29uc3QgZmlsZSA9IGZvcm1EYXRhLmdldCgnZmlsZScpO1xuICAgICAgY29uc3QgcHJvamVjdElkID0gZm9ybURhdGEuZ2V0KCdwcm9qZWN0SWQnKTtcbiAgICAgIGNvbnN0IGNhdGVnb3J5ID0gZm9ybURhdGEuZ2V0KCdjYXRlZ29yeScpIHx8ICdnZW5lcmFsJztcbiAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZm9ybURhdGEuZ2V0KCdkZXNjcmlwdGlvbicpIHx8ICcnO1xuICAgICAgY29uc3QgdGFncyA9IGZvcm1EYXRhLmdldCgndGFncycpID8gSlNPTi5wYXJzZShmb3JtRGF0YS5nZXQoJ3RhZ3MnKSkgOiBbXTtcblxuICAgICAgaWYgKCFmaWxlIHx8ICFwcm9qZWN0SWQpIHtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdGaWxlIGFuZCBwcm9qZWN0SWQgYXJlIHJlcXVpcmVkJyB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBHZXQgdXNlciBmcm9tIGNvb2tpZXNcbiAgICAgIGNvbnN0IGNvb2tpZVN0b3JlID0gY29va2llcygpO1xuICAgICAgY29uc3QgdXNlclJvbGUgPSBjb29raWVTdG9yZS5nZXQoJ3VzZXJSb2xlJyk/LnZhbHVlO1xuICAgICAgY29uc3QgdXNlcklkID0gY29va2llU3RvcmUuZ2V0KCd1c2VySWQnKT8udmFsdWU7XG5cbiAgICAgIC8vIEdlbmVyYXRlIHVuaXF1ZSBmaWxlIHBhdGhcbiAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gICAgICBjb25zdCBzYW5pdGl6ZWROYW1lID0gZmlsZS5uYW1lLnJlcGxhY2UoL1teYS16QS1aMC05Li1dL2csICdfJyk7XG4gICAgICBjb25zdCBzdG9yYWdlUGF0aCA9IGAke3Byb2plY3RJZH0vJHt0aW1lc3RhbXB9XyR7c2FuaXRpemVkTmFtZX1gO1xuXG4gICAgICAvLyBVcGxvYWQgZmlsZSB0byBTdXBhYmFzZSBTdG9yYWdlXG4gICAgICBjb25zdCBmaWxlQnVmZmVyID0gYXdhaXQgZmlsZS5hcnJheUJ1ZmZlcigpO1xuICAgICAgY29uc3QgeyBkYXRhOiB1cGxvYWREYXRhLCBlcnJvcjogdXBsb2FkRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLnN0b3JhZ2VcbiAgICAgICAgLmZyb20oJ3Byb2plY3QtZmlsZXMnKVxuICAgICAgICAudXBsb2FkKHN0b3JhZ2VQYXRoLCBmaWxlQnVmZmVyLCB7XG4gICAgICAgICAgY29udGVudFR5cGU6IGZpbGUudHlwZSxcbiAgICAgICAgICB1cHNlcnQ6IGZhbHNlXG4gICAgICAgIH0pO1xuXG4gICAgICBpZiAodXBsb2FkRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBsb2FkaW5nIGZpbGUgdG8gc3RvcmFnZTonLCB1cGxvYWRFcnJvcik7XG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIHVwbG9hZCBmaWxlJyB9LCB7IHN0YXR1czogNTAwIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBHZXQgcHVibGljIFVSTCBmb3IgdGhlIGZpbGVcbiAgICAgIGNvbnN0IHsgZGF0YTogeyBwdWJsaWNVcmwgfSB9ID0gc3VwYWJhc2Uuc3RvcmFnZVxuICAgICAgICAuZnJvbSgncHJvamVjdC1maWxlcycpXG4gICAgICAgIC5nZXRQdWJsaWNVcmwoc3RvcmFnZVBhdGgpO1xuXG4gICAgICAvLyBDcmVhdGUgZGF0YWJhc2UgcmVjb3JkXG4gICAgICBjb25zdCB7IGRhdGE6IGZpbGVSZWNvcmQsIGVycm9yOiBkYkVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnYWxvYV9wcm9qZWN0X2ZpbGVzJylcbiAgICAgICAgLmluc2VydChbe1xuICAgICAgICAgIHByb2plY3RfaWQ6IHByb2plY3RJZCxcbiAgICAgICAgICBmaWxlX25hbWU6IGZpbGUubmFtZSxcbiAgICAgICAgICBmaWxlX3NpemU6IGZpbGUuc2l6ZSxcbiAgICAgICAgICBmaWxlX3R5cGU6IGZpbGUudHlwZSxcbiAgICAgICAgICBzdG9yYWdlX3BhdGg6IHN0b3JhZ2VQYXRoLFxuICAgICAgICAgIGNhdGVnb3J5OiBjYXRlZ29yeSxcbiAgICAgICAgICBpc19wdWJsaWM6IGZhbHNlLFxuICAgICAgICAgIHJlcXVpcmVzX2F1dGg6IHRydWUsXG4gICAgICAgICAgdXBsb2FkZWRfYnk6IHVzZXJSb2xlIHx8ICdhZG1pbicsXG4gICAgICAgICAgdXBsb2FkZWRfYnlfaWQ6IHVzZXJJZCxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXG4gICAgICAgICAgdGFnczogdGFncyxcbiAgICAgICAgICBtZXRhZGF0YToge30sXG4gICAgICAgICAgdXJsOiBwdWJsaWNVcmwsXG4gICAgICAgICAgZG93bmxvYWRfY291bnQ6IDAsXG4gICAgICAgICAgaXNfdmlzaWJsZTogdHJ1ZSxcbiAgICAgICAgICBpc19sYXRlc3Q6IHRydWVcbiAgICAgICAgfV0pXG4gICAgICAgIC5zZWxlY3QoKVxuICAgICAgICAuc2luZ2xlKCk7XG5cbiAgICAgIGlmIChkYkVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIGZpbGUgcmVjb3JkOicsIGRiRXJyb3IpO1xuICAgICAgICAvLyBDbGVhbiB1cCB1cGxvYWRlZCBmaWxlXG4gICAgICAgIGF3YWl0IHN1cGFiYXNlLnN0b3JhZ2UuZnJvbSgncHJvamVjdC1maWxlcycpLnJlbW92ZShbc3RvcmFnZVBhdGhdKTtcbiAgICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gY3JlYXRlIGZpbGUgcmVjb3JkJyB9LCB7IHN0YXR1czogNTAwIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBMb2cgYWN0aXZpdHkgdG8gdGltZWxpbmVcbiAgICAgIGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdhbG9hX3Byb2plY3RfdGltZWxpbmUnKVxuICAgICAgICAuaW5zZXJ0KHtcbiAgICAgICAgICBwcm9qZWN0X2lkOiBwcm9qZWN0SWQsXG4gICAgICAgICAgZXZlbnRfdHlwZTogJ2ZpbGVfdXBsb2FkJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogYEZpbGUgXCIke2ZpbGUubmFtZX1cIiB1cGxvYWRlZCBieSAke3VzZXJSb2xlIHx8ICd1c2VyJ31gLFxuICAgICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICAgICAgICBtZXRhZGF0YToge1xuICAgICAgICAgICAgZmlsZV9pZDogZmlsZVJlY29yZC5pZCxcbiAgICAgICAgICAgIGZpbGVfbmFtZTogZmlsZS5uYW1lLFxuICAgICAgICAgICAgZmlsZV9zaXplOiBmaWxlLnNpemUsXG4gICAgICAgICAgICBjYXRlZ29yeTogY2F0ZWdvcnlcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAvLyBTZW5kIG5vdGlmaWNhdGlvbiB0byBhZG1pbnMgaWYgdXBsb2FkZWQgYnkgY2xpZW50XG4gICAgICBpZiAodXNlclJvbGUgPT09ICdjbGllbnQnKSB7XG4gICAgICAgIGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgLmZyb20oJ2Fsb2FfYXBwbGV0X2ludGVyYWN0aW9ucycpXG4gICAgICAgICAgLmluc2VydCh7XG4gICAgICAgICAgICBwcm9qZWN0X2lkOiBwcm9qZWN0SWQsXG4gICAgICAgICAgICBpbnRlcmFjdGlvbl90eXBlOiAnZmlsZV91cGxvYWQnLFxuICAgICAgICAgICAgdXNlcl9pZGVudGlmaWVyOiB1c2VySWQgfHwgJ2Fub255bW91cycsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgIGZpbGVfbmFtZTogZmlsZS5uYW1lLFxuICAgICAgICAgICAgICBmaWxlX3NpemU6IGZpbGUuc2l6ZSxcbiAgICAgICAgICAgICAgY2F0ZWdvcnk6IGNhdGVnb3J5LFxuICAgICAgICAgICAgICBmaWxlX2lkOiBmaWxlUmVjb3JkLmlkXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgcmVhZDogZmFsc2VcbiAgICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgICAgZmlsZTogZmlsZVJlY29yZCxcbiAgICAgICAgdXJsOiBwdWJsaWNVcmwsXG4gICAgICAgIGlkOiBmaWxlUmVjb3JkLmlkXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgSlNPTiBib2R5IChmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkpXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuXG4gICAgLy8gR2V0IHVzZXIgZnJvbSBjb29raWVzXG4gICAgY29uc3QgY29va2llU3RvcmUgPSBjb29raWVzKCk7XG4gICAgY29uc3QgdXNlclJvbGUgPSBjb29raWVTdG9yZS5nZXQoJ3VzZXJSb2xlJyk/LnZhbHVlO1xuICAgIGNvbnN0IHVzZXJJZCA9IGNvb2tpZVN0b3JlLmdldCgndXNlcklkJyk/LnZhbHVlO1xuXG4gICAgY29uc3QgeyBkYXRhOiBmaWxlLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdhbG9hX3Byb2plY3RfZmlsZXMnKVxuICAgICAgLmluc2VydChbe1xuICAgICAgICBwcm9qZWN0X2lkOiBib2R5LnByb2plY3RfaWQsXG4gICAgICAgIHByb2plY3RsZXRfaWQ6IGJvZHkucHJvamVjdGxldF9pZCxcbiAgICAgICAgYXBwbGV0X2lkOiBib2R5LmFwcGxldF9pZCxcbiAgICAgICAgZmlsZV9uYW1lOiBib2R5LmZpbGVfbmFtZSxcbiAgICAgICAgZmlsZV9zaXplOiBib2R5LmZpbGVfc2l6ZSxcbiAgICAgICAgZmlsZV90eXBlOiBib2R5LmZpbGVfdHlwZSxcbiAgICAgICAgc3RvcmFnZV9wYXRoOiBib2R5LnN0b3JhZ2VfcGF0aCxcbiAgICAgICAgY2F0ZWdvcnk6IGJvZHkuY2F0ZWdvcnkgfHwgJ2dlbmVyYWwnLFxuICAgICAgICBpc19wdWJsaWM6IGJvZHkuaXNfcHVibGljIHx8IGZhbHNlLFxuICAgICAgICByZXF1aXJlc19hdXRoOiBib2R5LnJlcXVpcmVzX2F1dGggIT09IGZhbHNlLFxuICAgICAgICB1cGxvYWRlZF9ieTogYm9keS51cGxvYWRlZF9ieSB8fCB1c2VyUm9sZSB8fCAnYWRtaW4nLFxuICAgICAgICB1cGxvYWRlZF9ieV9pZDogdXNlcklkLFxuICAgICAgICBkZXNjcmlwdGlvbjogYm9keS5kZXNjcmlwdGlvbixcbiAgICAgICAgdGFnczogYm9keS50YWdzIHx8IFtdLFxuICAgICAgICBtZXRhZGF0YTogYm9keS5tZXRhZGF0YSB8fCB7fSxcbiAgICAgICAgdXJsOiBib2R5LnVybCxcbiAgICAgICAgZG93bmxvYWRfY291bnQ6IDAsXG4gICAgICAgIGlzX3Zpc2libGU6IHRydWUsXG4gICAgICAgIGlzX2xhdGVzdDogdHJ1ZVxuICAgICAgfV0pXG4gICAgICAuc2VsZWN0KClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgcHJvamVjdCBmaWxlIHJlY29yZDonLCBlcnJvcik7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBjcmVhdGUgZmlsZSByZWNvcmQnIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gICAgfVxuXG4gICAgLy8gTG9nIGFjdGl2aXR5IHRvIHRpbWVsaW5lXG4gICAgYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdhbG9hX3Byb2plY3RfdGltZWxpbmUnKVxuICAgICAgLmluc2VydCh7XG4gICAgICAgIHByb2plY3RfaWQ6IGJvZHkucHJvamVjdF9pZCxcbiAgICAgICAgZXZlbnRfdHlwZTogJ2ZpbGVfdXBsb2FkJyxcbiAgICAgICAgZGVzY3JpcHRpb246IGBGaWxlIFwiJHtib2R5LmZpbGVfbmFtZX1cIiB1cGxvYWRlZCBieSAke2JvZHkudXBsb2FkZWRfYnkgfHwgdXNlclJvbGUgfHwgJ3VzZXInfWAsXG4gICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICBmaWxlX2lkOiBmaWxlLmlkLFxuICAgICAgICAgIGZpbGVfbmFtZTogYm9keS5maWxlX25hbWUsXG4gICAgICAgICAgZmlsZV9zaXplOiBib2R5LmZpbGVfc2l6ZSxcbiAgICAgICAgICBjYXRlZ29yeTogYm9keS5jYXRlZ29yeVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgIC8vIFNlbmQgbm90aWZpY2F0aW9uIHRvIGFkbWlucyBpZiB1cGxvYWRlZCBieSBjbGllbnRcbiAgICBpZiAoYm9keS51cGxvYWRlZF9ieSA9PT0gJ2NsaWVudCcgfHwgdXNlclJvbGUgPT09ICdjbGllbnQnKSB7XG4gICAgICBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnYWxvYV9hcHBsZXRfaW50ZXJhY3Rpb25zJylcbiAgICAgICAgLmluc2VydCh7XG4gICAgICAgICAgcHJvamVjdF9pZDogYm9keS5wcm9qZWN0X2lkLFxuICAgICAgICAgIGludGVyYWN0aW9uX3R5cGU6ICdmaWxlX3VwbG9hZCcsXG4gICAgICAgICAgdXNlcl9pZGVudGlmaWVyOiB1c2VySWQgfHwgJ2Fub255bW91cycsXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgZmlsZV9uYW1lOiBib2R5LmZpbGVfbmFtZSxcbiAgICAgICAgICAgIGZpbGVfc2l6ZTogYm9keS5maWxlX3NpemUsXG4gICAgICAgICAgICBjYXRlZ29yeTogYm9keS5jYXRlZ29yeSxcbiAgICAgICAgICAgIGZpbGVfaWQ6IGZpbGUuaWRcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICByZWFkOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBmaWxlIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHByb2plY3QgZmlsZXMgcm91dGU6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59XG5cbi8vIEdFVCAtIEdldCBwcm9qZWN0IGZpbGVzXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG4gICAgY29uc3QgcHJvamVjdElkID0gc2VhcmNoUGFyYW1zLmdldCgncHJvamVjdF9pZCcpO1xuICAgIGNvbnN0IGNhdGVnb3J5ID0gc2VhcmNoUGFyYW1zLmdldCgnY2F0ZWdvcnknKTtcblxuICAgIGxldCBxdWVyeSA9IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnYWxvYV9wcm9qZWN0X2ZpbGVzJylcbiAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgLmVxKCdpc192aXNpYmxlJywgdHJ1ZSlcbiAgICAgIC5vcmRlcigndXBsb2FkZWRfYXQnLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XG5cbiAgICBpZiAocHJvamVjdElkKSB7XG4gICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdwcm9qZWN0X2lkJywgcHJvamVjdElkKTtcbiAgICB9XG5cbiAgICBpZiAoY2F0ZWdvcnkgJiYgY2F0ZWdvcnkgIT09ICdhbGwnKSB7XG4gICAgICBxdWVyeSA9IHF1ZXJ5LmVxKCdjYXRlZ29yeScsIGNhdGVnb3J5KTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGRhdGE6IGZpbGVzLCBlcnJvciB9ID0gYXdhaXQgcXVlcnk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHByb2plY3QgZmlsZXM6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gZmV0Y2ggZmlsZXMnIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZmlsZXM6IGZpbGVzIHx8IFtdIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHByb2plY3QgZmlsZXMgcm91dGU6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59XG5cbi8vIERFTEVURSAtIERlbGV0ZSBwcm9qZWN0IGZpbGVcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBERUxFVEUocmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgICBjb25zdCBmaWxlSWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCdpZCcpO1xuICAgIGNvbnN0IHN0b3JhZ2VQYXRoID0gc2VhcmNoUGFyYW1zLmdldCgnc3RvcmFnZV9wYXRoJyk7XG5cbiAgICBpZiAoIWZpbGVJZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdGaWxlIElEIHJlcXVpcmVkJyB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgIH1cblxuICAgIC8vIEdldCBmaWxlIGRldGFpbHMgZmlyc3RcbiAgICBjb25zdCB7IGRhdGE6IGZpbGVEYXRhIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2Fsb2FfcHJvamVjdF9maWxlcycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5lcSgnaWQnLCBmaWxlSWQpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICAvLyBEZWxldGUgZnJvbSBzdG9yYWdlIGlmIHBhdGggcHJvdmlkZWRcbiAgICBjb25zdCBwYXRoVG9EZWxldGUgPSBzdG9yYWdlUGF0aCB8fCBmaWxlRGF0YT8uc3RvcmFnZV9wYXRoO1xuICAgIGlmIChwYXRoVG9EZWxldGUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHsgZXJyb3I6IHN0b3JhZ2VFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2Uuc3RvcmFnZVxuICAgICAgICAgIC5mcm9tKCdwcm9qZWN0LWZpbGVzJylcbiAgICAgICAgICAucmVtb3ZlKFtwYXRoVG9EZWxldGVdKTtcblxuICAgICAgICBpZiAoc3RvcmFnZUVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignU3RvcmFnZSBkZWxldGlvbiBlcnJvcjonLCBzdG9yYWdlRXJyb3IpO1xuICAgICAgICAgIC8vIENvbnRpbnVlIGFueXdheSAtIG1heWJlIGZpbGUgaXMgYWxyZWFkeSBnb25lXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdTdG9yYWdlIGRlbGV0aW9uIGZhaWxlZDonLCBlcnIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIERlbGV0ZSBmcm9tIGRhdGFiYXNlXG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdhbG9hX3Byb2plY3RfZmlsZXMnKVxuICAgICAgLmRlbGV0ZSgpXG4gICAgICAuZXEoJ2lkJywgZmlsZUlkKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZGVsZXRpbmcgcHJvamVjdCBmaWxlOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIGRlbGV0ZSBmaWxlJyB9LCB7IHN0YXR1czogNTAwIH0pO1xuICAgIH1cblxuICAgIC8vIExvZyBkZWxldGlvbiBhY3Rpdml0eVxuICAgIGlmIChmaWxlRGF0YSkge1xuICAgICAgY29uc3QgY29va2llU3RvcmUgPSBjb29raWVzKCk7XG4gICAgICBjb25zdCB1c2VySWQgPSBjb29raWVTdG9yZS5nZXQoJ3VzZXJJZCcpPy52YWx1ZTtcblxuICAgICAgYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ2Fsb2FfcHJvamVjdF90aW1lbGluZScpXG4gICAgICAgIC5pbnNlcnQoe1xuICAgICAgICAgIHByb2plY3RfaWQ6IGZpbGVEYXRhLnByb2plY3RfaWQsXG4gICAgICAgICAgZXZlbnRfdHlwZTogJ2ZpbGVfZGVsZXRlJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogYEZpbGUgXCIke2ZpbGVEYXRhLmZpbGVfbmFtZX1cIiBkZWxldGVkYCxcbiAgICAgICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgIGZpbGVfaWQ6IGZpbGVEYXRhLmlkLFxuICAgICAgICAgICAgZmlsZV9uYW1lOiBmaWxlRGF0YS5maWxlX25hbWVcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IHRydWUgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gcHJvamVjdCBmaWxlcyByb3V0ZTonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdJbnRlcm5hbCBzZXJ2ZXIgZXJyb3InIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cblxuLy8gUEFUQ0ggLSBVcGRhdGUgZmlsZSBhY2Nlc3MgY291bnQgb3Igb3RoZXIgcHJvcGVydGllc1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBBVENIKHJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxdWVzdC5qc29uKCk7XG4gICAgY29uc3QgeyBpZCwgYWN0aW9uLCAuLi51cGRhdGVzIH0gPSBib2R5O1xuXG4gICAgaWYgKCFpZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdGaWxlIElEIHJlcXVpcmVkJyB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgIH1cblxuICAgIGxldCB1cGRhdGVEYXRhID0ge1xuICAgICAgbGFzdF9hY2Nlc3NlZDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgLi4udXBkYXRlc1xuICAgIH07XG5cbiAgICAvLyBIYW5kbGUgZG93bmxvYWQgdHJhY2tpbmdcbiAgICBpZiAoYWN0aW9uID09PSAnZG93bmxvYWQnIHx8IGJvZHkuaW5jcmVtZW50X2Rvd25sb2FkKSB7XG4gICAgICAvLyBJbmNyZW1lbnQgZG93bmxvYWQgY291bnRcbiAgICAgIGNvbnN0IHsgZGF0YTogY3VycmVudEZpbGUgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdhbG9hX3Byb2plY3RfZmlsZXMnKVxuICAgICAgICAuc2VsZWN0KCdkb3dubG9hZF9jb3VudCcpXG4gICAgICAgIC5lcSgnaWQnLCBpZClcbiAgICAgICAgLnNpbmdsZSgpO1xuXG4gICAgICB1cGRhdGVEYXRhLmRvd25sb2FkX2NvdW50ID0gKGN1cnJlbnRGaWxlPy5kb3dubG9hZF9jb3VudCB8fCAwKSArIDE7XG4gICAgICB1cGRhdGVEYXRhLmxhc3RfZG93bmxvYWRlZF9hdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGRhdGE6IGZpbGUsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2Fsb2FfcHJvamVjdF9maWxlcycpXG4gICAgICAudXBkYXRlKHVwZGF0ZURhdGEpXG4gICAgICAuZXEoJ2lkJywgaWQpXG4gICAgICAuc2VsZWN0KClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgcHJvamVjdCBmaWxlOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnRmFpbGVkIHRvIHVwZGF0ZSBmaWxlJyB9LCB7IHN0YXR1czogNTAwIH0pO1xuICAgIH1cblxuICAgIC8vIExvZyBkb3dubG9hZCBhY3Rpdml0eSBpZiBhcHBsaWNhYmxlXG4gICAgaWYgKGFjdGlvbiA9PT0gJ2Rvd25sb2FkJyB8fCBib2R5LmluY3JlbWVudF9kb3dubG9hZCkge1xuICAgICAgY29uc3QgY29va2llU3RvcmUgPSBjb29raWVzKCk7XG4gICAgICBjb25zdCB1c2VySWQgPSBjb29raWVTdG9yZS5nZXQoJ3VzZXJJZCcpPy52YWx1ZTtcblxuICAgICAgYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oJ2Fsb2FfcHJvamVjdF90aW1lbGluZScpXG4gICAgICAgIC5pbnNlcnQoe1xuICAgICAgICAgIHByb2plY3RfaWQ6IGZpbGUucHJvamVjdF9pZCxcbiAgICAgICAgICBldmVudF90eXBlOiAnZmlsZV9kb3dubG9hZCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246IGBGaWxlIFwiJHtmaWxlLmZpbGVfbmFtZX1cIiBkb3dubG9hZGVkYCxcbiAgICAgICAgICB1c2VyX2lkOiB1c2VySWQsXG4gICAgICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgICAgIGZpbGVfaWQ6IGZpbGUuaWQsXG4gICAgICAgICAgICBmaWxlX25hbWU6IGZpbGUuZmlsZV9uYW1lXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBmaWxlIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHByb2plY3QgZmlsZXMgcm91dGU6JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImNyZWF0ZUNsaWVudCIsImNvb2tpZXMiLCJzdXBhYmFzZSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJTVVBBQkFTRV9TRUNSRVRfS0VZIiwiUE9TVCIsInJlcXVlc3QiLCJjb250ZW50VHlwZSIsImhlYWRlcnMiLCJnZXQiLCJpbmNsdWRlcyIsImZvcm1EYXRhIiwiZmlsZSIsInByb2plY3RJZCIsImNhdGVnb3J5IiwiZGVzY3JpcHRpb24iLCJ0YWdzIiwiSlNPTiIsInBhcnNlIiwianNvbiIsImVycm9yIiwic3RhdHVzIiwiY29va2llU3RvcmUiLCJ1c2VyUm9sZSIsInZhbHVlIiwidXNlcklkIiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsInNhbml0aXplZE5hbWUiLCJuYW1lIiwicmVwbGFjZSIsInN0b3JhZ2VQYXRoIiwiZmlsZUJ1ZmZlciIsImFycmF5QnVmZmVyIiwiZGF0YSIsInVwbG9hZERhdGEiLCJ1cGxvYWRFcnJvciIsInN0b3JhZ2UiLCJmcm9tIiwidXBsb2FkIiwidHlwZSIsInVwc2VydCIsImNvbnNvbGUiLCJwdWJsaWNVcmwiLCJnZXRQdWJsaWNVcmwiLCJmaWxlUmVjb3JkIiwiZGJFcnJvciIsImluc2VydCIsInByb2plY3RfaWQiLCJmaWxlX25hbWUiLCJmaWxlX3NpemUiLCJzaXplIiwiZmlsZV90eXBlIiwic3RvcmFnZV9wYXRoIiwiaXNfcHVibGljIiwicmVxdWlyZXNfYXV0aCIsInVwbG9hZGVkX2J5IiwidXBsb2FkZWRfYnlfaWQiLCJtZXRhZGF0YSIsInVybCIsImRvd25sb2FkX2NvdW50IiwiaXNfdmlzaWJsZSIsImlzX2xhdGVzdCIsInNlbGVjdCIsInNpbmdsZSIsInJlbW92ZSIsImV2ZW50X3R5cGUiLCJ1c2VyX2lkIiwiZmlsZV9pZCIsImlkIiwiaW50ZXJhY3Rpb25fdHlwZSIsInVzZXJfaWRlbnRpZmllciIsImNyZWF0ZWRfYXQiLCJ0b0lTT1N0cmluZyIsInJlYWQiLCJib2R5IiwicHJvamVjdGxldF9pZCIsImFwcGxldF9pZCIsIkdFVCIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInF1ZXJ5IiwiZXEiLCJvcmRlciIsImFzY2VuZGluZyIsImZpbGVzIiwiREVMRVRFIiwiZmlsZUlkIiwiZmlsZURhdGEiLCJwYXRoVG9EZWxldGUiLCJzdG9yYWdlRXJyb3IiLCJlcnIiLCJkZWxldGUiLCJzdWNjZXNzIiwiUEFUQ0giLCJhY3Rpb24iLCJ1cGRhdGVzIiwidXBkYXRlRGF0YSIsImxhc3RfYWNjZXNzZWQiLCJpbmNyZW1lbnRfZG93bmxvYWQiLCJjdXJyZW50RmlsZSIsImxhc3RfZG93bmxvYWRlZF9hdCIsInVwZGF0ZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/project-files/route.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@supabase","vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fproject-files%2Froute&page=%2Fapi%2Fproject-files%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fproject-files%2Froute.js&appDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Faloa-web-design-project-manager%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Faloa-web-design-project-manager&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();