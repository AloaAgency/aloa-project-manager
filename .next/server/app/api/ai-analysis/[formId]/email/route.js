"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/ai-analysis/[formId]/email/route";
exports.ids = ["app/api/ai-analysis/[formId]/email/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai-analysis%2F%5BformId%5D%2Femail%2Froute&page=%2Fapi%2Fai-analysis%2F%5BformId%5D%2Femail%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai-analysis%2F%5BformId%5D%2Femail%2Froute.js&appDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Fcustom-forms%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Fcustom-forms&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai-analysis%2F%5BformId%5D%2Femail%2Froute&page=%2Fapi%2Fai-analysis%2F%5BformId%5D%2Femail%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai-analysis%2F%5BformId%5D%2Femail%2Froute.js&appDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Fcustom-forms%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Fcustom-forms&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_rosspalmer_Ross_GitHub_Projects_custom_forms_app_api_ai_analysis_formId_email_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/ai-analysis/[formId]/email/route.js */ \"(rsc)/./app/api/ai-analysis/[formId]/email/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/ai-analysis/[formId]/email/route\",\n        pathname: \"/api/ai-analysis/[formId]/email\",\n        filename: \"route\",\n        bundlePath: \"app/api/ai-analysis/[formId]/email/route\"\n    },\n    resolvedPagePath: \"/Users/rosspalmer/Ross GitHub Projects/custom-forms/app/api/ai-analysis/[formId]/email/route.js\",\n    nextConfigOutput,\n    userland: _Users_rosspalmer_Ross_GitHub_Projects_custom_forms_app_api_ai_analysis_formId_email_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/ai-analysis/[formId]/email/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhaS1hbmFseXNpcyUyRiU1QmZvcm1JZCU1RCUyRmVtYWlsJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhaS1hbmFseXNpcyUyRiU1QmZvcm1JZCU1RCUyRmVtYWlsJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYWktYW5hbHlzaXMlMkYlNUJmb3JtSWQlNUQlMkZlbWFpbCUyRnJvdXRlLmpzJmFwcERpcj0lMkZVc2VycyUyRnJvc3NwYWxtZXIlMkZSb3NzJTIwR2l0SHViJTIwUHJvamVjdHMlMkZjdXN0b20tZm9ybXMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGcm9zc3BhbG1lciUyRlJvc3MlMjBHaXRIdWIlMjBQcm9qZWN0cyUyRmN1c3RvbS1mb3JtcyZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDK0M7QUFDNUg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jdXN0b20tZm9ybXMvPzFhNWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL3Jvc3NwYWxtZXIvUm9zcyBHaXRIdWIgUHJvamVjdHMvY3VzdG9tLWZvcm1zL2FwcC9hcGkvYWktYW5hbHlzaXMvW2Zvcm1JZF0vZW1haWwvcm91dGUuanNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FpLWFuYWx5c2lzL1tmb3JtSWRdL2VtYWlsL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYWktYW5hbHlzaXMvW2Zvcm1JZF0vZW1haWxcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2FpLWFuYWx5c2lzL1tmb3JtSWRdL2VtYWlsL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3Jvc3NwYWxtZXIvUm9zcyBHaXRIdWIgUHJvamVjdHMvY3VzdG9tLWZvcm1zL2FwcC9hcGkvYWktYW5hbHlzaXMvW2Zvcm1JZF0vZW1haWwvcm91dGUuanNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2FpLWFuYWx5c2lzL1tmb3JtSWRdL2VtYWlsL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai-analysis%2F%5BformId%5D%2Femail%2Froute&page=%2Fapi%2Fai-analysis%2F%5BformId%5D%2Femail%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai-analysis%2F%5BformId%5D%2Femail%2Froute.js&appDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Fcustom-forms%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Fcustom-forms&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/ai-analysis/[formId]/email/route.js":
/*!*****************************************************!*\
  !*** ./app/api/ai-analysis/[formId]/email/route.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n/* harmony import */ var resend__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! resend */ \"(rsc)/./node_modules/resend/dist/index.mjs\");\n/* harmony import */ var _lib_emailTemplates__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/emailTemplates */ \"(rsc)/./lib/emailTemplates.js\");\n\n\n\n\n// Initialize Supabase only if credentials are available\nconst supabase =  true && process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY ? (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_3__.createClient)(\"https://eycgzjqwowrdmjlzqqyg.supabase.co\", process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY) : null;\nconst resend = process.env.RESEND_API_KEY ? new resend__WEBPACK_IMPORTED_MODULE_1__.Resend(process.env.RESEND_API_KEY) : null;\nasync function POST(request, { params }) {\n    try {\n        const { formId } = params;\n        const { recipientEmail, recipientName, analysisText, formTitle, ccEmails = [], customSubject } = await request.json();\n        // Validate required fields\n        if (!recipientEmail || !analysisText || !formTitle) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Recipient email, analysis text, and form title are required\"\n            }, {\n                status: 400\n            });\n        }\n        // Check if Resend is configured\n        if (!resend) {\n            console.warn(\"RESEND_API_KEY not configured, email sending disabled\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Email service not configured. Please set up RESEND_API_KEY.\"\n            }, {\n                status: 503\n            });\n        }\n        // Generate the email HTML\n        const emailHTML = (0,_lib_emailTemplates__WEBPACK_IMPORTED_MODULE_2__.generateAnalysisEmailHTML)(formTitle, analysisText, recipientName);\n        // Prepare email options\n        const emailOptions = {\n            from: process.env.EMAIL_FROM || \"Aloa\\xae Forms <forms@resend.dev>\",\n            to: recipientEmail,\n            subject: customSubject || `AI Analysis Report: ${formTitle}`,\n            html: emailHTML,\n            text: generatePlainTextVersion(analysisText, formTitle)\n        };\n        // Add CC recipients if provided\n        if (ccEmails.length > 0) {\n            emailOptions.cc = ccEmails;\n        }\n        // Send the email\n        const { data, error } = await resend.emails.send(emailOptions);\n        if (error) {\n            console.error(\"Error sending analysis email:\", error);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to send email\",\n                details: error.message\n            }, {\n                status: 500\n            });\n        }\n        // Log the email send event\n        console.log(`Analysis email sent successfully for form ${formId} to ${recipientEmail}`);\n        // Optionally store email send record in database\n        if (supabase) {\n            try {\n                await supabase.from(\"email_logs\").insert({\n                    form_id: formId,\n                    recipient: recipientEmail,\n                    email_type: \"ai_analysis\",\n                    sent_at: new Date().toISOString(),\n                    status: \"sent\"\n                });\n            } catch (dbError) {\n                // Don't fail the request if logging fails\n                console.error(\"Failed to log email send:\", dbError);\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            message: \"Analysis email sent successfully\",\n            emailId: data?.id\n        });\n    } catch (error) {\n        console.error(\"Error in email analysis endpoint:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to send analysis email\"\n        }, {\n            status: 500\n        });\n    }\n}\n// Generate plain text version as fallback\nfunction generatePlainTextVersion(analysisText, formTitle) {\n    return `\nAI Analysis Report - ${formTitle}\n\n${analysisText}\n\n---\nGenerated on ${new Date().toLocaleDateString(\"en-US\", {\n        year: \"numeric\",\n        month: \"long\",\n        day: \"numeric\",\n        hour: \"2-digit\",\n        minute: \"2-digit\"\n    })}\n\nPowered by Aloa® Custom Forms\n  `.trim();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2FpLWFuYWx5c2lzL1tmb3JtSWRdL2VtYWlsL3JvdXRlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQTJDO0FBQ1U7QUFDckI7QUFDaUM7QUFFakUsd0RBQXdEO0FBQ3hELE1BQU1JLFdBQVdDLEtBQW9DLElBQUlBLFFBQVFDLEdBQUcsQ0FBQ0UsNkJBQTZCLEdBQzlGUCxtRUFBWUEsQ0FDVkksMENBQW9DLEVBQ3BDQSxRQUFRQyxHQUFHLENBQUNFLDZCQUE2QixJQUUzQztBQUVKLE1BQU1DLFNBQVNKLFFBQVFDLEdBQUcsQ0FBQ0ksY0FBYyxHQUFHLElBQUlSLDBDQUFNQSxDQUFDRyxRQUFRQyxHQUFHLENBQUNJLGNBQWMsSUFBSTtBQUU5RSxlQUFlQyxLQUFLQyxPQUFPLEVBQUUsRUFBRUMsTUFBTSxFQUFFO0lBQzVDLElBQUk7UUFDRixNQUFNLEVBQUVDLE1BQU0sRUFBRSxHQUFHRDtRQUNuQixNQUFNLEVBQ0pFLGNBQWMsRUFDZEMsYUFBYSxFQUNiQyxZQUFZLEVBQ1pDLFNBQVMsRUFDVEMsV0FBVyxFQUFFLEVBQ2JDLGFBQWEsRUFDZCxHQUFHLE1BQU1SLFFBQVFTLElBQUk7UUFFdEIsMkJBQTJCO1FBQzNCLElBQUksQ0FBQ04sa0JBQWtCLENBQUNFLGdCQUFnQixDQUFDQyxXQUFXO1lBQ2xELE9BQU9sQixxREFBWUEsQ0FBQ3FCLElBQUksQ0FDdEI7Z0JBQUVDLE9BQU87WUFBOEQsR0FDdkU7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLGdDQUFnQztRQUNoQyxJQUFJLENBQUNkLFFBQVE7WUFDWGUsUUFBUUMsSUFBSSxDQUFDO1lBQ2IsT0FBT3pCLHFEQUFZQSxDQUFDcUIsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUE4RCxHQUN2RTtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsMEJBQTBCO1FBQzFCLE1BQU1HLFlBQVl2Qiw4RUFBeUJBLENBQUNlLFdBQVdELGNBQWNEO1FBRXJFLHdCQUF3QjtRQUN4QixNQUFNVyxlQUFlO1lBQ25CQyxNQUFNdkIsUUFBUUMsR0FBRyxDQUFDdUIsVUFBVSxJQUFJO1lBQ2hDQyxJQUFJZjtZQUNKZ0IsU0FBU1gsaUJBQWlCLENBQUMsb0JBQW9CLEVBQUVGLFVBQVUsQ0FBQztZQUM1RGMsTUFBTU47WUFDTk8sTUFBTUMseUJBQXlCakIsY0FBY0M7UUFDL0M7UUFFQSxnQ0FBZ0M7UUFDaEMsSUFBSUMsU0FBU2dCLE1BQU0sR0FBRyxHQUFHO1lBQ3ZCUixhQUFhUyxFQUFFLEdBQUdqQjtRQUNwQjtRQUVBLGlCQUFpQjtRQUNqQixNQUFNLEVBQUVrQixJQUFJLEVBQUVmLEtBQUssRUFBRSxHQUFHLE1BQU1iLE9BQU82QixNQUFNLENBQUNDLElBQUksQ0FBQ1o7UUFFakQsSUFBSUwsT0FBTztZQUNURSxRQUFRRixLQUFLLENBQUMsaUNBQWlDQTtZQUMvQyxPQUFPdEIscURBQVlBLENBQUNxQixJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO2dCQUF3QmtCLFNBQVNsQixNQUFNbUIsT0FBTztZQUFDLEdBQ3hEO2dCQUFFbEIsUUFBUTtZQUFJO1FBRWxCO1FBRUEsMkJBQTJCO1FBQzNCQyxRQUFRa0IsR0FBRyxDQUFDLENBQUMsMENBQTBDLEVBQUU1QixPQUFPLElBQUksRUFBRUMsZUFBZSxDQUFDO1FBRXRGLGlEQUFpRDtRQUNqRCxJQUFJWCxVQUFVO1lBQ1osSUFBSTtnQkFDRixNQUFNQSxTQUNId0IsSUFBSSxDQUFDLGNBQ0xlLE1BQU0sQ0FBQztvQkFDTkMsU0FBUzlCO29CQUNUK0IsV0FBVzlCO29CQUNYK0IsWUFBWTtvQkFDWkMsU0FBUyxJQUFJQyxPQUFPQyxXQUFXO29CQUMvQjFCLFFBQVE7Z0JBQ1Y7WUFDSixFQUFFLE9BQU8yQixTQUFTO2dCQUNoQiwwQ0FBMEM7Z0JBQzFDMUIsUUFBUUYsS0FBSyxDQUFDLDZCQUE2QjRCO1lBQzdDO1FBQ0Y7UUFFQSxPQUFPbEQscURBQVlBLENBQUNxQixJQUFJLENBQUM7WUFDdkI4QixTQUFTO1lBQ1RWLFNBQVM7WUFDVFcsU0FBU2YsTUFBTWdCO1FBQ2pCO0lBRUYsRUFBRSxPQUFPL0IsT0FBTztRQUNkRSxRQUFRRixLQUFLLENBQUMscUNBQXFDQTtRQUNuRCxPQUFPdEIscURBQVlBLENBQUNxQixJQUFJLENBQ3RCO1lBQUVDLE9BQU87UUFBZ0MsR0FDekM7WUFBRUMsUUFBUTtRQUFJO0lBRWxCO0FBQ0Y7QUFFQSwwQ0FBMEM7QUFDMUMsU0FBU1cseUJBQXlCakIsWUFBWSxFQUFFQyxTQUFTO0lBQ3ZELE9BQU8sQ0FBQztxQkFDVyxFQUFFQSxVQUFVOztBQUVqQyxFQUFFRCxhQUFhOzs7YUFHRixFQUFFLElBQUkrQixPQUFPTSxrQkFBa0IsQ0FBQyxTQUFTO1FBQ3BEQyxNQUFNO1FBQ05DLE9BQU87UUFDUEMsS0FBSztRQUNMQyxNQUFNO1FBQ05DLFFBQVE7SUFDVixHQUFHOzs7RUFHRCxDQUFDLENBQUNDLElBQUk7QUFDUiIsInNvdXJjZXMiOlsid2VicGFjazovL2N1c3RvbS1mb3Jtcy8uL2FwcC9hcGkvYWktYW5hbHlzaXMvW2Zvcm1JZF0vZW1haWwvcm91dGUuanM/ZjI2YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xuaW1wb3J0IHsgUmVzZW5kIH0gZnJvbSAncmVzZW5kJztcbmltcG9ydCB7IGdlbmVyYXRlQW5hbHlzaXNFbWFpbEhUTUwgfSBmcm9tICdAL2xpYi9lbWFpbFRlbXBsYXRlcyc7XG5cbi8vIEluaXRpYWxpemUgU3VwYWJhc2Ugb25seSBpZiBjcmVkZW50aWFscyBhcmUgYXZhaWxhYmxlXG5jb25zdCBzdXBhYmFzZSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCAmJiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWVxuICA/IGNyZWF0ZUNsaWVudChcbiAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCxcbiAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZXG4gICAgKVxuICA6IG51bGw7XG5cbmNvbnN0IHJlc2VuZCA9IHByb2Nlc3MuZW52LlJFU0VORF9BUElfS0VZID8gbmV3IFJlc2VuZChwcm9jZXNzLmVudi5SRVNFTkRfQVBJX0tFWSkgOiBudWxsO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0LCB7IHBhcmFtcyB9KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBmb3JtSWQgfSA9IHBhcmFtcztcbiAgICBjb25zdCB7IFxuICAgICAgcmVjaXBpZW50RW1haWwsIFxuICAgICAgcmVjaXBpZW50TmFtZSwgXG4gICAgICBhbmFseXNpc1RleHQsIFxuICAgICAgZm9ybVRpdGxlLFxuICAgICAgY2NFbWFpbHMgPSBbXSxcbiAgICAgIGN1c3RvbVN1YmplY3QgXG4gICAgfSA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuXG4gICAgLy8gVmFsaWRhdGUgcmVxdWlyZWQgZmllbGRzXG4gICAgaWYgKCFyZWNpcGllbnRFbWFpbCB8fCAhYW5hbHlzaXNUZXh0IHx8ICFmb3JtVGl0bGUpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ1JlY2lwaWVudCBlbWFpbCwgYW5hbHlzaXMgdGV4dCwgYW5kIGZvcm0gdGl0bGUgYXJlIHJlcXVpcmVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgUmVzZW5kIGlzIGNvbmZpZ3VyZWRcbiAgICBpZiAoIXJlc2VuZCkge1xuICAgICAgY29uc29sZS53YXJuKCdSRVNFTkRfQVBJX0tFWSBub3QgY29uZmlndXJlZCwgZW1haWwgc2VuZGluZyBkaXNhYmxlZCcpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnRW1haWwgc2VydmljZSBub3QgY29uZmlndXJlZC4gUGxlYXNlIHNldCB1cCBSRVNFTkRfQVBJX0tFWS4nIH0sXG4gICAgICAgIHsgc3RhdHVzOiA1MDMgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBHZW5lcmF0ZSB0aGUgZW1haWwgSFRNTFxuICAgIGNvbnN0IGVtYWlsSFRNTCA9IGdlbmVyYXRlQW5hbHlzaXNFbWFpbEhUTUwoZm9ybVRpdGxlLCBhbmFseXNpc1RleHQsIHJlY2lwaWVudE5hbWUpO1xuICAgIFxuICAgIC8vIFByZXBhcmUgZW1haWwgb3B0aW9uc1xuICAgIGNvbnN0IGVtYWlsT3B0aW9ucyA9IHtcbiAgICAgIGZyb206IHByb2Nlc3MuZW52LkVNQUlMX0ZST00gfHwgJ0Fsb2HCriBGb3JtcyA8Zm9ybXNAcmVzZW5kLmRldj4nLFxuICAgICAgdG86IHJlY2lwaWVudEVtYWlsLFxuICAgICAgc3ViamVjdDogY3VzdG9tU3ViamVjdCB8fCBgQUkgQW5hbHlzaXMgUmVwb3J0OiAke2Zvcm1UaXRsZX1gLFxuICAgICAgaHRtbDogZW1haWxIVE1MLFxuICAgICAgdGV4dDogZ2VuZXJhdGVQbGFpblRleHRWZXJzaW9uKGFuYWx5c2lzVGV4dCwgZm9ybVRpdGxlKSwgLy8gRmFsbGJhY2sgcGxhaW4gdGV4dFxuICAgIH07XG5cbiAgICAvLyBBZGQgQ0MgcmVjaXBpZW50cyBpZiBwcm92aWRlZFxuICAgIGlmIChjY0VtYWlscy5sZW5ndGggPiAwKSB7XG4gICAgICBlbWFpbE9wdGlvbnMuY2MgPSBjY0VtYWlscztcbiAgICB9XG5cbiAgICAvLyBTZW5kIHRoZSBlbWFpbFxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHJlc2VuZC5lbWFpbHMuc2VuZChlbWFpbE9wdGlvbnMpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZW5kaW5nIGFuYWx5c2lzIGVtYWlsOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byBzZW5kIGVtYWlsJywgZGV0YWlsczogZXJyb3IubWVzc2FnZSB9LFxuICAgICAgICB7IHN0YXR1czogNTAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gTG9nIHRoZSBlbWFpbCBzZW5kIGV2ZW50XG4gICAgY29uc29sZS5sb2coYEFuYWx5c2lzIGVtYWlsIHNlbnQgc3VjY2Vzc2Z1bGx5IGZvciBmb3JtICR7Zm9ybUlkfSB0byAke3JlY2lwaWVudEVtYWlsfWApO1xuXG4gICAgLy8gT3B0aW9uYWxseSBzdG9yZSBlbWFpbCBzZW5kIHJlY29yZCBpbiBkYXRhYmFzZVxuICAgIGlmIChzdXBhYmFzZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAuZnJvbSgnZW1haWxfbG9ncycpXG4gICAgICAgICAgLmluc2VydCh7XG4gICAgICAgICAgICBmb3JtX2lkOiBmb3JtSWQsXG4gICAgICAgICAgICByZWNpcGllbnQ6IHJlY2lwaWVudEVtYWlsLFxuICAgICAgICAgICAgZW1haWxfdHlwZTogJ2FpX2FuYWx5c2lzJyxcbiAgICAgICAgICAgIHNlbnRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIHN0YXR1czogJ3NlbnQnXG4gICAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIChkYkVycm9yKSB7XG4gICAgICAgIC8vIERvbid0IGZhaWwgdGhlIHJlcXVlc3QgaWYgbG9nZ2luZyBmYWlsc1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9nIGVtYWlsIHNlbmQ6JywgZGJFcnJvcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZTogJ0FuYWx5c2lzIGVtYWlsIHNlbnQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgIGVtYWlsSWQ6IGRhdGE/LmlkXG4gICAgfSk7XG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBlbWFpbCBhbmFseXNpcyBlbmRwb2ludDonLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogJ0ZhaWxlZCB0byBzZW5kIGFuYWx5c2lzIGVtYWlsJyB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuXG4vLyBHZW5lcmF0ZSBwbGFpbiB0ZXh0IHZlcnNpb24gYXMgZmFsbGJhY2tcbmZ1bmN0aW9uIGdlbmVyYXRlUGxhaW5UZXh0VmVyc2lvbihhbmFseXNpc1RleHQsIGZvcm1UaXRsZSkge1xuICByZXR1cm4gYFxuQUkgQW5hbHlzaXMgUmVwb3J0IC0gJHtmb3JtVGl0bGV9XG5cbiR7YW5hbHlzaXNUZXh0fVxuXG4tLS1cbkdlbmVyYXRlZCBvbiAke25ldyBEYXRlKCkudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1VUycsIHsgXG4gIHllYXI6ICdudW1lcmljJywgXG4gIG1vbnRoOiAnbG9uZycsIFxuICBkYXk6ICdudW1lcmljJyxcbiAgaG91cjogJzItZGlnaXQnLFxuICBtaW51dGU6ICcyLWRpZ2l0J1xufSl9XG5cblBvd2VyZWQgYnkgQWxvYcKuIEN1c3RvbSBGb3Jtc1xuICBgLnRyaW0oKTtcbn0iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiY3JlYXRlQ2xpZW50IiwiUmVzZW5kIiwiZ2VuZXJhdGVBbmFseXNpc0VtYWlsSFRNTCIsInN1cGFiYXNlIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwicmVzZW5kIiwiUkVTRU5EX0FQSV9LRVkiLCJQT1NUIiwicmVxdWVzdCIsInBhcmFtcyIsImZvcm1JZCIsInJlY2lwaWVudEVtYWlsIiwicmVjaXBpZW50TmFtZSIsImFuYWx5c2lzVGV4dCIsImZvcm1UaXRsZSIsImNjRW1haWxzIiwiY3VzdG9tU3ViamVjdCIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsImNvbnNvbGUiLCJ3YXJuIiwiZW1haWxIVE1MIiwiZW1haWxPcHRpb25zIiwiZnJvbSIsIkVNQUlMX0ZST00iLCJ0byIsInN1YmplY3QiLCJodG1sIiwidGV4dCIsImdlbmVyYXRlUGxhaW5UZXh0VmVyc2lvbiIsImxlbmd0aCIsImNjIiwiZGF0YSIsImVtYWlscyIsInNlbmQiLCJkZXRhaWxzIiwibWVzc2FnZSIsImxvZyIsImluc2VydCIsImZvcm1faWQiLCJyZWNpcGllbnQiLCJlbWFpbF90eXBlIiwic2VudF9hdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImRiRXJyb3IiLCJzdWNjZXNzIiwiZW1haWxJZCIsImlkIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwieWVhciIsIm1vbnRoIiwiZGF5IiwiaG91ciIsIm1pbnV0ZSIsInRyaW0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/ai-analysis/[formId]/email/route.js\n");

/***/ }),

/***/ "(rsc)/./lib/emailTemplates.js":
/*!*******************************!*\
  !*** ./lib/emailTemplates.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   generateAnalysisEmailHTML: () => (/* binding */ generateAnalysisEmailHTML)\n/* harmony export */ });\nfunction generateAnalysisEmailHTML(formTitle, analysisData, recipientName = \"\") {\n    const greeting = recipientName ? `Dear ${recipientName},` : \"Hello,\";\n    // Parse analysis data similar to PDF\n    const parsed = typeof analysisData === \"string\" ? parseAnalysisForEmail(analysisData) : analysisData;\n    return `\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>AI Analysis Report - ${formTitle}</title>\n  <!--[if mso]>\n  <noscript>\n    <xml>\n      <o:OfficeDocumentSettings>\n        <o:PixelsPerInch>96</o:PixelsPerInch>\n      </o:OfficeDocumentSettings>\n    </xml>\n  </noscript>\n  <![endif]-->\n</head>\n<body style=\"margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; background-color: #f5f5f5;\">\n  <table role=\"presentation\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\" style=\"background-color: #f5f5f5;\">\n    <tr>\n      <td align=\"center\" style=\"padding: 40px 20px;\">\n        <table role=\"presentation\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"600\" style=\"background-color: #ffffff; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);\">\n          \n          <!-- Header -->\n          <tr>\n            <td style=\"background-color: #000000; padding: 30px; text-align: center; border-radius: 8px 8px 0 0;\">\n              <h1 style=\"margin: 0; color: #FFF8E8; font-size: 24px; font-weight: 600;\">AI Analysis Report</h1>\n              <p style=\"margin: 10px 0 0 0; color: #FFF8E8; font-size: 14px; opacity: 0.9;\">Powered by Aloa® Custom Forms</p>\n            </td>\n          </tr>\n          \n          <!-- Content -->\n          <tr>\n            <td style=\"padding: 40px 30px;\">\n              \n              <!-- Greeting -->\n              <p style=\"margin: 0 0 20px 0; color: #333333; font-size: 16px; line-height: 1.5;\">\n                ${greeting}\n              </p>\n              \n              <!-- Introduction -->\n              <p style=\"margin: 0 0 30px 0; color: #666666; font-size: 14px; line-height: 1.6;\">\n                We're pleased to share the AI-powered analysis of the responses collected through <strong>${formTitle}</strong>. This report provides valuable insights and recommendations based on the submitted data.\n              </p>\n              \n              ${parsed.summary ? `\n              <!-- Executive Summary -->\n              <div style=\"margin-bottom: 30px; padding: 20px; background-color: #FFF8E8; border-left: 4px solid #000000; border-radius: 4px;\">\n                <h2 style=\"margin: 0 0 15px 0; color: #000000; font-size: 18px; font-weight: 600;\">Executive Summary</h2>\n                <p style=\"margin: 0; color: #333333; font-size: 14px; line-height: 1.6;\">\n                  ${parsed.summary}\n                </p>\n              </div>\n              ` : \"\"}\n              \n              ${parsed.insights && parsed.insights.length > 0 ? `\n              <!-- Key Insights -->\n              <div style=\"margin-bottom: 30px;\">\n                <h2 style=\"margin: 0 0 15px 0; color: #000000; font-size: 18px; font-weight: 600;\">Key Insights</h2>\n                <ul style=\"margin: 0; padding-left: 20px; color: #333333;\">\n                  ${parsed.insights.map((insight)=>`\n                    <li style=\"margin-bottom: 10px; font-size: 14px; line-height: 1.6;\">${insight}</li>\n                  `).join(\"\")}\n                </ul>\n              </div>\n              ` : \"\"}\n              \n              ${parsed.trends && parsed.trends.length > 0 ? `\n              <!-- Trends & Patterns -->\n              <div style=\"margin-bottom: 30px;\">\n                <h2 style=\"margin: 0 0 15px 0; color: #000000; font-size: 18px; font-weight: 600;\">Trends & Patterns</h2>\n                <ul style=\"margin: 0; padding-left: 20px; color: #333333;\">\n                  ${parsed.trends.map((trend)=>`\n                    <li style=\"margin-bottom: 10px; font-size: 14px; line-height: 1.6;\">${trend}</li>\n                  `).join(\"\")}\n                </ul>\n              </div>\n              ` : \"\"}\n              \n              ${parsed.recommendations && parsed.recommendations.length > 0 ? `\n              <!-- Recommendations -->\n              <div style=\"margin-bottom: 30px; padding: 20px; background-color: #f8f9fa; border-radius: 4px;\">\n                <h2 style=\"margin: 0 0 15px 0; color: #000000; font-size: 18px; font-weight: 600;\">Recommendations</h2>\n                <ol style=\"margin: 0; padding-left: 20px; color: #333333;\">\n                  ${parsed.recommendations.map((rec)=>`\n                    <li style=\"margin-bottom: 10px; font-size: 14px; line-height: 1.6; font-weight: 500;\">${rec}</li>\n                  `).join(\"\")}\n                </ol>\n              </div>\n              ` : \"\"}\n              \n              ${parsed.statistics && Object.keys(parsed.statistics).length > 0 ? `\n              <!-- Statistics -->\n              <div style=\"margin-bottom: 30px;\">\n                <h2 style=\"margin: 0 0 15px 0; color: #000000; font-size: 18px; font-weight: 600;\">Response Statistics</h2>\n                <table role=\"presentation\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" width=\"100%\">\n                  ${parsed.statistics.totalResponses !== undefined ? `\n                  <tr>\n                    <td style=\"padding: 8px 0; color: #666666; font-size: 14px;\">Total Responses:</td>\n                    <td style=\"padding: 8px 0; color: #000000; font-size: 14px; font-weight: 600; text-align: right;\">${parsed.statistics.totalResponses}</td>\n                  </tr>\n                  ` : \"\"}\n                  ${parsed.statistics.completionRate !== undefined ? `\n                  <tr>\n                    <td style=\"padding: 8px 0; color: #666666; font-size: 14px;\">Completion Rate:</td>\n                    <td style=\"padding: 8px 0; color: #000000; font-size: 14px; font-weight: 600; text-align: right;\">${parsed.statistics.completionRate}%</td>\n                  </tr>\n                  ` : \"\"}\n                  ${parsed.statistics.averageTime !== undefined ? `\n                  <tr>\n                    <td style=\"padding: 8px 0; color: #666666; font-size: 14px;\">Average Time:</td>\n                    <td style=\"padding: 8px 0; color: #000000; font-size: 14px; font-weight: 600; text-align: right;\">${parsed.statistics.averageTime}</td>\n                  </tr>\n                  ` : \"\"}\n                </table>\n              </div>\n              ` : \"\"}\n              \n              <!-- CTA Button -->\n              <div style=\"margin: 40px 0; text-align: center;\">\n                <p style=\"margin: 0 0 20px 0; color: #666666; font-size: 14px;\">\n                  For a more detailed analysis and to download the full report, please visit your dashboard.\n                </p>\n              </div>\n              \n              <!-- Closing -->\n              <p style=\"margin: 30px 0 0 0; color: #666666; font-size: 14px; line-height: 1.6;\">\n                Thank you for using Aloa® Custom Forms. If you have any questions about this analysis, please don't hesitate to reach out.\n              </p>\n              \n              <p style=\"margin: 20px 0 0 0; color: #666666; font-size: 14px;\">\n                Best regards,<br>\n                <strong>The Aloa® Team</strong>\n              </p>\n              \n            </td>\n          </tr>\n          \n          <!-- Footer -->\n          <tr>\n            <td style=\"padding: 30px; background-color: #f8f9fa; text-align: center; border-radius: 0 0 8px 8px;\">\n              <p style=\"margin: 0 0 10px 0; color: #999999; font-size: 12px;\">\n                This report was generated on ${new Date().toLocaleDateString(\"en-US\", {\n        year: \"numeric\",\n        month: \"long\",\n        day: \"numeric\",\n        hour: \"2-digit\",\n        minute: \"2-digit\"\n    })}\n              </p>\n              <p style=\"margin: 0; color: #999999; font-size: 12px;\">\n                © ${new Date().getFullYear()} Aloa®. All rights reserved.\n              </p>\n            </td>\n          </tr>\n          \n        </table>\n      </td>\n    </tr>\n  </table>\n</body>\n</html>\n  `;\n}\nfunction parseAnalysisForEmail(analysisText) {\n    const data = {\n        summary: \"\",\n        insights: [],\n        trends: [],\n        recommendations: [],\n        statistics: {}\n    };\n    if (!analysisText) return data;\n    // Split by sections (looking for markdown headers)\n    const sections = analysisText.split(/##\\s+/);\n    sections.forEach((section)=>{\n        const lines = section.trim().split(\"\\n\");\n        const sectionTitle = lines[0].toLowerCase();\n        const content = lines.slice(1).join(\"\\n\").trim();\n        if (sectionTitle.includes(\"summary\") || sectionTitle.includes(\"overview\")) {\n            data.summary = content.replace(/^[-•*]\\s*/gm, \"\").trim();\n        } else if (sectionTitle.includes(\"insight\") || sectionTitle.includes(\"finding\")) {\n            const insights = content.split(/^[-•*]\\s+/m).filter(Boolean);\n            data.insights = insights.map((i)=>i.trim());\n        } else if (sectionTitle.includes(\"trend\") || sectionTitle.includes(\"pattern\")) {\n            const trends = content.split(/^[-•*]\\s+/m).filter(Boolean);\n            data.trends = trends.map((t)=>t.trim());\n        } else if (sectionTitle.includes(\"recommend\") || sectionTitle.includes(\"suggestion\")) {\n            const recs = content.split(/^[\\d.]+\\s+/m).filter(Boolean);\n            data.recommendations = recs.map((r)=>r.trim());\n        } else if (sectionTitle.includes(\"statistic\") || sectionTitle.includes(\"metric\")) {\n            const statLines = content.split(\"\\n\");\n            statLines.forEach((line)=>{\n                if (line.includes(\"Total\") && line.includes(\"Response\")) {\n                    const match = line.match(/\\d+/);\n                    if (match) data.statistics.totalResponses = parseInt(match[0]);\n                }\n                if (line.includes(\"Completion\") && line.includes(\"Rate\")) {\n                    const match = line.match(/(\\d+(?:\\.\\d+)?)\\s*%/);\n                    if (match) data.statistics.completionRate = parseFloat(match[1]);\n                }\n                if (line.includes(\"Average\") && line.includes(\"Time\")) {\n                    const match = line.match(/(\\d+(?:\\.\\d+)?)\\s*(minute|second|hour)/i);\n                    if (match) data.statistics.averageTime = `${match[1]} ${match[2]}s`;\n                }\n            });\n        }\n    });\n    // If no structured data found, treat entire text as summary\n    if (!data.summary && data.insights.length === 0 && data.trends.length === 0) {\n        // Try to extract at least the first paragraph as summary\n        const paragraphs = analysisText.split(/\\n\\n+/);\n        if (paragraphs.length > 0) {\n            data.summary = paragraphs[0].replace(/^#\\s+/, \"\").trim();\n        }\n    }\n    return data;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBQztRQUN0QyxJQUFJc0IsV0FBV2hELE1BQU0sR0FBRyxHQUFHO1lBQ3pCd0IsS0FBSzFCLE9BQU8sR0FBR2tELFVBQVUsQ0FBQyxFQUFFLENBQUNaLE9BQU8sQ0FBQyxTQUFTLElBQUlOLElBQUk7UUFDeEQ7SUFDRjtJQUVBLE9BQU9OO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jdXN0b20tZm9ybXMvLi9saWIvZW1haWxUZW1wbGF0ZXMuanM/NWZmNCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVBbmFseXNpc0VtYWlsSFRNTChmb3JtVGl0bGUsIGFuYWx5c2lzRGF0YSwgcmVjaXBpZW50TmFtZSA9ICcnKSB7XG4gIGNvbnN0IGdyZWV0aW5nID0gcmVjaXBpZW50TmFtZSA/IGBEZWFyICR7cmVjaXBpZW50TmFtZX0sYCA6ICdIZWxsbywnO1xuICBcbiAgLy8gUGFyc2UgYW5hbHlzaXMgZGF0YSBzaW1pbGFyIHRvIFBERlxuICBjb25zdCBwYXJzZWQgPSB0eXBlb2YgYW5hbHlzaXNEYXRhID09PSAnc3RyaW5nJyA/IHBhcnNlQW5hbHlzaXNGb3JFbWFpbChhbmFseXNpc0RhdGEpIDogYW5hbHlzaXNEYXRhO1xuICBcbiAgcmV0dXJuIGBcbjwhRE9DVFlQRSBodG1sPlxuPGh0bWwgbGFuZz1cImVuXCI+XG48aGVhZD5cbiAgPG1ldGEgY2hhcnNldD1cIlVURi04XCI+XG4gIDxtZXRhIG5hbWU9XCJ2aWV3cG9ydFwiIGNvbnRlbnQ9XCJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MS4wXCI+XG4gIDx0aXRsZT5BSSBBbmFseXNpcyBSZXBvcnQgLSAke2Zvcm1UaXRsZX08L3RpdGxlPlxuICA8IS0tW2lmIG1zb10+XG4gIDxub3NjcmlwdD5cbiAgICA8eG1sPlxuICAgICAgPG86T2ZmaWNlRG9jdW1lbnRTZXR0aW5ncz5cbiAgICAgICAgPG86UGl4ZWxzUGVySW5jaD45NjwvbzpQaXhlbHNQZXJJbmNoPlxuICAgICAgPC9vOk9mZmljZURvY3VtZW50U2V0dGluZ3M+XG4gICAgPC94bWw+XG4gIDwvbm9zY3JpcHQ+XG4gIDwhW2VuZGlmXS0tPlxuPC9oZWFkPlxuPGJvZHkgc3R5bGU9XCJtYXJnaW46IDA7IHBhZGRpbmc6IDA7IGZvbnQtZmFtaWx5OiAtYXBwbGUtc3lzdGVtLCBCbGlua01hY1N5c3RlbUZvbnQsICdTZWdvZSBVSScsIFJvYm90bywgJ0hlbHZldGljYSBOZXVlJywgQXJpYWwsIHNhbnMtc2VyaWY7IGJhY2tncm91bmQtY29sb3I6ICNmNWY1ZjU7XCI+XG4gIDx0YWJsZSByb2xlPVwicHJlc2VudGF0aW9uXCIgY2VsbHNwYWNpbmc9XCIwXCIgY2VsbHBhZGRpbmc9XCIwXCIgYm9yZGVyPVwiMFwiIHdpZHRoPVwiMTAwJVwiIHN0eWxlPVwiYmFja2dyb3VuZC1jb2xvcjogI2Y1ZjVmNTtcIj5cbiAgICA8dHI+XG4gICAgICA8dGQgYWxpZ249XCJjZW50ZXJcIiBzdHlsZT1cInBhZGRpbmc6IDQwcHggMjBweDtcIj5cbiAgICAgICAgPHRhYmxlIHJvbGU9XCJwcmVzZW50YXRpb25cIiBjZWxsc3BhY2luZz1cIjBcIiBjZWxscGFkZGluZz1cIjBcIiBib3JkZXI9XCIwXCIgd2lkdGg9XCI2MDBcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7IGJvcmRlci1yYWRpdXM6IDhweDsgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwwLDAsMC4xKTtcIj5cbiAgICAgICAgICBcbiAgICAgICAgICA8IS0tIEhlYWRlciAtLT5cbiAgICAgICAgICA8dHI+XG4gICAgICAgICAgICA8dGQgc3R5bGU9XCJiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwMDAwOyBwYWRkaW5nOiAzMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IGJvcmRlci1yYWRpdXM6IDhweCA4cHggMCAwO1wiPlxuICAgICAgICAgICAgICA8aDEgc3R5bGU9XCJtYXJnaW46IDA7IGNvbG9yOiAjRkZGOEU4OyBmb250LXNpemU6IDI0cHg7IGZvbnQtd2VpZ2h0OiA2MDA7XCI+QUkgQW5hbHlzaXMgUmVwb3J0PC9oMT5cbiAgICAgICAgICAgICAgPHAgc3R5bGU9XCJtYXJnaW46IDEwcHggMCAwIDA7IGNvbG9yOiAjRkZGOEU4OyBmb250LXNpemU6IDE0cHg7IG9wYWNpdHk6IDAuOTtcIj5Qb3dlcmVkIGJ5IEFsb2HCriBDdXN0b20gRm9ybXM8L3A+XG4gICAgICAgICAgICA8L3RkPlxuICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgXG4gICAgICAgICAgPCEtLSBDb250ZW50IC0tPlxuICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgIDx0ZCBzdHlsZT1cInBhZGRpbmc6IDQwcHggMzBweDtcIj5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIDwhLS0gR3JlZXRpbmcgLS0+XG4gICAgICAgICAgICAgIDxwIHN0eWxlPVwibWFyZ2luOiAwIDAgMjBweCAwOyBjb2xvcjogIzMzMzMzMzsgZm9udC1zaXplOiAxNnB4OyBsaW5lLWhlaWdodDogMS41O1wiPlxuICAgICAgICAgICAgICAgICR7Z3JlZXRpbmd9XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIDwhLS0gSW50cm9kdWN0aW9uIC0tPlxuICAgICAgICAgICAgICA8cCBzdHlsZT1cIm1hcmdpbjogMCAwIDMwcHggMDsgY29sb3I6ICM2NjY2NjY7IGZvbnQtc2l6ZTogMTRweDsgbGluZS1oZWlnaHQ6IDEuNjtcIj5cbiAgICAgICAgICAgICAgICBXZSdyZSBwbGVhc2VkIHRvIHNoYXJlIHRoZSBBSS1wb3dlcmVkIGFuYWx5c2lzIG9mIHRoZSByZXNwb25zZXMgY29sbGVjdGVkIHRocm91Z2ggPHN0cm9uZz4ke2Zvcm1UaXRsZX08L3N0cm9uZz4uIFRoaXMgcmVwb3J0IHByb3ZpZGVzIHZhbHVhYmxlIGluc2lnaHRzIGFuZCByZWNvbW1lbmRhdGlvbnMgYmFzZWQgb24gdGhlIHN1Ym1pdHRlZCBkYXRhLlxuICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAke3BhcnNlZC5zdW1tYXJ5ID8gYFxuICAgICAgICAgICAgICA8IS0tIEV4ZWN1dGl2ZSBTdW1tYXJ5IC0tPlxuICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwibWFyZ2luLWJvdHRvbTogMzBweDsgcGFkZGluZzogMjBweDsgYmFja2dyb3VuZC1jb2xvcjogI0ZGRjhFODsgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjMDAwMDAwOyBib3JkZXItcmFkaXVzOiA0cHg7XCI+XG4gICAgICAgICAgICAgICAgPGgyIHN0eWxlPVwibWFyZ2luOiAwIDAgMTVweCAwOyBjb2xvcjogIzAwMDAwMDsgZm9udC1zaXplOiAxOHB4OyBmb250LXdlaWdodDogNjAwO1wiPkV4ZWN1dGl2ZSBTdW1tYXJ5PC9oMj5cbiAgICAgICAgICAgICAgICA8cCBzdHlsZT1cIm1hcmdpbjogMDsgY29sb3I6ICMzMzMzMzM7IGZvbnQtc2l6ZTogMTRweDsgbGluZS1oZWlnaHQ6IDEuNjtcIj5cbiAgICAgICAgICAgICAgICAgICR7cGFyc2VkLnN1bW1hcnl9XG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgYCA6ICcnfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgJHtwYXJzZWQuaW5zaWdodHMgJiYgcGFyc2VkLmluc2lnaHRzLmxlbmd0aCA+IDAgPyBgXG4gICAgICAgICAgICAgIDwhLS0gS2V5IEluc2lnaHRzIC0tPlxuICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwibWFyZ2luLWJvdHRvbTogMzBweDtcIj5cbiAgICAgICAgICAgICAgICA8aDIgc3R5bGU9XCJtYXJnaW46IDAgMCAxNXB4IDA7IGNvbG9yOiAjMDAwMDAwOyBmb250LXNpemU6IDE4cHg7IGZvbnQtd2VpZ2h0OiA2MDA7XCI+S2V5IEluc2lnaHRzPC9oMj5cbiAgICAgICAgICAgICAgICA8dWwgc3R5bGU9XCJtYXJnaW46IDA7IHBhZGRpbmctbGVmdDogMjBweDsgY29sb3I6ICMzMzMzMzM7XCI+XG4gICAgICAgICAgICAgICAgICAke3BhcnNlZC5pbnNpZ2h0cy5tYXAoaW5zaWdodCA9PiBgXG4gICAgICAgICAgICAgICAgICAgIDxsaSBzdHlsZT1cIm1hcmdpbi1ib3R0b206IDEwcHg7IGZvbnQtc2l6ZTogMTRweDsgbGluZS1oZWlnaHQ6IDEuNjtcIj4ke2luc2lnaHR9PC9saT5cbiAgICAgICAgICAgICAgICAgIGApLmpvaW4oJycpfVxuICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICBgIDogJyd9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAke3BhcnNlZC50cmVuZHMgJiYgcGFyc2VkLnRyZW5kcy5sZW5ndGggPiAwID8gYFxuICAgICAgICAgICAgICA8IS0tIFRyZW5kcyAmIFBhdHRlcm5zIC0tPlxuICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwibWFyZ2luLWJvdHRvbTogMzBweDtcIj5cbiAgICAgICAgICAgICAgICA8aDIgc3R5bGU9XCJtYXJnaW46IDAgMCAxNXB4IDA7IGNvbG9yOiAjMDAwMDAwOyBmb250LXNpemU6IDE4cHg7IGZvbnQtd2VpZ2h0OiA2MDA7XCI+VHJlbmRzICYgUGF0dGVybnM8L2gyPlxuICAgICAgICAgICAgICAgIDx1bCBzdHlsZT1cIm1hcmdpbjogMDsgcGFkZGluZy1sZWZ0OiAyMHB4OyBjb2xvcjogIzMzMzMzMztcIj5cbiAgICAgICAgICAgICAgICAgICR7cGFyc2VkLnRyZW5kcy5tYXAodHJlbmQgPT4gYFxuICAgICAgICAgICAgICAgICAgICA8bGkgc3R5bGU9XCJtYXJnaW4tYm90dG9tOiAxMHB4OyBmb250LXNpemU6IDE0cHg7IGxpbmUtaGVpZ2h0OiAxLjY7XCI+JHt0cmVuZH08L2xpPlxuICAgICAgICAgICAgICAgICAgYCkuam9pbignJyl9XG4gICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIGAgOiAnJ31cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICR7cGFyc2VkLnJlY29tbWVuZGF0aW9ucyAmJiBwYXJzZWQucmVjb21tZW5kYXRpb25zLmxlbmd0aCA+IDAgPyBgXG4gICAgICAgICAgICAgIDwhLS0gUmVjb21tZW5kYXRpb25zIC0tPlxuICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwibWFyZ2luLWJvdHRvbTogMzBweDsgcGFkZGluZzogMjBweDsgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjlmYTsgYm9yZGVyLXJhZGl1czogNHB4O1wiPlxuICAgICAgICAgICAgICAgIDxoMiBzdHlsZT1cIm1hcmdpbjogMCAwIDE1cHggMDsgY29sb3I6ICMwMDAwMDA7IGZvbnQtc2l6ZTogMThweDsgZm9udC13ZWlnaHQ6IDYwMDtcIj5SZWNvbW1lbmRhdGlvbnM8L2gyPlxuICAgICAgICAgICAgICAgIDxvbCBzdHlsZT1cIm1hcmdpbjogMDsgcGFkZGluZy1sZWZ0OiAyMHB4OyBjb2xvcjogIzMzMzMzMztcIj5cbiAgICAgICAgICAgICAgICAgICR7cGFyc2VkLnJlY29tbWVuZGF0aW9ucy5tYXAocmVjID0+IGBcbiAgICAgICAgICAgICAgICAgICAgPGxpIHN0eWxlPVwibWFyZ2luLWJvdHRvbTogMTBweDsgZm9udC1zaXplOiAxNHB4OyBsaW5lLWhlaWdodDogMS42OyBmb250LXdlaWdodDogNTAwO1wiPiR7cmVjfTwvbGk+XG4gICAgICAgICAgICAgICAgICBgKS5qb2luKCcnKX1cbiAgICAgICAgICAgICAgICA8L29sPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgYCA6ICcnfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgJHtwYXJzZWQuc3RhdGlzdGljcyAmJiBPYmplY3Qua2V5cyhwYXJzZWQuc3RhdGlzdGljcykubGVuZ3RoID4gMCA/IGBcbiAgICAgICAgICAgICAgPCEtLSBTdGF0aXN0aWNzIC0tPlxuICAgICAgICAgICAgICA8ZGl2IHN0eWxlPVwibWFyZ2luLWJvdHRvbTogMzBweDtcIj5cbiAgICAgICAgICAgICAgICA8aDIgc3R5bGU9XCJtYXJnaW46IDAgMCAxNXB4IDA7IGNvbG9yOiAjMDAwMDAwOyBmb250LXNpemU6IDE4cHg7IGZvbnQtd2VpZ2h0OiA2MDA7XCI+UmVzcG9uc2UgU3RhdGlzdGljczwvaDI+XG4gICAgICAgICAgICAgICAgPHRhYmxlIHJvbGU9XCJwcmVzZW50YXRpb25cIiBjZWxsc3BhY2luZz1cIjBcIiBjZWxscGFkZGluZz1cIjBcIiBib3JkZXI9XCIwXCIgd2lkdGg9XCIxMDAlXCI+XG4gICAgICAgICAgICAgICAgICAke3BhcnNlZC5zdGF0aXN0aWNzLnRvdGFsUmVzcG9uc2VzICE9PSB1bmRlZmluZWQgPyBgXG4gICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT1cInBhZGRpbmc6IDhweCAwOyBjb2xvcjogIzY2NjY2NjsgZm9udC1zaXplOiAxNHB4O1wiPlRvdGFsIFJlc3BvbnNlczo8L3RkPlxuICAgICAgICAgICAgICAgICAgICA8dGQgc3R5bGU9XCJwYWRkaW5nOiA4cHggMDsgY29sb3I6ICMwMDAwMDA7IGZvbnQtc2l6ZTogMTRweDsgZm9udC13ZWlnaHQ6IDYwMDsgdGV4dC1hbGlnbjogcmlnaHQ7XCI+JHtwYXJzZWQuc3RhdGlzdGljcy50b3RhbFJlc3BvbnNlc308L3RkPlxuICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgIGAgOiAnJ31cbiAgICAgICAgICAgICAgICAgICR7cGFyc2VkLnN0YXRpc3RpY3MuY29tcGxldGlvblJhdGUgIT09IHVuZGVmaW5lZCA/IGBcbiAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPVwicGFkZGluZzogOHB4IDA7IGNvbG9yOiAjNjY2NjY2OyBmb250LXNpemU6IDE0cHg7XCI+Q29tcGxldGlvbiBSYXRlOjwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT1cInBhZGRpbmc6IDhweCAwOyBjb2xvcjogIzAwMDAwMDsgZm9udC1zaXplOiAxNHB4OyBmb250LXdlaWdodDogNjAwOyB0ZXh0LWFsaWduOiByaWdodDtcIj4ke3BhcnNlZC5zdGF0aXN0aWNzLmNvbXBsZXRpb25SYXRlfSU8L3RkPlxuICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgIGAgOiAnJ31cbiAgICAgICAgICAgICAgICAgICR7cGFyc2VkLnN0YXRpc3RpY3MuYXZlcmFnZVRpbWUgIT09IHVuZGVmaW5lZCA/IGBcbiAgICAgICAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICAgICAgPHRkIHN0eWxlPVwicGFkZGluZzogOHB4IDA7IGNvbG9yOiAjNjY2NjY2OyBmb250LXNpemU6IDE0cHg7XCI+QXZlcmFnZSBUaW1lOjwvdGQ+XG4gICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT1cInBhZGRpbmc6IDhweCAwOyBjb2xvcjogIzAwMDAwMDsgZm9udC1zaXplOiAxNHB4OyBmb250LXdlaWdodDogNjAwOyB0ZXh0LWFsaWduOiByaWdodDtcIj4ke3BhcnNlZC5zdGF0aXN0aWNzLmF2ZXJhZ2VUaW1lfTwvdGQ+XG4gICAgICAgICAgICAgICAgICA8L3RyPlxuICAgICAgICAgICAgICAgICAgYCA6ICcnfVxuICAgICAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICBgIDogJyd9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICA8IS0tIENUQSBCdXR0b24gLS0+XG4gICAgICAgICAgICAgIDxkaXYgc3R5bGU9XCJtYXJnaW46IDQwcHggMDsgdGV4dC1hbGlnbjogY2VudGVyO1wiPlxuICAgICAgICAgICAgICAgIDxwIHN0eWxlPVwibWFyZ2luOiAwIDAgMjBweCAwOyBjb2xvcjogIzY2NjY2NjsgZm9udC1zaXplOiAxNHB4O1wiPlxuICAgICAgICAgICAgICAgICAgRm9yIGEgbW9yZSBkZXRhaWxlZCBhbmFseXNpcyBhbmQgdG8gZG93bmxvYWQgdGhlIGZ1bGwgcmVwb3J0LCBwbGVhc2UgdmlzaXQgeW91ciBkYXNoYm9hcmQuXG4gICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIDwhLS0gQ2xvc2luZyAtLT5cbiAgICAgICAgICAgICAgPHAgc3R5bGU9XCJtYXJnaW46IDMwcHggMCAwIDA7IGNvbG9yOiAjNjY2NjY2OyBmb250LXNpemU6IDE0cHg7IGxpbmUtaGVpZ2h0OiAxLjY7XCI+XG4gICAgICAgICAgICAgICAgVGhhbmsgeW91IGZvciB1c2luZyBBbG9hwq4gQ3VzdG9tIEZvcm1zLiBJZiB5b3UgaGF2ZSBhbnkgcXVlc3Rpb25zIGFib3V0IHRoaXMgYW5hbHlzaXMsIHBsZWFzZSBkb24ndCBoZXNpdGF0ZSB0byByZWFjaCBvdXQuXG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIDxwIHN0eWxlPVwibWFyZ2luOiAyMHB4IDAgMCAwOyBjb2xvcjogIzY2NjY2NjsgZm9udC1zaXplOiAxNHB4O1wiPlxuICAgICAgICAgICAgICAgIEJlc3QgcmVnYXJkcyw8YnI+XG4gICAgICAgICAgICAgICAgPHN0cm9uZz5UaGUgQWxvYcKuIFRlYW08L3N0cm9uZz5cbiAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgPC90cj5cbiAgICAgICAgICBcbiAgICAgICAgICA8IS0tIEZvb3RlciAtLT5cbiAgICAgICAgICA8dHI+XG4gICAgICAgICAgICA8dGQgc3R5bGU9XCJwYWRkaW5nOiAzMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhOyB0ZXh0LWFsaWduOiBjZW50ZXI7IGJvcmRlci1yYWRpdXM6IDAgMCA4cHggOHB4O1wiPlxuICAgICAgICAgICAgICA8cCBzdHlsZT1cIm1hcmdpbjogMCAwIDEwcHggMDsgY29sb3I6ICM5OTk5OTk7IGZvbnQtc2l6ZTogMTJweDtcIj5cbiAgICAgICAgICAgICAgICBUaGlzIHJlcG9ydCB3YXMgZ2VuZXJhdGVkIG9uICR7bmV3IERhdGUoKS50b0xvY2FsZURhdGVTdHJpbmcoJ2VuLVVTJywgeyBcbiAgICAgICAgICAgICAgICAgIHllYXI6ICdudW1lcmljJywgXG4gICAgICAgICAgICAgICAgICBtb250aDogJ2xvbmcnLCBcbiAgICAgICAgICAgICAgICAgIGRheTogJ251bWVyaWMnLFxuICAgICAgICAgICAgICAgICAgaG91cjogJzItZGlnaXQnLFxuICAgICAgICAgICAgICAgICAgbWludXRlOiAnMi1kaWdpdCdcbiAgICAgICAgICAgICAgICB9KX1cbiAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgICA8cCBzdHlsZT1cIm1hcmdpbjogMDsgY29sb3I6ICM5OTk5OTk7IGZvbnQtc2l6ZTogMTJweDtcIj5cbiAgICAgICAgICAgICAgICDCqSAke25ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKX0gQWxvYcKuLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8L3RkPlxuICAgICAgICAgIDwvdHI+XG4gICAgICAgICAgXG4gICAgICAgIDwvdGFibGU+XG4gICAgICA8L3RkPlxuICAgIDwvdHI+XG4gIDwvdGFibGU+XG48L2JvZHk+XG48L2h0bWw+XG4gIGA7XG59XG5cbmZ1bmN0aW9uIHBhcnNlQW5hbHlzaXNGb3JFbWFpbChhbmFseXNpc1RleHQpIHtcbiAgY29uc3QgZGF0YSA9IHtcbiAgICBzdW1tYXJ5OiAnJyxcbiAgICBpbnNpZ2h0czogW10sXG4gICAgdHJlbmRzOiBbXSxcbiAgICByZWNvbW1lbmRhdGlvbnM6IFtdLFxuICAgIHN0YXRpc3RpY3M6IHt9XG4gIH07XG5cbiAgaWYgKCFhbmFseXNpc1RleHQpIHJldHVybiBkYXRhO1xuXG4gIC8vIFNwbGl0IGJ5IHNlY3Rpb25zIChsb29raW5nIGZvciBtYXJrZG93biBoZWFkZXJzKVxuICBjb25zdCBzZWN0aW9ucyA9IGFuYWx5c2lzVGV4dC5zcGxpdCgvIyNcXHMrLyk7XG4gIFxuICBzZWN0aW9ucy5mb3JFYWNoKHNlY3Rpb24gPT4ge1xuICAgIGNvbnN0IGxpbmVzID0gc2VjdGlvbi50cmltKCkuc3BsaXQoJ1xcbicpO1xuICAgIGNvbnN0IHNlY3Rpb25UaXRsZSA9IGxpbmVzWzBdLnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3QgY29udGVudCA9IGxpbmVzLnNsaWNlKDEpLmpvaW4oJ1xcbicpLnRyaW0oKTtcbiAgICBcbiAgICBpZiAoc2VjdGlvblRpdGxlLmluY2x1ZGVzKCdzdW1tYXJ5JykgfHwgc2VjdGlvblRpdGxlLmluY2x1ZGVzKCdvdmVydmlldycpKSB7XG4gICAgICBkYXRhLnN1bW1hcnkgPSBjb250ZW50LnJlcGxhY2UoL15bLeKAoipdXFxzKi9nbSwgJycpLnRyaW0oKTtcbiAgICB9IGVsc2UgaWYgKHNlY3Rpb25UaXRsZS5pbmNsdWRlcygnaW5zaWdodCcpIHx8IHNlY3Rpb25UaXRsZS5pbmNsdWRlcygnZmluZGluZycpKSB7XG4gICAgICBjb25zdCBpbnNpZ2h0cyA9IGNvbnRlbnQuc3BsaXQoL15bLeKAoipdXFxzKy9tKS5maWx0ZXIoQm9vbGVhbik7XG4gICAgICBkYXRhLmluc2lnaHRzID0gaW5zaWdodHMubWFwKGkgPT4gaS50cmltKCkpO1xuICAgIH0gZWxzZSBpZiAoc2VjdGlvblRpdGxlLmluY2x1ZGVzKCd0cmVuZCcpIHx8IHNlY3Rpb25UaXRsZS5pbmNsdWRlcygncGF0dGVybicpKSB7XG4gICAgICBjb25zdCB0cmVuZHMgPSBjb250ZW50LnNwbGl0KC9eWy3igKIqXVxccysvbSkuZmlsdGVyKEJvb2xlYW4pO1xuICAgICAgZGF0YS50cmVuZHMgPSB0cmVuZHMubWFwKHQgPT4gdC50cmltKCkpO1xuICAgIH0gZWxzZSBpZiAoc2VjdGlvblRpdGxlLmluY2x1ZGVzKCdyZWNvbW1lbmQnKSB8fCBzZWN0aW9uVGl0bGUuaW5jbHVkZXMoJ3N1Z2dlc3Rpb24nKSkge1xuICAgICAgY29uc3QgcmVjcyA9IGNvbnRlbnQuc3BsaXQoL15bXFxkLl0rXFxzKy9tKS5maWx0ZXIoQm9vbGVhbik7XG4gICAgICBkYXRhLnJlY29tbWVuZGF0aW9ucyA9IHJlY3MubWFwKHIgPT4gci50cmltKCkpO1xuICAgIH0gZWxzZSBpZiAoc2VjdGlvblRpdGxlLmluY2x1ZGVzKCdzdGF0aXN0aWMnKSB8fCBzZWN0aW9uVGl0bGUuaW5jbHVkZXMoJ21ldHJpYycpKSB7XG4gICAgICBjb25zdCBzdGF0TGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICAgIHN0YXRMaW5lcy5mb3JFYWNoKGxpbmUgPT4ge1xuICAgICAgICBpZiAobGluZS5pbmNsdWRlcygnVG90YWwnKSAmJiBsaW5lLmluY2x1ZGVzKCdSZXNwb25zZScpKSB7XG4gICAgICAgICAgY29uc3QgbWF0Y2ggPSBsaW5lLm1hdGNoKC9cXGQrLyk7XG4gICAgICAgICAgaWYgKG1hdGNoKSBkYXRhLnN0YXRpc3RpY3MudG90YWxSZXNwb25zZXMgPSBwYXJzZUludChtYXRjaFswXSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxpbmUuaW5jbHVkZXMoJ0NvbXBsZXRpb24nKSAmJiBsaW5lLmluY2x1ZGVzKCdSYXRlJykpIHtcbiAgICAgICAgICBjb25zdCBtYXRjaCA9IGxpbmUubWF0Y2goLyhcXGQrKD86XFwuXFxkKyk/KVxccyolLyk7XG4gICAgICAgICAgaWYgKG1hdGNoKSBkYXRhLnN0YXRpc3RpY3MuY29tcGxldGlvblJhdGUgPSBwYXJzZUZsb2F0KG1hdGNoWzFdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGluZS5pbmNsdWRlcygnQXZlcmFnZScpICYmIGxpbmUuaW5jbHVkZXMoJ1RpbWUnKSkge1xuICAgICAgICAgIGNvbnN0IG1hdGNoID0gbGluZS5tYXRjaCgvKFxcZCsoPzpcXC5cXGQrKT8pXFxzKihtaW51dGV8c2Vjb25kfGhvdXIpL2kpO1xuICAgICAgICAgIGlmIChtYXRjaCkgZGF0YS5zdGF0aXN0aWNzLmF2ZXJhZ2VUaW1lID0gYCR7bWF0Y2hbMV19ICR7bWF0Y2hbMl19c2A7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gSWYgbm8gc3RydWN0dXJlZCBkYXRhIGZvdW5kLCB0cmVhdCBlbnRpcmUgdGV4dCBhcyBzdW1tYXJ5XG4gIGlmICghZGF0YS5zdW1tYXJ5ICYmIGRhdGEuaW5zaWdodHMubGVuZ3RoID09PSAwICYmIGRhdGEudHJlbmRzLmxlbmd0aCA9PT0gMCkge1xuICAgIC8vIFRyeSB0byBleHRyYWN0IGF0IGxlYXN0IHRoZSBmaXJzdCBwYXJhZ3JhcGggYXMgc3VtbWFyeVxuICAgIGNvbnN0IHBhcmFncmFwaHMgPSBhbmFseXNpc1RleHQuc3BsaXQoL1xcblxcbisvKTtcbiAgICBpZiAocGFyYWdyYXBocy5sZW5ndGggPiAwKSB7XG4gICAgICBkYXRhLnN1bW1hcnkgPSBwYXJhZ3JhcGhzWzBdLnJlcGxhY2UoL14jXFxzKy8sICcnKS50cmltKCk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGRhdGE7XG59Il0sIm5hbWVzIjpbImdlbmVyYXRlQW5hbHlzaXNFbWFpbEhUTUwiLCJmb3JtVGl0bGUiLCJhbmFseXNpc0RhdGEiLCJyZWNpcGllbnROYW1lIiwiZ3JlZXRpbmciLCJwYXJzZWQiLCJwYXJzZUFuYWx5c2lzRm9yRW1haWwiLCJzdW1tYXJ5IiwiaW5zaWdodHMiLCJsZW5ndGgiLCJtYXAiLCJpbnNpZ2h0Iiwiam9pbiIsInRyZW5kcyIsInRyZW5kIiwicmVjb21tZW5kYXRpb25zIiwicmVjIiwic3RhdGlzdGljcyIsIk9iamVjdCIsImtleXMiLCJ0b3RhbFJlc3BvbnNlcyIsInVuZGVmaW5lZCIsImNvbXBsZXRpb25SYXRlIiwiYXZlcmFnZVRpbWUiLCJEYXRlIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwieWVhciIsIm1vbnRoIiwiZGF5IiwiaG91ciIsIm1pbnV0ZSIsImdldEZ1bGxZZWFyIiwiYW5hbHlzaXNUZXh0IiwiZGF0YSIsInNlY3Rpb25zIiwic3BsaXQiLCJmb3JFYWNoIiwic2VjdGlvbiIsImxpbmVzIiwidHJpbSIsInNlY3Rpb25UaXRsZSIsInRvTG93ZXJDYXNlIiwiY29udGVudCIsInNsaWNlIiwiaW5jbHVkZXMiLCJyZXBsYWNlIiwiZmlsdGVyIiwiQm9vbGVhbiIsImkiLCJ0IiwicmVjcyIsInIiLCJzdGF0TGluZXMiLCJsaW5lIiwibWF0Y2giLCJwYXJzZUludCIsInBhcnNlRmxvYXQiLCJwYXJhZ3JhcGhzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/emailTemplates.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/resend"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai-analysis%2F%5BformId%5D%2Femail%2Froute&page=%2Fapi%2Fai-analysis%2F%5BformId%5D%2Femail%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai-analysis%2F%5BformId%5D%2Femail%2Froute.js&appDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Fcustom-forms%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Fcustom-forms&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();