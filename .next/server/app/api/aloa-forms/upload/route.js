"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/aloa-forms/upload/route";
exports.ids = ["app/api/aloa-forms/upload/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Faloa-forms%2Fupload%2Froute&page=%2Fapi%2Faloa-forms%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Faloa-forms%2Fupload%2Froute.js&appDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Faloa-web-design-project-manager%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Faloa-web-design-project-manager&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Faloa-forms%2Fupload%2Froute&page=%2Fapi%2Faloa-forms%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Faloa-forms%2Fupload%2Froute.js&appDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Faloa-web-design-project-manager%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Faloa-web-design-project-manager&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_rosspalmer_Ross_GitHub_Projects_aloa_web_design_project_manager_app_api_aloa_forms_upload_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/aloa-forms/upload/route.js */ \"(rsc)/./app/api/aloa-forms/upload/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/aloa-forms/upload/route\",\n        pathname: \"/api/aloa-forms/upload\",\n        filename: \"route\",\n        bundlePath: \"app/api/aloa-forms/upload/route\"\n    },\n    resolvedPagePath: \"/Users/rosspalmer/Ross GitHub Projects/aloa-web-design-project-manager/app/api/aloa-forms/upload/route.js\",\n    nextConfigOutput,\n    userland: _Users_rosspalmer_Ross_GitHub_Projects_aloa_web_design_project_manager_app_api_aloa_forms_upload_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/aloa-forms/upload/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhbG9hLWZvcm1zJTJGdXBsb2FkJTJGcm91dGUmcGFnZT0lMkZhcGklMkZhbG9hLWZvcm1zJTJGdXBsb2FkJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYWxvYS1mb3JtcyUyRnVwbG9hZCUyRnJvdXRlLmpzJmFwcERpcj0lMkZVc2VycyUyRnJvc3NwYWxtZXIlMkZSb3NzJTIwR2l0SHViJTIwUHJvamVjdHMlMkZhbG9hLXdlYi1kZXNpZ24tcHJvamVjdC1tYW5hZ2VyJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRnJvc3NwYWxtZXIlMkZSb3NzJTIwR2l0SHViJTIwUHJvamVjdHMlMkZhbG9hLXdlYi1kZXNpZ24tcHJvamVjdC1tYW5hZ2VyJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUN5RDtBQUN0STtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL2Fsb2EtcHJvamVjdC1tYW5hZ2VyLz84ZmFjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9yb3NzcGFsbWVyL1Jvc3MgR2l0SHViIFByb2plY3RzL2Fsb2Etd2ViLWRlc2lnbi1wcm9qZWN0LW1hbmFnZXIvYXBwL2FwaS9hbG9hLWZvcm1zL3VwbG9hZC9yb3V0ZS5qc1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvYWxvYS1mb3Jtcy91cGxvYWQvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hbG9hLWZvcm1zL3VwbG9hZFwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvYWxvYS1mb3Jtcy91cGxvYWQvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvcm9zc3BhbG1lci9Sb3NzIEdpdEh1YiBQcm9qZWN0cy9hbG9hLXdlYi1kZXNpZ24tcHJvamVjdC1tYW5hZ2VyL2FwcC9hcGkvYWxvYS1mb3Jtcy91cGxvYWQvcm91dGUuanNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2Fsb2EtZm9ybXMvdXBsb2FkL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Faloa-forms%2Fupload%2Froute&page=%2Fapi%2Faloa-forms%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Faloa-forms%2Fupload%2Froute.js&appDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Faloa-web-design-project-manager%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Faloa-web-design-project-manager&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/aloa-forms/upload/route.js":
/*!********************************************!*\
  !*** ./app/api/aloa-forms/upload/route.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase */ \"(rsc)/./lib/supabase.js\");\n/* harmony import */ var nanoid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! nanoid */ \"(rsc)/./node_modules/nanoid/index.js\");\n\n\n\nfunction parseMarkdown(markdown) {\n    const lines = markdown.split(\"\\n\");\n    const form = {\n        title: \"\",\n        description: \"\",\n        fields: []\n    };\n    let currentSection = \"General Information\";\n    for(let i = 0; i < lines.length; i++){\n        const line = lines[i];\n        const trimmed = line.trim();\n        if (trimmed.startsWith(\"# \")) {\n            form.title = trimmed.substring(2).trim();\n            // Check if next line is a description (not starting with # or ## or -)\n            if (i + 1 < lines.length) {\n                const nextLine = lines[i + 1].trim();\n                if (nextLine && !nextLine.startsWith(\"#\") && !nextLine.startsWith(\"-\") && !nextLine.startsWith(\"  -\")) {\n                    form.description = nextLine;\n                    i++; // Skip the description line\n                }\n            }\n        } else if (trimmed.startsWith(\"> \")) {\n            form.description = trimmed.substring(2).trim();\n        } else if (trimmed.startsWith(\"## \")) {\n            // Handle both \"## Section: Name\" and \"## Name\" formats\n            if (trimmed.startsWith(\"## Section: \")) {\n                currentSection = trimmed.substring(12).trim();\n            } else {\n                currentSection = trimmed.substring(3).trim();\n            }\n        } else if (trimmed.startsWith(\"- \")) {\n            // Format: \"- type* | field_id | Label | placeholder\" - Manual markdown format\n            // Split by pipe first to handle properly\n            const parts = trimmed.substring(2).split(\"|\").map((p)=>p.trim());\n            if (parts.length >= 3) {\n                const type = parts[0];\n                const fieldId = parts[1];\n                const label = parts[2];\n                const placeholder = parts[3] || \"\";\n                const isRequired = type.includes(\"*\");\n                const fieldType = type.replace(\"*\", \"\").trim();\n                const field = {\n                    type: fieldType,\n                    name: fieldId,\n                    label: label,\n                    required: isRequired,\n                    section: currentSection,\n                    position: form.fields.length,\n                    placeholder: placeholder,\n                    validation: {\n                        section: currentSection\n                    }\n                };\n                // Collect options for select/radio/checkbox fields\n                const options = [];\n                for(let j = i + 1; j < lines.length; j++){\n                    const optLine = lines[j].trim();\n                    if (optLine.startsWith(\"  - \")) {\n                        options.push(optLine.substring(4).trim());\n                    } else if (optLine && !optLine.startsWith(\"  \")) {\n                        break;\n                    }\n                }\n                if (options.length > 0) {\n                    field.options = options;\n                }\n                form.fields.push(field);\n            } else {\n                continue;\n            }\n        } else if (trimmed.length > 0 && !trimmed.startsWith(\"#\") && !trimmed.startsWith(\"  -\")) {\n            // Format: \"Question? (type) *\" - AI Chat format\n            const aiFormatMatch = trimmed.match(/^(.+?)\\s*\\(([^)]+)\\)\\s*(\\*)?$/);\n            if (aiFormatMatch) {\n                const [, label, typeInfo, requiredStar] = aiFormatMatch;\n                const isRequired = !!requiredStar;\n                // Parse type and options from typeInfo\n                let fieldType = typeInfo;\n                let options = [];\n                // Check if type includes options like \"select: Option1, Option2\"\n                if (typeInfo.includes(\":\")) {\n                    const [type, optionsStr] = typeInfo.split(\":\");\n                    fieldType = type.trim();\n                    options = optionsStr.split(\",\").map((opt)=>opt.trim());\n                }\n                // Generate field name from label\n                const fieldName = label.trim().toLowerCase().replace(/[?!.]/g, \"\").replace(/\\s+/g, \"_\").replace(/[^a-z0-9_]/g, \"\");\n                const field = {\n                    type: fieldType,\n                    name: fieldName,\n                    label: label.trim(),\n                    required: isRequired,\n                    section: currentSection,\n                    position: form.fields.length,\n                    placeholder: \"\",\n                    validation: {\n                        section: currentSection\n                    }\n                };\n                if (options.length > 0) {\n                    field.options = options;\n                }\n                form.fields.push(field);\n            }\n        }\n    }\n    return form;\n}\nasync function POST(request) {\n    try {\n        const formData = await request.formData();\n        const file = formData.get(\"markdown\");\n        const projectId = formData.get(\"projectId\");\n        if (!file) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"No file provided\"\n            }, {\n                status: 400\n            });\n        }\n        const markdown = await file.text();\n        console.log(\"=== Received markdown ===\");\n        console.log(markdown);\n        console.log(\"========================\");\n        // Log each line processing\n        const lines = markdown.split(\"\\n\");\n        lines.forEach((line, i)=>{\n            if (line.trim().startsWith(\"- \")) {\n                console.log(`Line ${i}: \"${line}\"`);\n                const parts = line.trim().substring(2).split(\"|\").map((p)=>p.trim());\n                console.log(`  Parts: [${parts.map((p)=>`\"${p}\"`).join(\", \")}]`);\n            }\n        });\n        const parsedForm = parseMarkdown(markdown);\n        console.log(\"=== Parsed form ===\");\n        console.log(JSON.stringify(parsedForm, null, 2));\n        console.log(\"==================\");\n        console.log(\"Field count:\", parsedForm.fields.length);\n        if (parsedForm.fields.length === 0) {\n            console.log(\"WARNING: No fields parsed from markdown!\");\n        }\n        // Create form in aloa_forms\n        const urlId = (0,nanoid__WEBPACK_IMPORTED_MODULE_2__.nanoid)(10);\n        const { data: form, error: formError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"aloa_forms\").insert([\n            {\n                title: parsedForm.title,\n                description: parsedForm.description,\n                url_id: urlId,\n                aloa_project_id: projectId || null,\n                sections: parsedForm.fields.reduce((acc, field)=>{\n                    if (!acc.includes(field.section)) acc.push(field.section);\n                    return acc;\n                }, []),\n                settings: {\n                    requiresAuth: false,\n                    multipleSubmissions: false,\n                    showProgressBar: true\n                },\n                status: \"active\",\n                created_at: new Date().toISOString(),\n                updated_at: new Date().toISOString()\n            }\n        ]).select().single();\n        if (formError) {\n            console.error(\"Error creating form:\", formError);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Failed to create form\"\n            }, {\n                status: 500\n            });\n        }\n        // Create fields in aloa_form_fields\n        if (parsedForm.fields.length > 0) {\n            const fieldsToInsert = parsedForm.fields.map((field)=>({\n                    aloa_form_id: form.id,\n                    field_label: field.label,\n                    field_name: field.name,\n                    field_type: field.type,\n                    required: field.required,\n                    placeholder: field.placeholder,\n                    options: field.options,\n                    validation: field.validation,\n                    field_order: field.position\n                }));\n            console.log(\"=== Fields to insert ===\");\n            console.log(JSON.stringify(fieldsToInsert, null, 2));\n            console.log(\"=======================\");\n            const { error: fieldsError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"aloa_form_fields\").insert(fieldsToInsert);\n            if (fieldsError) {\n                console.error(\"Error creating fields:\", fieldsError);\n                console.error(\"Fields that failed:\", JSON.stringify(fieldsToInsert, null, 2));\n                // Rollback form creation\n                await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"aloa_forms\").delete().eq(\"id\", form.id);\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"Failed to create form fields\"\n                }, {\n                    status: 500\n                });\n            }\n            console.log(`Successfully created ${fieldsToInsert.length} fields`);\n        } else {\n            console.log(\"No fields to create - form will have no questions!\");\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            id: form.id,\n            urlId: form.url_id,\n            title: form.title,\n            description: form.description,\n            sections: form.sections,\n            fieldCount: parsedForm.fields.length\n        });\n    } catch (error) {\n        console.error(\"Error processing form upload:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Internal server error\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2Fsb2EtZm9ybXMvdXBsb2FkL3JvdXRlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBMkM7QUFDRDtBQUNWO0FBRWhDLFNBQVNHLGNBQWNDLFFBQVE7SUFDN0IsTUFBTUMsUUFBUUQsU0FBU0UsS0FBSyxDQUFDO0lBQzdCLE1BQU1DLE9BQU87UUFDWEMsT0FBTztRQUNQQyxhQUFhO1FBQ2JDLFFBQVEsRUFBRTtJQUNaO0lBRUEsSUFBSUMsaUJBQWlCO0lBRXJCLElBQUssSUFBSUMsSUFBSSxHQUFHQSxJQUFJUCxNQUFNUSxNQUFNLEVBQUVELElBQUs7UUFDckMsTUFBTUUsT0FBT1QsS0FBSyxDQUFDTyxFQUFFO1FBQ3JCLE1BQU1HLFVBQVVELEtBQUtFLElBQUk7UUFFekIsSUFBSUQsUUFBUUUsVUFBVSxDQUFDLE9BQU87WUFDNUJWLEtBQUtDLEtBQUssR0FBR08sUUFBUUcsU0FBUyxDQUFDLEdBQUdGLElBQUk7WUFDdEMsdUVBQXVFO1lBQ3ZFLElBQUlKLElBQUksSUFBSVAsTUFBTVEsTUFBTSxFQUFFO2dCQUN4QixNQUFNTSxXQUFXZCxLQUFLLENBQUNPLElBQUksRUFBRSxDQUFDSSxJQUFJO2dCQUNsQyxJQUFJRyxZQUFZLENBQUNBLFNBQVNGLFVBQVUsQ0FBQyxRQUFRLENBQUNFLFNBQVNGLFVBQVUsQ0FBQyxRQUFRLENBQUNFLFNBQVNGLFVBQVUsQ0FBQyxRQUFRO29CQUNyR1YsS0FBS0UsV0FBVyxHQUFHVTtvQkFDbkJQLEtBQUssNEJBQTRCO2dCQUNuQztZQUNGO1FBQ0YsT0FBTyxJQUFJRyxRQUFRRSxVQUFVLENBQUMsT0FBTztZQUNuQ1YsS0FBS0UsV0FBVyxHQUFHTSxRQUFRRyxTQUFTLENBQUMsR0FBR0YsSUFBSTtRQUM5QyxPQUFPLElBQUlELFFBQVFFLFVBQVUsQ0FBQyxRQUFRO1lBQ3BDLHVEQUF1RDtZQUN2RCxJQUFJRixRQUFRRSxVQUFVLENBQUMsaUJBQWlCO2dCQUN0Q04saUJBQWlCSSxRQUFRRyxTQUFTLENB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b0UsSUFBSSxDQUFDLGNBQWN5QixNQUFNLEdBQUdDLEVBQUUsQ0FBQyxNQUFNeEYsS0FBS2lGLEVBQUU7Z0JBQzNELE9BQU94RixxREFBWUEsQ0FBQ3VELElBQUksQ0FBQztvQkFBRUMsT0FBTztnQkFBK0IsR0FBRztvQkFBRUMsUUFBUTtnQkFBSTtZQUNwRjtZQUVBRSxRQUFRQyxHQUFHLENBQUMsQ0FBQyxxQkFBcUIsRUFBRTBCLGVBQWV6RSxNQUFNLENBQUMsT0FBTyxDQUFDO1FBQ3BFLE9BQU87WUFDTDhDLFFBQVFDLEdBQUcsQ0FBQztRQUNkO1FBRUEsT0FBTzVELHFEQUFZQSxDQUFDdUQsSUFBSSxDQUFDO1lBQ3ZCaUMsSUFBSWpGLEtBQUtpRixFQUFFO1lBQ1h0QixPQUFPM0QsS0FBS2dFLE1BQU07WUFDbEIvRCxPQUFPRCxLQUFLQyxLQUFLO1lBQ2pCQyxhQUFhRixLQUFLRSxXQUFXO1lBQzdCZ0UsVUFBVWxFLEtBQUtrRSxRQUFRO1lBQ3ZCdUIsWUFBWWpDLFdBQVdyRCxNQUFNLENBQUNHLE1BQU07UUFDdEM7SUFDRixFQUFFLE9BQU8yQyxPQUFPO1FBQ2RHLFFBQVFILEtBQUssQ0FBQyxpQ0FBaUNBO1FBQy9DLE9BQU94RCxxREFBWUEsQ0FBQ3VELElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQXdCLEdBQUc7WUFBRUMsUUFBUTtRQUFJO0lBQzdFO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbG9hLXByb2plY3QtbWFuYWdlci8uL2FwcC9hcGkvYWxvYS1mb3Jtcy91cGxvYWQvcm91dGUuanM/YTRiNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBzdXBhYmFzZSB9IGZyb20gJ0AvbGliL3N1cGFiYXNlJztcbmltcG9ydCB7IG5hbm9pZCB9IGZyb20gJ25hbm9pZCc7XG5cbmZ1bmN0aW9uIHBhcnNlTWFya2Rvd24obWFya2Rvd24pIHtcbiAgY29uc3QgbGluZXMgPSBtYXJrZG93bi5zcGxpdCgnXFxuJyk7XG4gIGNvbnN0IGZvcm0gPSB7XG4gICAgdGl0bGU6ICcnLFxuICAgIGRlc2NyaXB0aW9uOiAnJyxcbiAgICBmaWVsZHM6IFtdXG4gIH07XG4gIFxuICBsZXQgY3VycmVudFNlY3Rpb24gPSAnR2VuZXJhbCBJbmZvcm1hdGlvbic7XG4gIFxuICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgbGluZSA9IGxpbmVzW2ldO1xuICAgIGNvbnN0IHRyaW1tZWQgPSBsaW5lLnRyaW0oKTtcbiAgICBcbiAgICBpZiAodHJpbW1lZC5zdGFydHNXaXRoKCcjICcpKSB7XG4gICAgICBmb3JtLnRpdGxlID0gdHJpbW1lZC5zdWJzdHJpbmcoMikudHJpbSgpO1xuICAgICAgLy8gQ2hlY2sgaWYgbmV4dCBsaW5lIGlzIGEgZGVzY3JpcHRpb24gKG5vdCBzdGFydGluZyB3aXRoICMgb3IgIyMgb3IgLSlcbiAgICAgIGlmIChpICsgMSA8IGxpbmVzLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBuZXh0TGluZSA9IGxpbmVzW2kgKyAxXS50cmltKCk7XG4gICAgICAgIGlmIChuZXh0TGluZSAmJiAhbmV4dExpbmUuc3RhcnRzV2l0aCgnIycpICYmICFuZXh0TGluZS5zdGFydHNXaXRoKCctJykgJiYgIW5leHRMaW5lLnN0YXJ0c1dpdGgoJyAgLScpKSB7XG4gICAgICAgICAgZm9ybS5kZXNjcmlwdGlvbiA9IG5leHRMaW5lO1xuICAgICAgICAgIGkrKzsgLy8gU2tpcCB0aGUgZGVzY3JpcHRpb24gbGluZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0cmltbWVkLnN0YXJ0c1dpdGgoJz4gJykpIHtcbiAgICAgIGZvcm0uZGVzY3JpcHRpb24gPSB0cmltbWVkLnN1YnN0cmluZygyKS50cmltKCk7XG4gICAgfSBlbHNlIGlmICh0cmltbWVkLnN0YXJ0c1dpdGgoJyMjICcpKSB7XG4gICAgICAvLyBIYW5kbGUgYm90aCBcIiMjIFNlY3Rpb246IE5hbWVcIiBhbmQgXCIjIyBOYW1lXCIgZm9ybWF0c1xuICAgICAgaWYgKHRyaW1tZWQuc3RhcnRzV2l0aCgnIyMgU2VjdGlvbjogJykpIHtcbiAgICAgICAgY3VycmVudFNlY3Rpb24gPSB0cmltbWVkLnN1YnN0cmluZygxMikudHJpbSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudFNlY3Rpb24gPSB0cmltbWVkLnN1YnN0cmluZygzKS50cmltKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0cmltbWVkLnN0YXJ0c1dpdGgoJy0gJykpIHtcbiAgICAgIC8vIEZvcm1hdDogXCItIHR5cGUqIHwgZmllbGRfaWQgfCBMYWJlbCB8IHBsYWNlaG9sZGVyXCIgLSBNYW51YWwgbWFya2Rvd24gZm9ybWF0XG4gICAgICAvLyBTcGxpdCBieSBwaXBlIGZpcnN0IHRvIGhhbmRsZSBwcm9wZXJseVxuICAgICAgY29uc3QgcGFydHMgPSB0cmltbWVkLnN1YnN0cmluZygyKS5zcGxpdCgnfCcpLm1hcChwID0+IHAudHJpbSgpKTtcbiAgICAgIFxuICAgICAgaWYgKHBhcnRzLmxlbmd0aCA+PSAzKSB7XG4gICAgICAgIGNvbnN0IHR5cGUgPSBwYXJ0c1swXTtcbiAgICAgICAgY29uc3QgZmllbGRJZCA9IHBhcnRzWzFdO1xuICAgICAgICBjb25zdCBsYWJlbCA9IHBhcnRzWzJdO1xuICAgICAgICBjb25zdCBwbGFjZWhvbGRlciA9IHBhcnRzWzNdIHx8ICcnO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgaXNSZXF1aXJlZCA9IHR5cGUuaW5jbHVkZXMoJyonKTtcbiAgICAgICAgY29uc3QgZmllbGRUeXBlID0gdHlwZS5yZXBsYWNlKCcqJywgJycpLnRyaW0oKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGZpZWxkID0ge1xuICAgICAgICAgIHR5cGU6IGZpZWxkVHlwZSxcbiAgICAgICAgICBuYW1lOiBmaWVsZElkLFxuICAgICAgICAgIGxhYmVsOiBsYWJlbCxcbiAgICAgICAgICByZXF1aXJlZDogaXNSZXF1aXJlZCxcbiAgICAgICAgICBzZWN0aW9uOiBjdXJyZW50U2VjdGlvbixcbiAgICAgICAgICBwb3NpdGlvbjogZm9ybS5maWVsZHMubGVuZ3RoLFxuICAgICAgICAgIHBsYWNlaG9sZGVyOiBwbGFjZWhvbGRlcixcbiAgICAgICAgICB2YWxpZGF0aW9uOiB7IHNlY3Rpb246IGN1cnJlbnRTZWN0aW9uIH1cbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIENvbGxlY3Qgb3B0aW9ucyBmb3Igc2VsZWN0L3JhZGlvL2NoZWNrYm94IGZpZWxkc1xuICAgICAgICBjb25zdCBvcHRpb25zID0gW107XG4gICAgICAgIGZvciAobGV0IGogPSBpICsgMTsgaiA8IGxpbmVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgY29uc3Qgb3B0TGluZSA9IGxpbmVzW2pdLnRyaW0oKTtcbiAgICAgICAgICBpZiAob3B0TGluZS5zdGFydHNXaXRoKCcgIC0gJykpIHtcbiAgICAgICAgICAgIG9wdGlvbnMucHVzaChvcHRMaW5lLnN1YnN0cmluZyg0KS50cmltKCkpO1xuICAgICAgICAgIH0gZWxzZSBpZiAob3B0TGluZSAmJiAhb3B0TGluZS5zdGFydHNXaXRoKCcgICcpKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGZpZWxkLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmb3JtLmZpZWxkcy5wdXNoKGZpZWxkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHJpbW1lZC5sZW5ndGggPiAwICYmICF0cmltbWVkLnN0YXJ0c1dpdGgoJyMnKSAmJiAhdHJpbW1lZC5zdGFydHNXaXRoKCcgIC0nKSkge1xuICAgICAgLy8gRm9ybWF0OiBcIlF1ZXN0aW9uPyAodHlwZSkgKlwiIC0gQUkgQ2hhdCBmb3JtYXRcbiAgICAgIGNvbnN0IGFpRm9ybWF0TWF0Y2ggPSB0cmltbWVkLm1hdGNoKC9eKC4rPylcXHMqXFwoKFteKV0rKVxcKVxccyooXFwqKT8kLyk7XG4gICAgICBcbiAgICAgIGlmIChhaUZvcm1hdE1hdGNoKSB7XG4gICAgICAgIGNvbnN0IFssIGxhYmVsLCB0eXBlSW5mbywgcmVxdWlyZWRTdGFyXSA9IGFpRm9ybWF0TWF0Y2g7XG4gICAgICAgIGNvbnN0IGlzUmVxdWlyZWQgPSAhIXJlcXVpcmVkU3RhcjtcbiAgICAgICAgXG4gICAgICAgIC8vIFBhcnNlIHR5cGUgYW5kIG9wdGlvbnMgZnJvbSB0eXBlSW5mb1xuICAgICAgICBsZXQgZmllbGRUeXBlID0gdHlwZUluZm87XG4gICAgICAgIGxldCBvcHRpb25zID0gW107XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiB0eXBlIGluY2x1ZGVzIG9wdGlvbnMgbGlrZSBcInNlbGVjdDogT3B0aW9uMSwgT3B0aW9uMlwiXG4gICAgICAgIGlmICh0eXBlSW5mby5pbmNsdWRlcygnOicpKSB7XG4gICAgICAgICAgY29uc3QgW3R5cGUsIG9wdGlvbnNTdHJdID0gdHlwZUluZm8uc3BsaXQoJzonKTtcbiAgICAgICAgICBmaWVsZFR5cGUgPSB0eXBlLnRyaW0oKTtcbiAgICAgICAgICBvcHRpb25zID0gb3B0aW9uc1N0ci5zcGxpdCgnLCcpLm1hcChvcHQgPT4gb3B0LnRyaW0oKSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEdlbmVyYXRlIGZpZWxkIG5hbWUgZnJvbSBsYWJlbFxuICAgICAgICBjb25zdCBmaWVsZE5hbWUgPSBsYWJlbC50cmltKClcbiAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgIC5yZXBsYWNlKC9bPyEuXS9nLCAnJylcbiAgICAgICAgICAucmVwbGFjZSgvXFxzKy9nLCAnXycpXG4gICAgICAgICAgLnJlcGxhY2UoL1teYS16MC05X10vZywgJycpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgZmllbGQgPSB7XG4gICAgICAgICAgdHlwZTogZmllbGRUeXBlLFxuICAgICAgICAgIG5hbWU6IGZpZWxkTmFtZSxcbiAgICAgICAgICBsYWJlbDogbGFiZWwudHJpbSgpLFxuICAgICAgICAgIHJlcXVpcmVkOiBpc1JlcXVpcmVkLFxuICAgICAgICAgIHNlY3Rpb246IGN1cnJlbnRTZWN0aW9uLFxuICAgICAgICAgIHBvc2l0aW9uOiBmb3JtLmZpZWxkcy5sZW5ndGgsXG4gICAgICAgICAgcGxhY2Vob2xkZXI6ICcnLFxuICAgICAgICAgIHZhbGlkYXRpb246IHsgc2VjdGlvbjogY3VycmVudFNlY3Rpb24gfVxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgaWYgKG9wdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGZpZWxkLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBmb3JtLmZpZWxkcy5wdXNoKGZpZWxkKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiBmb3JtO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgZm9ybURhdGEgPSBhd2FpdCByZXF1ZXN0LmZvcm1EYXRhKCk7XG4gICAgY29uc3QgZmlsZSA9IGZvcm1EYXRhLmdldCgnbWFya2Rvd24nKTtcbiAgICBjb25zdCBwcm9qZWN0SWQgPSBmb3JtRGF0YS5nZXQoJ3Byb2plY3RJZCcpO1xuICAgIFxuICAgIGlmICghZmlsZSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdObyBmaWxlIHByb3ZpZGVkJyB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBtYXJrZG93biA9IGF3YWl0IGZpbGUudGV4dCgpO1xuICAgIGNvbnNvbGUubG9nKCc9PT0gUmVjZWl2ZWQgbWFya2Rvd24gPT09Jyk7XG4gICAgY29uc29sZS5sb2cobWFya2Rvd24pO1xuICAgIGNvbnNvbGUubG9nKCc9PT09PT09PT09PT09PT09PT09PT09PT0nKTtcbiAgICBcbiAgICAvLyBMb2cgZWFjaCBsaW5lIHByb2Nlc3NpbmdcbiAgICBjb25zdCBsaW5lcyA9IG1hcmtkb3duLnNwbGl0KCdcXG4nKTtcbiAgICBsaW5lcy5mb3JFYWNoKChsaW5lLCBpKSA9PiB7XG4gICAgICBpZiAobGluZS50cmltKCkuc3RhcnRzV2l0aCgnLSAnKSkge1xuICAgICAgICBjb25zb2xlLmxvZyhgTGluZSAke2l9OiBcIiR7bGluZX1cImApO1xuICAgICAgICBjb25zdCBwYXJ0cyA9IGxpbmUudHJpbSgpLnN1YnN0cmluZygyKS5zcGxpdCgnfCcpLm1hcChwID0+IHAudHJpbSgpKTtcbiAgICAgICAgY29uc29sZS5sb2coYCAgUGFydHM6IFske3BhcnRzLm1hcChwID0+IGBcIiR7cH1cImApLmpvaW4oJywgJyl9XWApO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IHBhcnNlZEZvcm0gPSBwYXJzZU1hcmtkb3duKG1hcmtkb3duKTtcbiAgICBjb25zb2xlLmxvZygnPT09IFBhcnNlZCBmb3JtID09PScpO1xuICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KHBhcnNlZEZvcm0sIG51bGwsIDIpKTtcbiAgICBjb25zb2xlLmxvZygnPT09PT09PT09PT09PT09PT09Jyk7XG4gICAgY29uc29sZS5sb2coJ0ZpZWxkIGNvdW50OicsIHBhcnNlZEZvcm0uZmllbGRzLmxlbmd0aCk7XG4gICAgaWYgKHBhcnNlZEZvcm0uZmllbGRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc29sZS5sb2coJ1dBUk5JTkc6IE5vIGZpZWxkcyBwYXJzZWQgZnJvbSBtYXJrZG93biEnKTtcbiAgICB9XG4gICAgXG4gICAgLy8gQ3JlYXRlIGZvcm0gaW4gYWxvYV9mb3Jtc1xuICAgIGNvbnN0IHVybElkID0gbmFub2lkKDEwKTtcbiAgICBjb25zdCB7IGRhdGE6IGZvcm0sIGVycm9yOiBmb3JtRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnYWxvYV9mb3JtcycpXG4gICAgICAuaW5zZXJ0KFt7XG4gICAgICAgIHRpdGxlOiBwYXJzZWRGb3JtLnRpdGxlLFxuICAgICAgICBkZXNjcmlwdGlvbjogcGFyc2VkRm9ybS5kZXNjcmlwdGlvbixcbiAgICAgICAgdXJsX2lkOiB1cmxJZCxcbiAgICAgICAgYWxvYV9wcm9qZWN0X2lkOiBwcm9qZWN0SWQgfHwgbnVsbCxcbiAgICAgICAgc2VjdGlvbnM6IHBhcnNlZEZvcm0uZmllbGRzLnJlZHVjZSgoYWNjLCBmaWVsZCkgPT4ge1xuICAgICAgICAgIGlmICghYWNjLmluY2x1ZGVzKGZpZWxkLnNlY3Rpb24pKSBhY2MucHVzaChmaWVsZC5zZWN0aW9uKTtcbiAgICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgICB9LCBbXSksXG4gICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgcmVxdWlyZXNBdXRoOiBmYWxzZSxcbiAgICAgICAgICBtdWx0aXBsZVN1Ym1pc3Npb25zOiBmYWxzZSxcbiAgICAgICAgICBzaG93UHJvZ3Jlc3NCYXI6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAgc3RhdHVzOiAnYWN0aXZlJyxcbiAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICB1cGRhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH1dKVxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuc2luZ2xlKCk7XG4gICAgXG4gICAgaWYgKGZvcm1FcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgZm9ybTonLCBmb3JtRXJyb3IpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdGYWlsZWQgdG8gY3JlYXRlIGZvcm0nIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIENyZWF0ZSBmaWVsZHMgaW4gYWxvYV9mb3JtX2ZpZWxkc1xuICAgIGlmIChwYXJzZWRGb3JtLmZpZWxkcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBmaWVsZHNUb0luc2VydCA9IHBhcnNlZEZvcm0uZmllbGRzLm1hcChmaWVsZCA9PiAoe1xuICAgICAgICBhbG9hX2Zvcm1faWQ6IGZvcm0uaWQsXG4gICAgICAgIGZpZWxkX2xhYmVsOiBmaWVsZC5sYWJlbCxcbiAgICAgICAgZmllbGRfbmFtZTogZmllbGQubmFtZSxcbiAgICAgICAgZmllbGRfdHlwZTogZmllbGQudHlwZSxcbiAgICAgICAgcmVxdWlyZWQ6IGZpZWxkLnJlcXVpcmVkLFxuICAgICAgICBwbGFjZWhvbGRlcjogZmllbGQucGxhY2Vob2xkZXIsXG4gICAgICAgIG9wdGlvbnM6IGZpZWxkLm9wdGlvbnMsXG4gICAgICAgIHZhbGlkYXRpb246IGZpZWxkLnZhbGlkYXRpb24sXG4gICAgICAgIGZpZWxkX29yZGVyOiBmaWVsZC5wb3NpdGlvblxuICAgICAgfSkpO1xuICAgICAgXG4gICAgICBjb25zb2xlLmxvZygnPT09IEZpZWxkcyB0byBpbnNlcnQgPT09Jyk7XG4gICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShmaWVsZHNUb0luc2VydCwgbnVsbCwgMikpO1xuICAgICAgY29uc29sZS5sb2coJz09PT09PT09PT09PT09PT09PT09PT09Jyk7XG4gICAgICBcbiAgICAgIGNvbnN0IHsgZXJyb3I6IGZpZWxkc0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnYWxvYV9mb3JtX2ZpZWxkcycpXG4gICAgICAgIC5pbnNlcnQoZmllbGRzVG9JbnNlcnQpO1xuICAgICAgXG4gICAgICBpZiAoZmllbGRzRXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgZmllbGRzOicsIGZpZWxkc0Vycm9yKTtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmllbGRzIHRoYXQgZmFpbGVkOicsIEpTT04uc3RyaW5naWZ5KGZpZWxkc1RvSW5zZXJ0LCBudWxsLCAyKSk7XG4gICAgICAgIC8vIFJvbGxiYWNrIGZvcm0gY3JlYXRpb25cbiAgICAgICAgYXdhaXQgc3VwYWJhc2UuZnJvbSgnYWxvYV9mb3JtcycpLmRlbGV0ZSgpLmVxKCdpZCcsIGZvcm0uaWQpO1xuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ZhaWxlZCB0byBjcmVhdGUgZm9ybSBmaWVsZHMnIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKGBTdWNjZXNzZnVsbHkgY3JlYXRlZCAke2ZpZWxkc1RvSW5zZXJ0Lmxlbmd0aH0gZmllbGRzYCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKCdObyBmaWVsZHMgdG8gY3JlYXRlIC0gZm9ybSB3aWxsIGhhdmUgbm8gcXVlc3Rpb25zIScpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgaWQ6IGZvcm0uaWQsXG4gICAgICB1cmxJZDogZm9ybS51cmxfaWQsXG4gICAgICB0aXRsZTogZm9ybS50aXRsZSxcbiAgICAgIGRlc2NyaXB0aW9uOiBmb3JtLmRlc2NyaXB0aW9uLFxuICAgICAgc2VjdGlvbnM6IGZvcm0uc2VjdGlvbnMsXG4gICAgICBmaWVsZENvdW50OiBwYXJzZWRGb3JtLmZpZWxkcy5sZW5ndGhcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwcm9jZXNzaW5nIGZvcm0gdXBsb2FkOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJzdXBhYmFzZSIsIm5hbm9pZCIsInBhcnNlTWFya2Rvd24iLCJtYXJrZG93biIsImxpbmVzIiwic3BsaXQiLCJmb3JtIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImZpZWxkcyIsImN1cnJlbnRTZWN0aW9uIiwiaSIsImxlbmd0aCIsImxpbmUiLCJ0cmltbWVkIiwidHJpbSIsInN0YXJ0c1dpdGgiLCJzdWJzdHJpbmciLCJuZXh0TGluZSIsInBhcnRzIiwibWFwIiwicCIsInR5cGUiLCJmaWVsZElkIiwibGFiZWwiLCJwbGFjZWhvbGRlciIsImlzUmVxdWlyZWQiLCJpbmNsdWRlcyIsImZpZWxkVHlwZSIsInJlcGxhY2UiLCJmaWVsZCIsIm5hbWUiLCJyZXF1aXJlZCIsInNlY3Rpb24iLCJwb3NpdGlvbiIsInZhbGlkYXRpb24iLCJvcHRpb25zIiwiaiIsIm9wdExpbmUiLCJwdXNoIiwiYWlGb3JtYXRNYXRjaCIsIm1hdGNoIiwidHlwZUluZm8iLCJyZXF1aXJlZFN0YXIiLCJvcHRpb25zU3RyIiwib3B0IiwiZmllbGROYW1lIiwidG9Mb3dlckNhc2UiLCJQT1NUIiwicmVxdWVzdCIsImZvcm1EYXRhIiwiZmlsZSIsImdldCIsInByb2plY3RJZCIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsInRleHQiLCJjb25zb2xlIiwibG9nIiwiZm9yRWFjaCIsImpvaW4iLCJwYXJzZWRGb3JtIiwiSlNPTiIsInN0cmluZ2lmeSIsInVybElkIiwiZGF0YSIsImZvcm1FcnJvciIsImZyb20iLCJpbnNlcnQiLCJ1cmxfaWQiLCJhbG9hX3Byb2plY3RfaWQiLCJzZWN0aW9ucyIsInJlZHVjZSIsImFjYyIsInNldHRpbmdzIiwicmVxdWlyZXNBdXRoIiwibXVsdGlwbGVTdWJtaXNzaW9ucyIsInNob3dQcm9ncmVzc0JhciIsImNyZWF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJ1cGRhdGVkX2F0Iiwic2VsZWN0Iiwic2luZ2xlIiwiZmllbGRzVG9JbnNlcnQiLCJhbG9hX2Zvcm1faWQiLCJpZCIsImZpZWxkX2xhYmVsIiwiZmllbGRfbmFtZSIsImZpZWxkX3R5cGUiLCJmaWVsZF9vcmRlciIsImZpZWxkc0Vycm9yIiwiZGVsZXRlIiwiZXEiLCJmaWVsZENvdW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/aloa-forms/upload/route.js\n");

/***/ }),

/***/ "(rsc)/./lib/supabase.js":
/*!*************************!*\
  !*** ./lib/supabase.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://eycgzjqwowrdmjlzqqyg.supabase.co\" || 0;\n// Check for ANON_KEY first as it's the one that's actually set in the environment\nconst supabaseKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV5Y2d6anF3b3dyZG1qbHpxcXlnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQwODcyMDIsImV4cCI6MjA2OTY2MzIwMn0.QfdUDAF8MweVTmJtrgnPiLWRdXz7hpFIzre-hiVay4E\" || 0 || 0;\n// Log what we're using (without exposing full key)\nif (false) {}\n// Only check for environment variables in production or when actually using the client\nlet supabase = null;\nif (supabaseUrl && supabaseKey) {\n    supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseKey);\n} else if (false) {}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBcUQ7QUFFckQsTUFBTUMsY0FBY0MsMENBQW9DLElBQUk7QUFDNUQsa0ZBQWtGO0FBQ2xGLE1BQU1HLGNBQWNILGtOQUF5QyxJQUFJQSxDQUFnRCxJQUFJO0FBRXJILG1EQUFtRDtBQUNuRCxJQUFJLEtBQTBELEVBQWUsRUFPNUU7QUFFRCx1RkFBdUY7QUFDdkYsSUFBSVksV0FBVztBQUVmLElBQUliLGVBQWVJLGFBQWE7SUFDOUJTLFdBQVdkLG1FQUFZQSxDQUFDQyxhQUFhSTtBQUN2QyxPQUFPLElBQUlILEtBQXlCLEVBQWMsRUFFakQ7QUFFbUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbG9hLXByb2plY3QtbWFuYWdlci8uL2xpYi9zdXBhYmFzZS5qcz8xNTk4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XG5cbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIHx8ICcnO1xuLy8gQ2hlY2sgZm9yIEFOT05fS0VZIGZpcnN0IGFzIGl0J3MgdGhlIG9uZSB0aGF0J3MgYWN0dWFsbHkgc2V0IGluIHRoZSBlbnZpcm9ubWVudFxuY29uc3Qgc3VwYWJhc2VLZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSB8fCBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9QVUJMSVNIQUJMRV9LRVkgfHwgJyc7XG5cbi8vIExvZyB3aGF0IHdlJ3JlIHVzaW5nICh3aXRob3V0IGV4cG9zaW5nIGZ1bGwga2V5KVxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gIGNvbnNvbGUubG9nKCdTdXBhYmFzZSBjbGllbnQgY29uZmlnOicsIHtcbiAgICB1cmw6IHN1cGFiYXNlVXJsID8gJ3ByZXNlbnQnIDogJ21pc3NpbmcnLFxuICAgIGtleVNvdXJjZTogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkgPyAnQU5PTl9LRVknIDogXG4gICAgICAgICAgICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9QVUJMSVNIQUJMRV9LRVkgPyAnUFVCTElTSEFCTEVfS0VZJyA6ICdtaXNzaW5nJyxcbiAgICBrZXlQcmVmaXg6IHN1cGFiYXNlS2V5ID8gc3VwYWJhc2VLZXkuc3Vic3RyaW5nKDAsIDIwKSArICcuLi4nIDogJ21pc3NpbmcnXG4gIH0pO1xufVxuXG4vLyBPbmx5IGNoZWNrIGZvciBlbnZpcm9ubWVudCB2YXJpYWJsZXMgaW4gcHJvZHVjdGlvbiBvciB3aGVuIGFjdHVhbGx5IHVzaW5nIHRoZSBjbGllbnRcbmxldCBzdXBhYmFzZSA9IG51bGw7XG5cbmlmIChzdXBhYmFzZVVybCAmJiBzdXBhYmFzZUtleSkge1xuICBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VLZXkpO1xufSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGNvbnNvbGUuZXJyb3IoJ1dhcm5pbmc6IFN1cGFiYXNlIGVudmlyb25tZW50IHZhcmlhYmxlcyBhcmUgbWlzc2luZycpO1xufVxuXG5leHBvcnQgeyBzdXBhYmFzZSB9OyJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUtleSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfUFVCTElTSEFCTEVfS0VZIiwiY29uc29sZSIsImxvZyIsInVybCIsImtleVNvdXJjZSIsImtleVByZWZpeCIsInN1YnN0cmluZyIsInN1cGFiYXNlIiwiZXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@supabase","vendor-chunks/next","vendor-chunks/nanoid"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Faloa-forms%2Fupload%2Froute&page=%2Fapi%2Faloa-forms%2Fupload%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Faloa-forms%2Fupload%2Froute.js&appDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Faloa-web-design-project-manager%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Faloa-web-design-project-manager&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();