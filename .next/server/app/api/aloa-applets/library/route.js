"use strict";(()=>{var e={};e.id=9069,e.ids=[9069],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},68621:e=>{e.exports=require("punycode")},76162:e=>{e.exports=require("stream")},17360:e=>{e.exports=require("url")},71568:e=>{e.exports=require("zlib")},76064:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>b,patchFetch:()=>m,requestAsyncStorage:()=>y,routeModule:()=>d,serverHooks:()=>_,staticGenerationAsyncStorage:()=>g});var a={};t.r(a),t.d(a,{GET:()=>l,POST:()=>u,PUT:()=>c});var o=t(49303),s=t(88716),n=t(60670),i=t(87070),p=t(76995);async function l(e){try{let{searchParams:r}=new URL(e.url),t=r.get("type"),a=r.get("active"),o=p.O.from("aloa_applet_library").select("*").order("usage_count",{ascending:!1});t&&(o=o.eq("type",t)),null!==a&&(o=o.eq("is_active","true"===a));let{data:s,error:n}=await o;if(n)return console.error("Error fetching applet library:",n),i.NextResponse.json({error:"Failed to fetch applet library"},{status:500});return i.NextResponse.json({applets:s||[]})}catch(e){return console.error("Error in applet library route:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}async function u(e){try{let r=await e.json(),{data:t,error:a}=await p.O.from("aloa_applet_library").insert([{name:r.name,description:r.description,type:r.type,icon:r.icon,config_schema:r.config_schema||{},default_config:r.default_config||{},is_client_facing:!1!==r.is_client_facing,requires_approval:r.requires_approval||!1,allows_revision:r.allows_revision||!1,auto_completes:r.auto_completes||!1,tags:r.tags||[],created_by:r.created_by||"admin"}]).select().single();if(a)return console.error("Error creating library applet:",a),i.NextResponse.json({error:"Failed to create library applet"},{status:500});return i.NextResponse.json({applet:t})}catch(e){return console.error("Error in library applet creation:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}async function c(e){try{let{id:r,...t}=await e.json(),{data:a,error:o}=await p.O.from("aloa_applet_library").update({...t,updated_at:new Date().toISOString()}).eq("id",r).select().single();if(o)return console.error("Error updating library applet:",o),i.NextResponse.json({error:"Failed to update library applet"},{status:500});return i.NextResponse.json({applet:a})}catch(e){return console.error("Error in library applet update:",e),i.NextResponse.json({error:"Internal server error"},{status:500})}}let d=new o.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/aloa-applets/library/route",pathname:"/api/aloa-applets/library",filename:"route",bundlePath:"app/api/aloa-applets/library/route"},resolvedPagePath:"/Users/rosspalmer/Ross GitHub Projects/aloa-web-design-project-manager/app/api/aloa-applets/library/route.js",nextConfigOutput:"",userland:a}),{requestAsyncStorage:y,staticGenerationAsyncStorage:g,serverHooks:_}=d,b="/api/aloa-applets/library/route";function m(){return(0,n.patchFetch)({serverHooks:_,staticGenerationAsyncStorage:g})}},76995:(e,r,t)=>{t.d(r,{O:()=>n});var a=t(69498);let o="https://eycgzjqwowrdmjlzqqyg.supabase.co",s="sb_publishable_eG0lH_ACpyOjqG44mN_5PA_1-oFLr5n",n=null;o&&s?n=(0,a.eI)(o,s):console.error("Warning: Supabase environment variables are missing")}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[9276,5972,9498],()=>t(76064));module.exports=a})();