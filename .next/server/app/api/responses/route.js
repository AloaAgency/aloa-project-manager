"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/responses/route";
exports.ids = ["app/api/responses/route"];
exports.modules = {

/***/ "jsdom":
/*!************************!*\
  !*** external "jsdom" ***!
  \************************/
/***/ ((module) => {

module.exports = require("jsdom");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fresponses%2Froute&page=%2Fapi%2Fresponses%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fresponses%2Froute.js&appDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Fcustom-forms%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Fcustom-forms&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fresponses%2Froute&page=%2Fapi%2Fresponses%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fresponses%2Froute.js&appDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Fcustom-forms%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Fcustom-forms&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_rosspalmer_Ross_GitHub_Projects_custom_forms_app_api_responses_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/responses/route.js */ \"(rsc)/./app/api/responses/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/responses/route\",\n        pathname: \"/api/responses\",\n        filename: \"route\",\n        bundlePath: \"app/api/responses/route\"\n    },\n    resolvedPagePath: \"/Users/rosspalmer/Ross GitHub Projects/custom-forms/app/api/responses/route.js\",\n    nextConfigOutput,\n    userland: _Users_rosspalmer_Ross_GitHub_Projects_custom_forms_app_api_responses_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/responses/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZyZXNwb25zZXMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnJlc3BvbnNlcyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnJlc3BvbnNlcyUyRnJvdXRlLmpzJmFwcERpcj0lMkZVc2VycyUyRnJvc3NwYWxtZXIlMkZSb3NzJTIwR2l0SHViJTIwUHJvamVjdHMlMkZjdXN0b20tZm9ybXMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGcm9zc3BhbG1lciUyRlJvc3MlMjBHaXRIdWIlMjBQcm9qZWN0cyUyRmN1c3RvbS1mb3JtcyZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDOEI7QUFDM0c7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jdXN0b20tZm9ybXMvPzBjNjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL3Jvc3NwYWxtZXIvUm9zcyBHaXRIdWIgUHJvamVjdHMvY3VzdG9tLWZvcm1zL2FwcC9hcGkvcmVzcG9uc2VzL3JvdXRlLmpzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9yZXNwb25zZXMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9yZXNwb25zZXNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3Jlc3BvbnNlcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9yb3NzcGFsbWVyL1Jvc3MgR2l0SHViIFByb2plY3RzL2N1c3RvbS1mb3Jtcy9hcHAvYXBpL3Jlc3BvbnNlcy9yb3V0ZS5qc1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvcmVzcG9uc2VzL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fresponses%2Froute&page=%2Fapi%2Fresponses%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fresponses%2Froute.js&appDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Fcustom-forms%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Fcustom-forms&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/responses/route.js":
/*!************************************!*\
  !*** ./app/api/responses/route.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase */ \"(rsc)/./lib/supabase.js\");\n/* harmony import */ var _lib_email__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/email */ \"(rsc)/./lib/email.js\");\n/* harmony import */ var _lib_security__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/security */ \"(rsc)/./lib/security.js\");\n\n\n\n\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const formId = searchParams.get(\"formId\");\n        if (!formId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Form ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Validate UUID format to prevent SQL injection\n        const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\n        if (!uuidRegex.test(formId)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid form ID format\"\n            }, {\n                status: 400\n            });\n        }\n        // Fetch responses with their answers joined with field names\n        const { data: responses, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"form_responses\").select(`\n        *,\n        form_response_answers (\n          id,\n          value,\n          form_fields (\n            field_name,\n            field_label\n          )\n        )\n      `).eq(\"form_id\", formId).order(\"submitted_at\", {\n            ascending: false\n        });\n        if (error) throw error;\n        // Format responses for compatibility - create plain object for data\n        const formattedResponses = responses.map((response)=>{\n            const dataObject = {};\n            response.form_response_answers?.forEach((answer)=>{\n                if (answer.form_fields?.field_name) {\n                    // Parse JSON values for arrays/objects\n                    try {\n                        const parsedValue = JSON.parse(answer.value);\n                        dataObject[answer.form_fields.field_name] = parsedValue;\n                    } catch  {\n                        // If not JSON, use as-is\n                        dataObject[answer.form_fields.field_name] = answer.value;\n                    }\n                }\n            });\n            return {\n                ...response,\n                _id: response.id,\n                formId: response.form_id,\n                submittedAt: response.submitted_at,\n                data: dataObject\n            };\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(formattedResponses);\n    } catch (error) {\n        console.error(\"Error fetching responses:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to fetch responses\"\n        }, {\n            status: 500\n        });\n    }\n}\nasync function POST(request) {\n    try {\n        const body = await request.json();\n        // Validate form ID\n        if (!body.formId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Form ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Validate UUID format to prevent SQL injection\n        const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\n        if (!uuidRegex.test(body.formId)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid form ID format\"\n            }, {\n                status: 400\n            });\n        }\n        // Verify CSRF token for state-changing operations\n        const csrfToken = request.headers.get(\"X-CSRF-Token\");\n        const cookieToken = request.cookies.get(\"csrf-token\")?.value;\n        if (!csrfToken || !cookieToken || csrfToken !== cookieToken) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Invalid CSRF token\"\n            }, {\n                status: 403\n            });\n        }\n        // First, create the response record\n        const responseData = {\n            form_id: body.formId\n        };\n        const { data: response, error: responseError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"form_responses\").insert([\n            responseData\n        ]).select().single();\n        if (responseError) throw responseError;\n        // Get the form fields to map field names to IDs\n        const { data: fields, error: fieldsError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"form_fields\").select(\"id, field_name\").eq(\"form_id\", body.formId);\n        if (fieldsError) throw fieldsError;\n        // Create a map of field names to IDs\n        const fieldMap = new Map();\n        fields.forEach((field)=>{\n            fieldMap.set(field.field_name, field.id);\n        });\n        // Get field details for validation\n        const { data: fieldDetails, error: fieldDetailsError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"form_fields\").select(\"id, field_name, field_type, required, validation\").eq(\"form_id\", body.formId);\n        if (fieldDetailsError) throw fieldDetailsError;\n        // Create field detail map\n        const fieldDetailMap = new Map();\n        fieldDetails.forEach((field)=>{\n            fieldDetailMap.set(field.field_name, field);\n        });\n        // Convert and sanitize the form data\n        const dataToStore = body.data instanceof Map ? body.data : new Map(Object.entries(body.data || {}));\n        console.log(\"Form data received:\", body.data);\n        console.log(\"Field mapping:\", Array.from(fieldMap.entries()));\n        const answers = [];\n        const errors = [];\n        dataToStore.forEach((value, fieldName)=>{\n            const fieldId = fieldMap.get(fieldName);\n            const fieldDetail = fieldDetailMap.get(fieldName);\n            if (fieldId && value !== undefined && value !== null && value !== \"\") {\n                let sanitizedValue;\n                try {\n                    // Sanitize based on field type\n                    switch(fieldDetail?.field_type){\n                        case \"email\":\n                            sanitizedValue = (0,_lib_security__WEBPACK_IMPORTED_MODULE_3__.sanitizeEmail)(value);\n                            break;\n                        case \"url\":\n                            sanitizedValue = (0,_lib_security__WEBPACK_IMPORTED_MODULE_3__.sanitizeURL)(value);\n                            break;\n                        case \"number\":\n                        case \"rating\":\n                            const num = (0,_lib_security__WEBPACK_IMPORTED_MODULE_3__.sanitizeNumber)(value, fieldDetail?.validation?.min || 0, fieldDetail?.validation?.max || Number.MAX_SAFE_INTEGER);\n                            sanitizedValue = String(num);\n                            break;\n                        case \"checkbox\":\n                        case \"multiselect\":\n                            const arrayValue = Array.isArray(value) ? value : [\n                                value\n                            ];\n                            const sanitizedArray = (0,_lib_security__WEBPACK_IMPORTED_MODULE_3__.sanitizeArray)(arrayValue, fieldDetail?.validation?.options);\n                            sanitizedValue = JSON.stringify(sanitizedArray);\n                            break;\n                        case \"text\":\n                        case \"textarea\":\n                        case \"tel\":\n                        case \"select\":\n                        case \"radio\":\n                        case \"date\":\n                        default:\n                            sanitizedValue = (0,_lib_security__WEBPACK_IMPORTED_MODULE_3__.sanitizeText)(String(value));\n                            // Limit text length\n                            const maxLength = fieldDetail?.validation?.maxLength || 10000;\n                            if (sanitizedValue.length > maxLength) {\n                                sanitizedValue = sanitizedValue.substring(0, maxLength);\n                            }\n                            break;\n                    }\n                    answers.push({\n                        response_id: response.id,\n                        field_id: fieldId,\n                        value: sanitizedValue\n                    });\n                    console.log(`Storing sanitized answer for field ${fieldName} (ID: ${fieldId})`);\n                } catch (error) {\n                    errors.push(`Invalid value for field ${fieldName}: ${error.message}`);\n                }\n            } else if (!fieldId) {\n                console.warn(`Field name '${fieldName}' not found in field map`);\n            } else if (fieldDetail?.required && !value) {\n                errors.push(`Required field ${fieldName} is missing`);\n            }\n        });\n        // Check for validation errors\n        if (errors.length > 0) {\n            // Rollback by deleting the response\n            await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"form_responses\").delete().eq(\"id\", response.id);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Validation failed\",\n                details: errors\n            }, {\n                status: 400\n            });\n        }\n        // Insert all answers\n        if (answers.length > 0) {\n            console.log(`Inserting ${answers.length} answers for response ${response.id}`);\n            const { error: answersError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"form_response_answers\").insert(answers);\n            if (answersError) {\n                console.error(\"Error inserting answers:\", answersError);\n                // Rollback by deleting the response\n                await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"form_responses\").delete().eq(\"id\", response.id);\n                throw answersError;\n            }\n            console.log(\"Answers inserted successfully\");\n        } else {\n            console.warn(\"No answers to insert - form data may be empty\");\n        }\n        // Fetch the form details for the email\n        const { data: form, error: formError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"forms\").select(`\n        *,\n        form_fields (\n          id,\n          field_name,\n          field_label,\n          field_type,\n          field_order,\n          validation\n        )\n      `).eq(\"id\", body.formId).single();\n        if (!formError && form) {\n            // Send email notification\n            try {\n                const emailResult = await (0,_lib_email__WEBPACK_IMPORTED_MODULE_2__.sendFormResponseEmail)({\n                    form: {\n                        id: form.id,\n                        title: form.title,\n                        fields: form.form_fields.sort((a, b)=>(a.field_order || 0) - (b.field_order || 0))\n                    },\n                    responses: body.data,\n                    recipientEmail: form.notification_email || \"ross@aloa.agency\"\n                });\n                if (emailResult.success) {\n                    console.log(\"Email notification sent successfully\");\n                } else {\n                    console.error(\"Failed to send email notification:\", emailResult.error);\n                }\n            } catch (emailError) {\n                console.error(\"Error sending email notification:\", emailError);\n            // Don't fail the response submission if email fails\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            ...response,\n            _id: response.id,\n            formId: response.form_id,\n            submittedAt: response.submitted_at\n        });\n    } catch (error) {\n        console.error(\"Error creating response:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to save response\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3Jlc3BvbnNlcy9yb3V0ZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBMkM7QUFDRDtBQUNVO0FBQ3FEO0FBRWxHLGVBQWVRLElBQUlDLE9BQU87SUFDL0IsSUFBSTtRQUNGLE1BQU0sRUFBRUMsWUFBWSxFQUFFLEdBQUcsSUFBSUMsSUFBSUYsUUFBUUcsR0FBRztRQUM1QyxNQUFNQyxTQUFTSCxhQUFhSSxHQUFHLENBQUM7UUFFaEMsSUFBSSxDQUFDRCxRQUFRO1lBQ1gsT0FBT2IscURBQVlBLENBQUNlLElBQUksQ0FDdEI7Z0JBQUVDLE9BQU87WUFBc0IsR0FDL0I7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLGdEQUFnRDtRQUNoRCxNQUFNQyxZQUFZO1FBQ2xCLElBQUksQ0FBQ0EsVUFBVUMsSUFBSSxDQUFDTixTQUFTO1lBQzNCLE9BQU9iLHFEQUFZQSxDQUFDZSxJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQXlCLEdBQ2xDO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSw2REFBNkQ7UUFDN0QsTUFBTSxFQUFFRyxNQUFNQyxTQUFTLEVBQUVMLEtBQUssRUFBRSxHQUFHLE1BQU1mLG1EQUFRQSxDQUM5Q3FCLElBQUksQ0FBQyxrQkFDTEMsTUFBTSxDQUFDLENBQUM7Ozs7Ozs7Ozs7TUFVVCxDQUFDLEVBQ0FDLEVBQUUsQ0FBQyxXQUFXWCxRQUNkWSxLQUFLLENBQUMsZ0JBQWdCO1lBQUVDLFdBQVc7UUFBTTtRQUU1QyxJQUFJVixPQUFPLE1BQU1BO1FBRWpCLG9FQUFvRTtRQUNwRSxNQUFNVyxxQkFBcUJOLFVBQVVPLEdBQUcsQ0FBQ0MsQ0FBQUE7WUFDdkMsTUFBTUMsYUFBYSxDQUFDO1lBQ3BCRCxTQUFTRSxxQkFBcUIsRUFBRUMsUUFBUUMsQ0FBQUE7Z0JBQ3RDLElBQUlBLE9BQU9DLFdBQVcsRUFBRUMsWUFBWTtvQkFDbEMsdUNBQXVDO29CQUN2QyxJQUFJO3dCQUNGLE1BQU1DLGNBQWNDLEtBQUtDLEtBQUssQ0FBQ0wsT0FBT00sS0FBSzt3QkFDM0NULFVBQVUsQ0FBQ0csT0FBT0MsV0FBVyxDQUFDQyxVQUFVLENBQUMsR0FBR0M7b0JBQzlDLEVBQUUsT0FBTTt3QkFDTix5QkFBeUI7d0JBQ3pCTixVQUFVLENBQUNHLE9BQU9DLFdBQVcsQ0FBQ0MsVUFBVSxDQUFDLEdBQUdGLE9BQU9NLEtBQUs7b0JBQzFEO2dCQUNGO1lBQ0Y7WUFFQSxPQUFPO2dCQUNMLEdBQUdWLFFBQVE7Z0JBQ1hXLEtBQUtYLFNBQVNZLEVBQUU7Z0JBQ2hCNUIsUUFBUWdCLFNBQVNhLE9BQU87Z0JBQ3hCQyxhQUFhZCxTQUFTZSxZQUFZO2dCQUNsQ3hCLE1BQU1VO1lBQ1I7UUFDRjtRQUVBLE9BQU85QixxREFBWUEsQ0FBQ2UsSUFBSSxDQUFDWTtJQUMzQixFQUFFLE9BQU9YLE9BQU87UUFDZDZCLFFBQVE3QixLQUFLLENBQUMsNkJBQTZCQTtRQUMzQyxPQUFPaEIscURBQVlBLENBQUNlLElBQUksQ0FDdEI7WUFBRUMsT0FBTztRQUE0QixHQUNyQztZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRjtBQUVPLGVBQWU2QixLQUFLckMsT0FBTztJQUNoQyxJQUFJO1FBQ0YsTUFBTXNDLE9BQU8sTUFBTXRDLFFBQVFNLElBQUk7UUFFL0IsbUJBQW1CO1FBQ25CLElBQUksQ0FBQ2dDLEtBQUtsQyxNQUFNLEVBQUU7WUFDaEIsT0FBT2IscURBQVlBLENBQUNlLElBQUksQ0FDdEI7Z0JBQUVDLE9BQU87WUFBc0IsR0FDL0I7Z0JBQUVDLFFBQVE7WUFBSTtRQUVsQjtRQUVBLGdEQUFnRDtRQUNoRCxNQUFNQyxZQUFZO1FBQ2xCLElBQUksQ0FBQ0EsVUFBVUMsSUFBSSxDQUFDNEIsS0FBS2xDLE1BQU0sR0FBRztZQUNoQyxPQUFPYixxREFBWUEsQ0FBQ2UsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUF5QixHQUNsQztnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsa0RBQWtEO1FBQ2xELE1BQU0rQixZQUFZdkMsUUFBUXdDLE9BQU8sQ0FBQ25DLEdBQUcsQ0FBQztRQUN0QyxNQUFNb0MsY0FBY3pDLFFBQVEwQyxPQUFPLENBQUNyQyxHQUFHLENBQUMsZUFBZXlCO1FBRXZELElBQUksQ0FBQ1MsYUFBYSxDQUFDRSxlQUFlRixjQUFjRSxhQUFhO1lBQzNELE9BQU9sRCxxREFBWUEsQ0FBQ2UsSUFBSSxDQUN0QjtnQkFBRUMsT0FBTztZQUFxQixHQUM5QjtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsb0NBQW9DO1FBQ3BDLE1BQU1tQyxlQUFlO1lBQ25CVixTQUFTSyxLQUFLbEMsTUFBTTtRQUN0QjtRQUVBLE1BQU0sRUFBRU8sTUFBTVMsUUFBUSxFQUFFYixPQUFPcUMsYUFBYSxFQUFFLEdBQUcsTUFBTXBELG1EQUFRQSxDQUM1RHFCLElBQUksQ0FBQyxrQkFDTGdDLE1BQU0sQ0FBQztZQUFDRjtTQUFhLEVBQ3JCN0IsTUFBTSxHQUNOZ0MsTUFBTTtRQUVULElBQUlGLGVBQWUsTUFBTUE7UUFFekIsZ0RBQWdEO1FBQ2hELE1BQU0sRUFBRWpDLE1BQU1vQyxNQUFNLEVBQUV4QyxPQUFPeUMsV0FBVyxFQUFFLEdBQUcsTUFBTXhELG1EQUFRQSxDQUN4RHFCLElBQUksQ0FBQyxlQUNMQyxNQUFNLENBQUMsa0JBQ1BDLEVBQUUsQ0FBQyxXQUFXdUIsS0FBS2xDLE1BQU07UUFFNUIsSUFBSTRDLGFBQWEsTUFBTUE7UUFFdkIscUNBQXFDO1FBQ3JDLE1BQU1DLFdBQVcsSUFBSUM7UUFDckJILE9BQU94QixPQUFPLENBQUM0QixDQUFBQTtZQUNiRixTQUFTRyxHQUFHLENBQUNELE1BQU16QixVQUFVLEVBQUV5QixNQUFNbkIsRUFBRTtRQUN6QztRQUVBLG1DQUFtQztRQUNuQyxNQUFNLEVBQUVyQixNQUFNMEMsWUFBWSxFQUFFOUMsT0FBTytDLGlCQUFpQixFQUFFLEdBQUcsTUFBTTlELG1EQUFRQSxDQUNwRXFCLElBQUksQ0FBQyxlQUNMQyxNQUFNLENBQUMsb0RBQ1BDLEVBQUUsQ0FBQyxXQUFXdUIsS0FBS2xDLE1BQU07UUFFNUIsSUFBSWtELG1CQUFtQixNQUFNQTtRQUU3QiwwQkFBMEI7UUFDMUIsTUFBTUMsaUJBQWlCLElBQUlMO1FBQzNCRyxhQUFhOUIsT0FBTyxDQUFDNEIsQ0FBQUE7WUFDbkJJLGVBQWVILEdBQUcsQ0FBQ0QsTUFBTXpCLFVBQVUsRUFBRXlCO1FBQ3ZDO1FBRUEscUNBQXFDO1FBQ3JDLE1BQU1LLGNBQWNsQixLQUFLM0IsSUFBSSxZQUFZdUMsTUFDckNaLEtBQUszQixJQUFJLEdBQ1QsSUFBSXVDLElBQUlPLE9BQU9DLE9BQU8sQ0FBQ3BCLEtBQUszQixJQUFJLElBQUksQ0FBQztRQUV6Q3lCLFFBQVF1QixHQUFHLENBQUMsdUJBQXVCckIsS0FBSzNCLElBQUk7UUFDNUN5QixRQUFRdUIsR0FBRyxDQUFDLGtCQUFrQkMsTUFBTS9DLElBQUksQ0FBQ29DLFNBQVNTLE9BQU87UUFFekQsTUFBTUcsVUFBVSxFQUFFO1FBQ2xCLE1BQU1DLFNBQVMsRUFBRTtRQUVqQk4sWUFBWWpDLE9BQU8sQ0FBQyxDQUFDTyxPQUFPaUM7WUFDMUIsTUFBTUMsVUFBVWYsU0FBUzVDLEdBQUcsQ0FBQzBEO1lBQzdCLE1BQU1FLGNBQWNWLGVBQWVsRCxHQUFHLENBQUMwRDtZQUV2QyxJQUFJQyxXQUFXbEMsVUFBVW9DLGFBQWFwQyxVQUFVLFFBQVFBLFVBQVUsSUFBSTtnQkFDcEUsSUFBSXFDO2dCQUVKLElBQUk7b0JBQ0YsK0JBQStCO29CQUMvQixPQUFRRixhQUFhRzt3QkFDbkIsS0FBSzs0QkFDSEQsaUJBQWlCeEUsNERBQWFBLENBQUNtQzs0QkFDL0I7d0JBQ0YsS0FBSzs0QkFDSHFDLGlCQUFpQnZFLDBEQUFXQSxDQUFDa0M7NEJBQzdCO3dCQUNGLEtBQUs7d0JBQ0wsS0FBSzs0QkFDSCxNQUFNdUMsTUFBTXhFLDZEQUFjQSxDQUFDaUMsT0FDekJtQyxhQUFhSyxZQUFZQyxPQUFPLEdBQ2hDTixhQUFhSyxZQUFZRSxPQUFPQyxPQUFPQyxnQkFBZ0I7NEJBRXpEUCxpQkFBaUJRLE9BQU9OOzRCQUN4Qjt3QkFDRixLQUFLO3dCQUNMLEtBQUs7NEJBQ0gsTUFBTU8sYUFBYWhCLE1BQU1pQixPQUFPLENBQUMvQyxTQUFTQSxRQUFRO2dDQUFDQTs2QkFBTTs0QkFDekQsTUFBTWdELGlCQUFpQmhGLDREQUFhQSxDQUFDOEUsWUFBWVgsYUFBYUssWUFBWVM7NEJBQzFFWixpQkFBaUJ2QyxLQUFLb0QsU0FBUyxDQUFDRjs0QkFDaEM7d0JBQ0YsS0FBSzt3QkFDTCxLQUFLO3dCQUNMLEtBQUs7d0JBQ0wsS0FBSzt3QkFDTCxLQUFLO3dCQUNMLEtBQUs7d0JBQ0w7NEJBQ0VYLGlCQUFpQnpFLDJEQUFZQSxDQUFDaUYsT0FBTzdDOzRCQUNyQyxvQkFBb0I7NEJBQ3BCLE1BQU1tRCxZQUFZaEIsYUFBYUssWUFBWVcsYUFBYTs0QkFDeEQsSUFBSWQsZUFBZWUsTUFBTSxHQUFHRCxXQUFXO2dDQUNyQ2QsaUJBQWlCQSxlQUFlZ0IsU0FBUyxDQUFDLEdBQUdGOzRCQUMvQzs0QkFDQTtvQkFDSjtvQkFFQXBCLFFBQVF1QixJQUFJLENBQUM7d0JBQ1hDLGFBQWFqRSxTQUFTWSxFQUFFO3dCQUN4QnNELFVBQVV0Qjt3QkFDVmxDLE9BQU9xQztvQkFDVDtvQkFDQS9CLFFBQVF1QixHQUFHLENBQUMsQ0FBQyxtQ0FBbUMsRUFBRUksVUFBVSxNQUFNLEVBQUVDLFFBQVEsQ0FBQyxDQUFDO2dCQUNoRixFQUFFLE9BQU96RCxPQUFPO29CQUNkdUQsT0FBT3NCLElBQUksQ0FBQyxDQUFDLHdCQUF3QixFQUFFckIsVUFBVSxFQUFFLEVBQUV4RCxNQUFNZ0YsT0FBTyxDQUFDLENBQUM7Z0JBQ3RFO1lBQ0YsT0FBTyxJQUFJLENBQUN2QixTQUFTO2dCQUNuQjVCLFFBQVFvRCxJQUFJLENBQUMsQ0FBQyxZQUFZLEVBQUV6QixVQUFVLHdCQUF3QixDQUFDO1lBQ2pFLE9BQU8sSUFBSUUsYUFBYXdCLFlBQVksQ0FBQzNELE9BQU87Z0JBQzFDZ0MsT0FBT3NCLElBQUksQ0FBQyxDQUFDLGVBQWUsRUFBRXJCLFVBQVUsV0FBVyxDQUFDO1lBQ3REO1FBQ0Y7UUFFQSw4QkFBOEI7UUFDOUIsSUFBSUQsT0FBT29CLE1BQU0sR0FBRyxHQUFHO1lBQ3JCLG9DQUFvQztZQUNwQyxNQUFNMUYsbURBQVFBLENBQUNxQixJQUFJLENBQUMsa0JBQWtCNkUsTUFBTSxHQUFHM0UsRUFBRSxDQUFDLE1BQU1LLFNBQVNZLEVBQUU7WUFDbkUsT0FBT3pDLHFEQUFZQSxDQUFDZSxJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO2dCQUFxQm9GLFNBQVM3QjtZQUFPLEdBQzlDO2dCQUFFdEQsUUFBUTtZQUFJO1FBRWxCO1FBRUEscUJBQXFCO1FBQ3JCLElBQUlxRCxRQUFRcUIsTUFBTSxHQUFHLEdBQUc7WUFDdEI5QyxRQUFRdUIsR0FBRyxDQUFDLENBQUMsVUFBVSxFQUFFRSxRQUFRcUIsTUFBTSxDQUFDLHNCQUFzQixFQUFFOUQsU0FBU1ksRUFBRSxDQUFDLENBQUM7WUFDN0UsTUFBTSxFQUFFekIsT0FBT3FGLFlBQVksRUFBRSxHQUFHLE1BQU1wRyxtREFBUUEsQ0FDM0NxQixJQUFJLENBQUMseUJBQ0xnQyxNQUFNLENBQUNnQjtZQUVWLElBQUkrQixjQUFjO2dCQUNoQnhELFFBQVE3QixLQUFLLENBQUMsNEJBQTRCcUY7Z0JBQzFDLG9DQUFvQztnQkFDcEMsTUFBTXBHLG1EQUFRQSxDQUFDcUIsSUFBSSxDQUFDLGtCQUFrQjZFLE1BQU0sR0FBRzNFLEVBQUUsQ0FBQyxNQUFNSyxTQUFTWSxFQUFFO2dCQUNuRSxNQUFNNEQ7WUFDUjtZQUNBeEQsUUFBUXVCLEdBQUcsQ0FBQztRQUNkLE9BQU87WUFDTHZCLFFBQVFvRCxJQUFJLENBQUM7UUFDZjtRQUVBLHVDQUF1QztRQUN2QyxNQUFNLEVBQUU3RSxNQUFNa0YsSUFBSSxFQUFFdEYsT0FBT3VGLFNBQVMsRUFBRSxHQUFHLE1BQU10RyxtREFBUUEsQ0FDcERxQixJQUFJLENBQUMsU0FDTEMsTUFBTSxDQUFDLENBQUM7Ozs7Ozs7Ozs7TUFVVCxDQUFDLEVBQ0FDLEVBQUUsQ0FBQyxNQUFNdUIsS0FBS2xDLE1BQU0sRUFDcEIwQyxNQUFNO1FBRVQsSUFBSSxDQUFDZ0QsYUFBYUQsTUFBTTtZQUN0QiwwQkFBMEI7WUFDMUIsSUFBSTtnQkFDRixNQUFNRSxjQUFjLE1BQU10RyxpRUFBcUJBLENBQUM7b0JBQzlDb0csTUFBTTt3QkFDSjdELElBQUk2RCxLQUFLN0QsRUFBRTt3QkFDWGdFLE9BQU9ILEtBQUtHLEtBQUs7d0JBQ2pCakQsUUFBUThDLEtBQUtwRSxXQUFXLENBQUN3RSxJQUFJLENBQUMsQ0FBQ0MsR0FBR0MsSUFBTSxDQUFDRCxFQUFFRSxXQUFXLElBQUksS0FBTUQsQ0FBQUEsRUFBRUMsV0FBVyxJQUFJO29CQUNuRjtvQkFDQXhGLFdBQVcwQixLQUFLM0IsSUFBSTtvQkFDcEIwRixnQkFBZ0JSLEtBQUtTLGtCQUFrQixJQUFJO2dCQUM3QztnQkFFQSxJQUFJUCxZQUFZUSxPQUFPLEVBQUU7b0JBQ3ZCbkUsUUFBUXVCLEdBQUcsQ0FBQztnQkFDZCxPQUFPO29CQUNMdkIsUUFBUTdCLEtBQUssQ0FBQyxzQ0FBc0N3RixZQUFZeEYsS0FBSztnQkFDdkU7WUFDRixFQUFFLE9BQU9pRyxZQUFZO2dCQUNuQnBFLFFBQVE3QixLQUFLLENBQUMscUNBQXFDaUc7WUFDbkQsb0RBQW9EO1lBQ3REO1FBQ0Y7UUFFQSxPQUFPakgscURBQVlBLENBQUNlLElBQUksQ0FBQztZQUN2QixHQUFHYyxRQUFRO1lBQ1hXLEtBQUtYLFNBQVNZLEVBQUU7WUFDaEI1QixRQUFRZ0IsU0FBU2EsT0FBTztZQUN4QkMsYUFBYWQsU0FBU2UsWUFBWTtRQUNwQztJQUNGLEVBQUUsT0FBTzVCLE9BQU87UUFDZDZCLFFBQVE3QixLQUFLLENBQUMsNEJBQTRCQTtRQUMxQyxPQUFPaEIscURBQVlBLENBQUNlLElBQUksQ0FDdEI7WUFBRUMsT0FBTztRQUEwQixHQUNuQztZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2N1c3RvbS1mb3Jtcy8uL2FwcC9hcGkvcmVzcG9uc2VzL3JvdXRlLmpzPzFiMmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgc3VwYWJhc2UgfSBmcm9tICdAL2xpYi9zdXBhYmFzZSc7XG5pbXBvcnQgeyBzZW5kRm9ybVJlc3BvbnNlRW1haWwgfSBmcm9tICdAL2xpYi9lbWFpbCc7XG5pbXBvcnQgeyBzYW5pdGl6ZVRleHQsIHNhbml0aXplRW1haWwsIHNhbml0aXplVVJMLCBzYW5pdGl6ZU51bWJlciwgc2FuaXRpemVBcnJheSB9IGZyb20gJ0AvbGliL3NlY3VyaXR5JztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBzZWFyY2hQYXJhbXMgfSA9IG5ldyBVUkwocmVxdWVzdC51cmwpO1xuICAgIGNvbnN0IGZvcm1JZCA9IHNlYXJjaFBhcmFtcy5nZXQoJ2Zvcm1JZCcpO1xuICAgIFxuICAgIGlmICghZm9ybUlkKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgZXJyb3I6ICdGb3JtIElEIGlzIHJlcXVpcmVkJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuICAgIFxuICAgIC8vIFZhbGlkYXRlIFVVSUQgZm9ybWF0IHRvIHByZXZlbnQgU1FMIGluamVjdGlvblxuICAgIGNvbnN0IHV1aWRSZWdleCA9IC9eWzAtOWEtZl17OH0tWzAtOWEtZl17NH0tWzAtOWEtZl17NH0tWzAtOWEtZl17NH0tWzAtOWEtZl17MTJ9JC9pO1xuICAgIGlmICghdXVpZFJlZ2V4LnRlc3QoZm9ybUlkKSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnSW52YWxpZCBmb3JtIElEIGZvcm1hdCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICAvLyBGZXRjaCByZXNwb25zZXMgd2l0aCB0aGVpciBhbnN3ZXJzIGpvaW5lZCB3aXRoIGZpZWxkIG5hbWVzXG4gICAgY29uc3QgeyBkYXRhOiByZXNwb25zZXMsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2Zvcm1fcmVzcG9uc2VzJylcbiAgICAgIC5zZWxlY3QoYFxuICAgICAgICAqLFxuICAgICAgICBmb3JtX3Jlc3BvbnNlX2Fuc3dlcnMgKFxuICAgICAgICAgIGlkLFxuICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgIGZvcm1fZmllbGRzIChcbiAgICAgICAgICAgIGZpZWxkX25hbWUsXG4gICAgICAgICAgICBmaWVsZF9sYWJlbFxuICAgICAgICAgIClcbiAgICAgICAgKVxuICAgICAgYClcbiAgICAgIC5lcSgnZm9ybV9pZCcsIGZvcm1JZClcbiAgICAgIC5vcmRlcignc3VibWl0dGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xuICAgIFxuICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG4gICAgXG4gICAgLy8gRm9ybWF0IHJlc3BvbnNlcyBmb3IgY29tcGF0aWJpbGl0eSAtIGNyZWF0ZSBwbGFpbiBvYmplY3QgZm9yIGRhdGFcbiAgICBjb25zdCBmb3JtYXR0ZWRSZXNwb25zZXMgPSByZXNwb25zZXMubWFwKHJlc3BvbnNlID0+IHtcbiAgICAgIGNvbnN0IGRhdGFPYmplY3QgPSB7fTtcbiAgICAgIHJlc3BvbnNlLmZvcm1fcmVzcG9uc2VfYW5zd2Vycz8uZm9yRWFjaChhbnN3ZXIgPT4ge1xuICAgICAgICBpZiAoYW5zd2VyLmZvcm1fZmllbGRzPy5maWVsZF9uYW1lKSB7XG4gICAgICAgICAgLy8gUGFyc2UgSlNPTiB2YWx1ZXMgZm9yIGFycmF5cy9vYmplY3RzXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZFZhbHVlID0gSlNPTi5wYXJzZShhbnN3ZXIudmFsdWUpO1xuICAgICAgICAgICAgZGF0YU9iamVjdFthbnN3ZXIuZm9ybV9maWVsZHMuZmllbGRfbmFtZV0gPSBwYXJzZWRWYWx1ZTtcbiAgICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAgIC8vIElmIG5vdCBKU09OLCB1c2UgYXMtaXNcbiAgICAgICAgICAgIGRhdGFPYmplY3RbYW5zd2VyLmZvcm1fZmllbGRzLmZpZWxkX25hbWVdID0gYW5zd2VyLnZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLnJlc3BvbnNlLFxuICAgICAgICBfaWQ6IHJlc3BvbnNlLmlkLFxuICAgICAgICBmb3JtSWQ6IHJlc3BvbnNlLmZvcm1faWQsXG4gICAgICAgIHN1Ym1pdHRlZEF0OiByZXNwb25zZS5zdWJtaXR0ZWRfYXQsXG4gICAgICAgIGRhdGE6IGRhdGFPYmplY3RcbiAgICAgIH07XG4gICAgfSk7XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKGZvcm1hdHRlZFJlc3BvbnNlcyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgcmVzcG9uc2VzOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIGZldGNoIHJlc3BvbnNlcycgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IGJvZHkgPSBhd2FpdCByZXF1ZXN0Lmpzb24oKTtcbiAgICBcbiAgICAvLyBWYWxpZGF0ZSBmb3JtIElEXG4gICAgaWYgKCFib2R5LmZvcm1JZCkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnRm9ybSBJRCBpcyByZXF1aXJlZCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICAvLyBWYWxpZGF0ZSBVVUlEIGZvcm1hdCB0byBwcmV2ZW50IFNRTCBpbmplY3Rpb25cbiAgICBjb25zdCB1dWlkUmVnZXggPSAvXlswLTlhLWZdezh9LVswLTlhLWZdezR9LVswLTlhLWZdezR9LVswLTlhLWZdezR9LVswLTlhLWZdezEyfSQvaTtcbiAgICBpZiAoIXV1aWRSZWdleC50ZXN0KGJvZHkuZm9ybUlkKSkge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnSW52YWxpZCBmb3JtIElEIGZvcm1hdCcgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICAvLyBWZXJpZnkgQ1NSRiB0b2tlbiBmb3Igc3RhdGUtY2hhbmdpbmcgb3BlcmF0aW9uc1xuICAgIGNvbnN0IGNzcmZUb2tlbiA9IHJlcXVlc3QuaGVhZGVycy5nZXQoJ1gtQ1NSRi1Ub2tlbicpO1xuICAgIGNvbnN0IGNvb2tpZVRva2VuID0gcmVxdWVzdC5jb29raWVzLmdldCgnY3NyZi10b2tlbicpPy52YWx1ZTtcbiAgICBcbiAgICBpZiAoIWNzcmZUb2tlbiB8fCAhY29va2llVG9rZW4gfHwgY3NyZlRva2VuICE9PSBjb29raWVUb2tlbikge1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnSW52YWxpZCBDU1JGIHRva2VuJyB9LFxuICAgICAgICB7IHN0YXR1czogNDAzIH1cbiAgICAgICk7XG4gICAgfVxuICAgIFxuICAgIC8vIEZpcnN0LCBjcmVhdGUgdGhlIHJlc3BvbnNlIHJlY29yZFxuICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IHtcbiAgICAgIGZvcm1faWQ6IGJvZHkuZm9ybUlkXG4gICAgfTtcbiAgICBcbiAgICBjb25zdCB7IGRhdGE6IHJlc3BvbnNlLCBlcnJvcjogcmVzcG9uc2VFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdmb3JtX3Jlc3BvbnNlcycpXG4gICAgICAuaW5zZXJ0KFtyZXNwb25zZURhdGFdKVxuICAgICAgLnNlbGVjdCgpXG4gICAgICAuc2luZ2xlKCk7XG4gICAgXG4gICAgaWYgKHJlc3BvbnNlRXJyb3IpIHRocm93IHJlc3BvbnNlRXJyb3I7XG4gICAgXG4gICAgLy8gR2V0IHRoZSBmb3JtIGZpZWxkcyB0byBtYXAgZmllbGQgbmFtZXMgdG8gSURzXG4gICAgY29uc3QgeyBkYXRhOiBmaWVsZHMsIGVycm9yOiBmaWVsZHNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdmb3JtX2ZpZWxkcycpXG4gICAgICAuc2VsZWN0KCdpZCwgZmllbGRfbmFtZScpXG4gICAgICAuZXEoJ2Zvcm1faWQnLCBib2R5LmZvcm1JZCk7XG4gICAgXG4gICAgaWYgKGZpZWxkc0Vycm9yKSB0aHJvdyBmaWVsZHNFcnJvcjtcbiAgICBcbiAgICAvLyBDcmVhdGUgYSBtYXAgb2YgZmllbGQgbmFtZXMgdG8gSURzXG4gICAgY29uc3QgZmllbGRNYXAgPSBuZXcgTWFwKCk7XG4gICAgZmllbGRzLmZvckVhY2goZmllbGQgPT4ge1xuICAgICAgZmllbGRNYXAuc2V0KGZpZWxkLmZpZWxkX25hbWUsIGZpZWxkLmlkKTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBHZXQgZmllbGQgZGV0YWlscyBmb3IgdmFsaWRhdGlvblxuICAgIGNvbnN0IHsgZGF0YTogZmllbGREZXRhaWxzLCBlcnJvcjogZmllbGREZXRhaWxzRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgnZm9ybV9maWVsZHMnKVxuICAgICAgLnNlbGVjdCgnaWQsIGZpZWxkX25hbWUsIGZpZWxkX3R5cGUsIHJlcXVpcmVkLCB2YWxpZGF0aW9uJylcbiAgICAgIC5lcSgnZm9ybV9pZCcsIGJvZHkuZm9ybUlkKTtcbiAgICBcbiAgICBpZiAoZmllbGREZXRhaWxzRXJyb3IpIHRocm93IGZpZWxkRGV0YWlsc0Vycm9yO1xuICAgIFxuICAgIC8vIENyZWF0ZSBmaWVsZCBkZXRhaWwgbWFwXG4gICAgY29uc3QgZmllbGREZXRhaWxNYXAgPSBuZXcgTWFwKCk7XG4gICAgZmllbGREZXRhaWxzLmZvckVhY2goZmllbGQgPT4ge1xuICAgICAgZmllbGREZXRhaWxNYXAuc2V0KGZpZWxkLmZpZWxkX25hbWUsIGZpZWxkKTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBDb252ZXJ0IGFuZCBzYW5pdGl6ZSB0aGUgZm9ybSBkYXRhXG4gICAgY29uc3QgZGF0YVRvU3RvcmUgPSBib2R5LmRhdGEgaW5zdGFuY2VvZiBNYXAgXG4gICAgICA/IGJvZHkuZGF0YVxuICAgICAgOiBuZXcgTWFwKE9iamVjdC5lbnRyaWVzKGJvZHkuZGF0YSB8fCB7fSkpO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKCdGb3JtIGRhdGEgcmVjZWl2ZWQ6JywgYm9keS5kYXRhKTtcbiAgICBjb25zb2xlLmxvZygnRmllbGQgbWFwcGluZzonLCBBcnJheS5mcm9tKGZpZWxkTWFwLmVudHJpZXMoKSkpO1xuICAgIFxuICAgIGNvbnN0IGFuc3dlcnMgPSBbXTtcbiAgICBjb25zdCBlcnJvcnMgPSBbXTtcbiAgICBcbiAgICBkYXRhVG9TdG9yZS5mb3JFYWNoKCh2YWx1ZSwgZmllbGROYW1lKSA9PiB7XG4gICAgICBjb25zdCBmaWVsZElkID0gZmllbGRNYXAuZ2V0KGZpZWxkTmFtZSk7XG4gICAgICBjb25zdCBmaWVsZERldGFpbCA9IGZpZWxkRGV0YWlsTWFwLmdldChmaWVsZE5hbWUpO1xuICAgICAgXG4gICAgICBpZiAoZmllbGRJZCAmJiB2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlICE9PSBudWxsICYmIHZhbHVlICE9PSAnJykge1xuICAgICAgICBsZXQgc2FuaXRpemVkVmFsdWU7XG4gICAgICAgIFxuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFNhbml0aXplIGJhc2VkIG9uIGZpZWxkIHR5cGVcbiAgICAgICAgICBzd2l0Y2ggKGZpZWxkRGV0YWlsPy5maWVsZF90eXBlKSB7XG4gICAgICAgICAgICBjYXNlICdlbWFpbCc6XG4gICAgICAgICAgICAgIHNhbml0aXplZFZhbHVlID0gc2FuaXRpemVFbWFpbCh2YWx1ZSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndXJsJzpcbiAgICAgICAgICAgICAgc2FuaXRpemVkVmFsdWUgPSBzYW5pdGl6ZVVSTCh2YWx1ZSk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgICAgIGNhc2UgJ3JhdGluZyc6XG4gICAgICAgICAgICAgIGNvbnN0IG51bSA9IHNhbml0aXplTnVtYmVyKHZhbHVlLCBcbiAgICAgICAgICAgICAgICBmaWVsZERldGFpbD8udmFsaWRhdGlvbj8ubWluIHx8IDAsXG4gICAgICAgICAgICAgICAgZmllbGREZXRhaWw/LnZhbGlkYXRpb24/Lm1heCB8fCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUlxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICBzYW5pdGl6ZWRWYWx1ZSA9IFN0cmluZyhudW0pO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2NoZWNrYm94JzpcbiAgICAgICAgICAgIGNhc2UgJ211bHRpc2VsZWN0JzpcbiAgICAgICAgICAgICAgY29uc3QgYXJyYXlWYWx1ZSA9IEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbdmFsdWVdO1xuICAgICAgICAgICAgICBjb25zdCBzYW5pdGl6ZWRBcnJheSA9IHNhbml0aXplQXJyYXkoYXJyYXlWYWx1ZSwgZmllbGREZXRhaWw/LnZhbGlkYXRpb24/Lm9wdGlvbnMpO1xuICAgICAgICAgICAgICBzYW5pdGl6ZWRWYWx1ZSA9IEpTT04uc3RyaW5naWZ5KHNhbml0aXplZEFycmF5KTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICd0ZXh0JzpcbiAgICAgICAgICAgIGNhc2UgJ3RleHRhcmVhJzpcbiAgICAgICAgICAgIGNhc2UgJ3RlbCc6XG4gICAgICAgICAgICBjYXNlICdzZWxlY3QnOlxuICAgICAgICAgICAgY2FzZSAncmFkaW8nOlxuICAgICAgICAgICAgY2FzZSAnZGF0ZSc6XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICBzYW5pdGl6ZWRWYWx1ZSA9IHNhbml0aXplVGV4dChTdHJpbmcodmFsdWUpKTtcbiAgICAgICAgICAgICAgLy8gTGltaXQgdGV4dCBsZW5ndGhcbiAgICAgICAgICAgICAgY29uc3QgbWF4TGVuZ3RoID0gZmllbGREZXRhaWw/LnZhbGlkYXRpb24/Lm1heExlbmd0aCB8fCAxMDAwMDtcbiAgICAgICAgICAgICAgaWYgKHNhbml0aXplZFZhbHVlLmxlbmd0aCA+IG1heExlbmd0aCkge1xuICAgICAgICAgICAgICAgIHNhbml0aXplZFZhbHVlID0gc2FuaXRpemVkVmFsdWUuc3Vic3RyaW5nKDAsIG1heExlbmd0aCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGFuc3dlcnMucHVzaCh7XG4gICAgICAgICAgICByZXNwb25zZV9pZDogcmVzcG9uc2UuaWQsXG4gICAgICAgICAgICBmaWVsZF9pZDogZmllbGRJZCxcbiAgICAgICAgICAgIHZhbHVlOiBzYW5pdGl6ZWRWYWx1ZVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBTdG9yaW5nIHNhbml0aXplZCBhbnN3ZXIgZm9yIGZpZWxkICR7ZmllbGROYW1lfSAoSUQ6ICR7ZmllbGRJZH0pYCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgZXJyb3JzLnB1c2goYEludmFsaWQgdmFsdWUgZm9yIGZpZWxkICR7ZmllbGROYW1lfTogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCFmaWVsZElkKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgRmllbGQgbmFtZSAnJHtmaWVsZE5hbWV9JyBub3QgZm91bmQgaW4gZmllbGQgbWFwYCk7XG4gICAgICB9IGVsc2UgaWYgKGZpZWxkRGV0YWlsPy5yZXF1aXJlZCAmJiAhdmFsdWUpIHtcbiAgICAgICAgZXJyb3JzLnB1c2goYFJlcXVpcmVkIGZpZWxkICR7ZmllbGROYW1lfSBpcyBtaXNzaW5nYCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gQ2hlY2sgZm9yIHZhbGlkYXRpb24gZXJyb3JzXG4gICAgaWYgKGVycm9ycy5sZW5ndGggPiAwKSB7XG4gICAgICAvLyBSb2xsYmFjayBieSBkZWxldGluZyB0aGUgcmVzcG9uc2VcbiAgICAgIGF3YWl0IHN1cGFiYXNlLmZyb20oJ2Zvcm1fcmVzcG9uc2VzJykuZGVsZXRlKCkuZXEoJ2lkJywgcmVzcG9uc2UuaWQpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgICB7IGVycm9yOiAnVmFsaWRhdGlvbiBmYWlsZWQnLCBkZXRhaWxzOiBlcnJvcnMgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICAvLyBJbnNlcnQgYWxsIGFuc3dlcnNcbiAgICBpZiAoYW5zd2Vycy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zb2xlLmxvZyhgSW5zZXJ0aW5nICR7YW5zd2Vycy5sZW5ndGh9IGFuc3dlcnMgZm9yIHJlc3BvbnNlICR7cmVzcG9uc2UuaWR9YCk7XG4gICAgICBjb25zdCB7IGVycm9yOiBhbnN3ZXJzRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdmb3JtX3Jlc3BvbnNlX2Fuc3dlcnMnKVxuICAgICAgICAuaW5zZXJ0KGFuc3dlcnMpO1xuICAgICAgXG4gICAgICBpZiAoYW5zd2Vyc0Vycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluc2VydGluZyBhbnN3ZXJzOicsIGFuc3dlcnNFcnJvcik7XG4gICAgICAgIC8vIFJvbGxiYWNrIGJ5IGRlbGV0aW5nIHRoZSByZXNwb25zZVxuICAgICAgICBhd2FpdCBzdXBhYmFzZS5mcm9tKCdmb3JtX3Jlc3BvbnNlcycpLmRlbGV0ZSgpLmVxKCdpZCcsIHJlc3BvbnNlLmlkKTtcbiAgICAgICAgdGhyb3cgYW5zd2Vyc0Vycm9yO1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coJ0Fuc3dlcnMgaW5zZXJ0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUud2FybignTm8gYW5zd2VycyB0byBpbnNlcnQgLSBmb3JtIGRhdGEgbWF5IGJlIGVtcHR5Jyk7XG4gICAgfVxuICAgIFxuICAgIC8vIEZldGNoIHRoZSBmb3JtIGRldGFpbHMgZm9yIHRoZSBlbWFpbFxuICAgIGNvbnN0IHsgZGF0YTogZm9ybSwgZXJyb3I6IGZvcm1FcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdmb3JtcycpXG4gICAgICAuc2VsZWN0KGBcbiAgICAgICAgKixcbiAgICAgICAgZm9ybV9maWVsZHMgKFxuICAgICAgICAgIGlkLFxuICAgICAgICAgIGZpZWxkX25hbWUsXG4gICAgICAgICAgZmllbGRfbGFiZWwsXG4gICAgICAgICAgZmllbGRfdHlwZSxcbiAgICAgICAgICBmaWVsZF9vcmRlcixcbiAgICAgICAgICB2YWxpZGF0aW9uXG4gICAgICAgIClcbiAgICAgIGApXG4gICAgICAuZXEoJ2lkJywgYm9keS5mb3JtSWQpXG4gICAgICAuc2luZ2xlKCk7XG4gICAgXG4gICAgaWYgKCFmb3JtRXJyb3IgJiYgZm9ybSkge1xuICAgICAgLy8gU2VuZCBlbWFpbCBub3RpZmljYXRpb25cbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGVtYWlsUmVzdWx0ID0gYXdhaXQgc2VuZEZvcm1SZXNwb25zZUVtYWlsKHtcbiAgICAgICAgICBmb3JtOiB7XG4gICAgICAgICAgICBpZDogZm9ybS5pZCxcbiAgICAgICAgICAgIHRpdGxlOiBmb3JtLnRpdGxlLFxuICAgICAgICAgICAgZmllbGRzOiBmb3JtLmZvcm1fZmllbGRzLnNvcnQoKGEsIGIpID0+IChhLmZpZWxkX29yZGVyIHx8IDApIC0gKGIuZmllbGRfb3JkZXIgfHwgMCkpXG4gICAgICAgICAgfSxcbiAgICAgICAgICByZXNwb25zZXM6IGJvZHkuZGF0YSxcbiAgICAgICAgICByZWNpcGllbnRFbWFpbDogZm9ybS5ub3RpZmljYXRpb25fZW1haWwgfHwgJ3Jvc3NAYWxvYS5hZ2VuY3knXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKGVtYWlsUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnRW1haWwgbm90aWZpY2F0aW9uIHNlbnQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHNlbmQgZW1haWwgbm90aWZpY2F0aW9uOicsIGVtYWlsUmVzdWx0LmVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZW1haWxFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZW5kaW5nIGVtYWlsIG5vdGlmaWNhdGlvbjonLCBlbWFpbEVycm9yKTtcbiAgICAgICAgLy8gRG9uJ3QgZmFpbCB0aGUgcmVzcG9uc2Ugc3VibWlzc2lvbiBpZiBlbWFpbCBmYWlsc1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgLi4ucmVzcG9uc2UsXG4gICAgICBfaWQ6IHJlc3BvbnNlLmlkLFxuICAgICAgZm9ybUlkOiByZXNwb25zZS5mb3JtX2lkLFxuICAgICAgc3VibWl0dGVkQXQ6IHJlc3BvbnNlLnN1Ym1pdHRlZF9hdFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHJlc3BvbnNlOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IGVycm9yOiAnRmFpbGVkIHRvIHNhdmUgcmVzcG9uc2UnIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59Il0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsInN1cGFiYXNlIiwic2VuZEZvcm1SZXNwb25zZUVtYWlsIiwic2FuaXRpemVUZXh0Iiwic2FuaXRpemVFbWFpbCIsInNhbml0aXplVVJMIiwic2FuaXRpemVOdW1iZXIiLCJzYW5pdGl6ZUFycmF5IiwiR0VUIiwicmVxdWVzdCIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsImZvcm1JZCIsImdldCIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsInV1aWRSZWdleCIsInRlc3QiLCJkYXRhIiwicmVzcG9uc2VzIiwiZnJvbSIsInNlbGVjdCIsImVxIiwib3JkZXIiLCJhc2NlbmRpbmciLCJmb3JtYXR0ZWRSZXNwb25zZXMiLCJtYXAiLCJyZXNwb25zZSIsImRhdGFPYmplY3QiLCJmb3JtX3Jlc3BvbnNlX2Fuc3dlcnMiLCJmb3JFYWNoIiwiYW5zd2VyIiwiZm9ybV9maWVsZHMiLCJmaWVsZF9uYW1lIiwicGFyc2VkVmFsdWUiLCJKU09OIiwicGFyc2UiLCJ2YWx1ZSIsIl9pZCIsImlkIiwiZm9ybV9pZCIsInN1Ym1pdHRlZEF0Iiwic3VibWl0dGVkX2F0IiwiY29uc29sZSIsIlBPU1QiLCJib2R5IiwiY3NyZlRva2VuIiwiaGVhZGVycyIsImNvb2tpZVRva2VuIiwiY29va2llcyIsInJlc3BvbnNlRGF0YSIsInJlc3BvbnNlRXJyb3IiLCJpbnNlcnQiLCJzaW5nbGUiLCJmaWVsZHMiLCJmaWVsZHNFcnJvciIsImZpZWxkTWFwIiwiTWFwIiwiZmllbGQiLCJzZXQiLCJmaWVsZERldGFpbHMiLCJmaWVsZERldGFpbHNFcnJvciIsImZpZWxkRGV0YWlsTWFwIiwiZGF0YVRvU3RvcmUiLCJPYmplY3QiLCJlbnRyaWVzIiwibG9nIiwiQXJyYXkiLCJhbnN3ZXJzIiwiZXJyb3JzIiwiZmllbGROYW1lIiwiZmllbGRJZCIsImZpZWxkRGV0YWlsIiwidW5kZWZpbmVkIiwic2FuaXRpemVkVmFsdWUiLCJmaWVsZF90eXBlIiwibnVtIiwidmFsaWRhdGlvbiIsIm1pbiIsIm1heCIsIk51bWJlciIsIk1BWF9TQUZFX0lOVEVHRVIiLCJTdHJpbmciLCJhcnJheVZhbHVlIiwiaXNBcnJheSIsInNhbml0aXplZEFycmF5Iiwib3B0aW9ucyIsInN0cmluZ2lmeSIsIm1heExlbmd0aCIsImxlbmd0aCIsInN1YnN0cmluZyIsInB1c2giLCJyZXNwb25zZV9pZCIsImZpZWxkX2lkIiwibWVzc2FnZSIsIndhcm4iLCJyZXF1aXJlZCIsImRlbGV0ZSIsImRldGFpbHMiLCJhbnN3ZXJzRXJyb3IiLCJmb3JtIiwiZm9ybUVycm9yIiwiZW1haWxSZXN1bHQiLCJ0aXRsZSIsInNvcnQiLCJhIiwiYiIsImZpZWxkX29yZGVyIiwicmVjaXBpZW50RW1haWwiLCJub3RpZmljYXRpb25fZW1haWwiLCJzdWNjZXNzIiwiZW1haWxFcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/responses/route.js\n");

/***/ }),

/***/ "(rsc)/./lib/email.js":
/*!**********************!*\
  !*** ./lib/email.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   sendFormResponseEmail: () => (/* binding */ sendFormResponseEmail)\n/* harmony export */ });\n/* harmony import */ var resend__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! resend */ \"(rsc)/./node_modules/resend/dist/index.mjs\");\n/* harmony import */ var _security__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./security */ \"(rsc)/./lib/security.js\");\n\n\nconst resend = process.env.RESEND_API_KEY ? new resend__WEBPACK_IMPORTED_MODULE_0__.Resend(process.env.RESEND_API_KEY) : null;\nasync function sendFormResponseEmail({ form, responses, recipientEmail }) {\n    try {\n        // Skip email sending if no API key is configured\n        if (!resend) {\n            console.log(\"Email notifications disabled: RESEND_API_KEY not configured\");\n            return {\n                success: true,\n                skipped: true,\n                message: \"Email notifications not configured\"\n            };\n        }\n        // Sanitize recipient email to prevent header injection\n        let sanitizedRecipient;\n        try {\n            sanitizedRecipient = recipientEmail ? (0,_security__WEBPACK_IMPORTED_MODULE_1__.sanitizeEmail)(recipientEmail) : \"ross@aloa.agency\";\n        } catch (error) {\n            console.error(\"Invalid recipient email:\", error);\n            sanitizedRecipient = \"ross@aloa.agency\"; // Fallback to default\n        }\n        // Sanitize form title to prevent injection in subject\n        const sanitizedTitle = (0,_security__WEBPACK_IMPORTED_MODULE_1__.sanitizeText)(form.title || \"Untitled Form\").replace(/[\\n\\r]/g, \"\").substring(0, 100);\n        // Format the responses into a clean HTML email\n        const htmlContent = generateEmailHTML(form, responses);\n        const data = await resend.emails.send({\n            from: \"Aloa Forms <onboarding@resend.dev>\",\n            to: sanitizedRecipient,\n            subject: `New Response: ${sanitizedTitle}`,\n            html: htmlContent\n        });\n        return {\n            success: true,\n            data\n        };\n    } catch (error) {\n        console.error(\"Error sending email:\", error);\n        return {\n            success: false,\n            error\n        };\n    }\n}\nfunction generateEmailHTML(form, responses) {\n    const timestamp = new Date().toLocaleString(\"en-US\", {\n        weekday: \"long\",\n        year: \"numeric\",\n        month: \"long\",\n        day: \"numeric\",\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n        timeZoneName: \"short\"\n    });\n    return `\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <meta charset=\"utf-8\">\n      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n      <title>Form Response</title>\n      <style>\n        body {\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n          line-height: 1.6;\n          color: #333;\n          max-width: 600px;\n          margin: 0 auto;\n          padding: 20px;\n          background-color: #f5f5f5;\n        }\n        .email-container {\n          background: white;\n          border-radius: 12px;\n          box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n          overflow: hidden;\n        }\n        .header {\n          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n          color: white;\n          padding: 30px;\n          text-align: center;\n        }\n        .header h1 {\n          margin: 0;\n          font-size: 24px;\n          font-weight: 600;\n        }\n        .header p {\n          margin: 10px 0 0 0;\n          opacity: 0.9;\n          font-size: 14px;\n        }\n        .content {\n          padding: 30px;\n        }\n        .response-section {\n          margin-bottom: 25px;\n          padding-bottom: 25px;\n          border-bottom: 1px solid #e5e5e5;\n        }\n        .response-section:last-child {\n          border-bottom: none;\n          padding-bottom: 0;\n        }\n        .section-title {\n          color: #667eea;\n          font-size: 12px;\n          font-weight: 600;\n          text-transform: uppercase;\n          letter-spacing: 1px;\n          margin-bottom: 15px;\n        }\n        .field {\n          margin-bottom: 20px;\n        }\n        .field-label {\n          font-weight: 600;\n          color: #555;\n          margin-bottom: 5px;\n          font-size: 14px;\n        }\n        .field-value {\n          color: #333;\n          font-size: 15px;\n          padding: 10px;\n          background: #f8f9fa;\n          border-radius: 6px;\n          border-left: 3px solid #667eea;\n        }\n        .field-value.empty {\n          color: #999;\n          font-style: italic;\n          border-left-color: #ddd;\n        }\n        .footer {\n          background: #f8f9fa;\n          padding: 20px 30px;\n          text-align: center;\n          font-size: 12px;\n          color: #666;\n        }\n        .footer a {\n          color: #667eea;\n          text-decoration: none;\n        }\n        .timestamp {\n          background: #f0f0f0;\n          padding: 10px 30px;\n          font-size: 13px;\n          color: #666;\n          border-top: 1px solid #e5e5e5;\n        }\n        .logo {\n          width: 120px;\n          height: auto;\n          margin-bottom: 15px;\n        }\n      </style>\n    </head>\n    <body>\n      <div class=\"email-container\">\n        <div class=\"header\">\n          <img src=\"https://images.ctfassets.net/qkznfzcikv51/xWpsUAypBrRgAjmbyLGYy/b969f4353174e4f209996ebf60af8f7c/aloa_-_white.svg\" alt=\"Aloa\" class=\"logo\">\n          <h1>New Form Response</h1>\n          <p>${(0,_security__WEBPACK_IMPORTED_MODULE_1__.sanitizeHTML)(form.title || \"Untitled Form\")}</p>\n        </div>\n        \n        <div class=\"timestamp\">\n          <strong>Submitted:</strong> ${timestamp}\n        </div>\n        \n        <div class=\"content\">\n          ${generateResponseFields(form.fields, responses)}\n        </div>\n        \n        <div class=\"footer\">\n          <p>\n            This response was submitted via your custom form.<br>\n            <a href=\"${process.env.NEXT_PUBLIC_BASE_URL || \"https://custom-forms-xi.vercel.app\"}/responses/${form.id}\">\n              View all responses \n            </a>\n          </p>\n          <p style=\"margin-top: 15px; color: #999;\">\n            Powered by <strong>Aloa Agency</strong>\n          </p>\n        </div>\n      </div>\n    </body>\n    </html>\n  `;\n}\nfunction generateResponseFields(fields, responses) {\n    // Group fields by section\n    const sections = {};\n    fields.forEach((field)=>{\n        const section = field.validation?.section || \"General Information\";\n        if (!sections[section]) {\n            sections[section] = [];\n        }\n        sections[section].push(field);\n    });\n    let html = \"\";\n    Object.entries(sections).forEach(([sectionName, sectionFields])=>{\n        html += `\n      <div class=\"response-section\">\n        <div class=\"section-title\">${(0,_security__WEBPACK_IMPORTED_MODULE_1__.sanitizeHTML)(sectionName)}</div>\n    `;\n        sectionFields.forEach((field)=>{\n            const value = responses[field.field_name] || responses[field.name];\n            const displayValue = formatFieldValue(value, field);\n            const sanitizedLabel = (0,_security__WEBPACK_IMPORTED_MODULE_1__.sanitizeHTML)(field.field_label || field.label || \"Unnamed Field\");\n            html += `\n        <div class=\"field\">\n          <div class=\"field-label\">${sanitizedLabel}</div>\n          <div class=\"field-value ${!displayValue ? \"empty\" : \"\"}\">\n            ${displayValue || \"No response provided\"}\n          </div>\n        </div>\n      `;\n        });\n        html += \"</div>\";\n    });\n    return html;\n}\nfunction formatFieldValue(value, field) {\n    if (!value) return \"\";\n    // Handle arrays (checkboxes, multi-select)\n    if (Array.isArray(value)) {\n        if (value.length === 0) return \"\";\n        return value.map((v)=>` ${(0,_security__WEBPACK_IMPORTED_MODULE_1__.sanitizeHTML)(String(v))}`).join(\"<br>\");\n    }\n    // Handle rating fields\n    if (field.field_type === \"rating\" || field.type === \"rating\") {\n        const rating = parseInt(value, 10);\n        if (isNaN(rating) || rating < 0 || rating > 5) {\n            return \"Invalid rating\";\n        }\n        return `${rating} / 5 `;\n    }\n    // Handle long text with line breaks - sanitize to prevent XSS\n    if (typeof value === \"string\") {\n        const sanitized = (0,_security__WEBPACK_IMPORTED_MODULE_1__.sanitizeHTML)(value);\n        if (value.includes(\"\\n\")) {\n            return sanitized.replace(/\\n/g, \"<br>\");\n        }\n        return sanitized;\n    }\n    return (0,_security__WEBPACK_IMPORTED_MODULE_1__.sanitizeHTML)(String(value));\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    sendFormResponseEmail\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVU7UUFDN0IsTUFBTW9CLFlBQVl6RSx1REFBWUEsQ0FBQ3FEO1FBQy9CLElBQUlBLE1BQU1xQixRQUFRLENBQUMsT0FBTztZQUN4QixPQUFPRCxVQUFVdkQsT0FBTyxDQUFDLE9BQU87UUFDbEM7UUFDQSxPQUFPdUQ7SUFDVDtJQUVBLE9BQU96RSx1REFBWUEsQ0FBQ2tFLE9BQU9iO0FBQzdCO0FBRUEsaUVBQWU7SUFBRWhEO0FBQXNCLENBQUMsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2N1c3RvbS1mb3Jtcy8uL2xpYi9lbWFpbC5qcz8wYzViIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlc2VuZCB9IGZyb20gJ3Jlc2VuZCc7XG5pbXBvcnQgeyBzYW5pdGl6ZUVtYWlsLCBzYW5pdGl6ZVRleHQsIHNhbml0aXplSFRNTCB9IGZyb20gJy4vc2VjdXJpdHknO1xuXG5jb25zdCByZXNlbmQgPSBwcm9jZXNzLmVudi5SRVNFTkRfQVBJX0tFWSA/IG5ldyBSZXNlbmQocHJvY2Vzcy5lbnYuUkVTRU5EX0FQSV9LRVkpIDogbnVsbDtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlbmRGb3JtUmVzcG9uc2VFbWFpbCh7IGZvcm0sIHJlc3BvbnNlcywgcmVjaXBpZW50RW1haWwgfSkge1xuICB0cnkge1xuICAgIC8vIFNraXAgZW1haWwgc2VuZGluZyBpZiBubyBBUEkga2V5IGlzIGNvbmZpZ3VyZWRcbiAgICBpZiAoIXJlc2VuZCkge1xuICAgICAgY29uc29sZS5sb2coJ0VtYWlsIG5vdGlmaWNhdGlvbnMgZGlzYWJsZWQ6IFJFU0VORF9BUElfS0VZIG5vdCBjb25maWd1cmVkJyk7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBza2lwcGVkOiB0cnVlLCBtZXNzYWdlOiAnRW1haWwgbm90aWZpY2F0aW9ucyBub3QgY29uZmlndXJlZCcgfTtcbiAgICB9XG4gICAgXG4gICAgLy8gU2FuaXRpemUgcmVjaXBpZW50IGVtYWlsIHRvIHByZXZlbnQgaGVhZGVyIGluamVjdGlvblxuICAgIGxldCBzYW5pdGl6ZWRSZWNpcGllbnQ7XG4gICAgdHJ5IHtcbiAgICAgIHNhbml0aXplZFJlY2lwaWVudCA9IHJlY2lwaWVudEVtYWlsID8gc2FuaXRpemVFbWFpbChyZWNpcGllbnRFbWFpbCkgOiAncm9zc0BhbG9hLmFnZW5jeSc7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ludmFsaWQgcmVjaXBpZW50IGVtYWlsOicsIGVycm9yKTtcbiAgICAgIHNhbml0aXplZFJlY2lwaWVudCA9ICdyb3NzQGFsb2EuYWdlbmN5JzsgLy8gRmFsbGJhY2sgdG8gZGVmYXVsdFxuICAgIH1cbiAgICBcbiAgICAvLyBTYW5pdGl6ZSBmb3JtIHRpdGxlIHRvIHByZXZlbnQgaW5qZWN0aW9uIGluIHN1YmplY3RcbiAgICBjb25zdCBzYW5pdGl6ZWRUaXRsZSA9IHNhbml0aXplVGV4dChmb3JtLnRpdGxlIHx8ICdVbnRpdGxlZCBGb3JtJylcbiAgICAgIC5yZXBsYWNlKC9bXFxuXFxyXS9nLCAnJylcbiAgICAgIC5zdWJzdHJpbmcoMCwgMTAwKTtcbiAgICBcbiAgICAvLyBGb3JtYXQgdGhlIHJlc3BvbnNlcyBpbnRvIGEgY2xlYW4gSFRNTCBlbWFpbFxuICAgIGNvbnN0IGh0bWxDb250ZW50ID0gZ2VuZXJhdGVFbWFpbEhUTUwoZm9ybSwgcmVzcG9uc2VzKTtcbiAgICBcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzZW5kLmVtYWlscy5zZW5kKHtcbiAgICAgIGZyb206ICdBbG9hIEZvcm1zIDxvbmJvYXJkaW5nQHJlc2VuZC5kZXY+JyxcbiAgICAgIHRvOiBzYW5pdGl6ZWRSZWNpcGllbnQsXG4gICAgICBzdWJqZWN0OiBgTmV3IFJlc3BvbnNlOiAke3Nhbml0aXplZFRpdGxlfWAsXG4gICAgICBodG1sOiBodG1sQ29udGVudCxcbiAgICB9KTtcblxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGEgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZW5kaW5nIGVtYWlsOicsIGVycm9yKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3IgfTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZUVtYWlsSFRNTChmb3JtLCByZXNwb25zZXMpIHtcbiAgY29uc3QgdGltZXN0YW1wID0gbmV3IERhdGUoKS50b0xvY2FsZVN0cmluZygnZW4tVVMnLCB7XG4gICAgd2Vla2RheTogJ2xvbmcnLFxuICAgIHllYXI6ICdudW1lcmljJyxcbiAgICBtb250aDogJ2xvbmcnLFxuICAgIGRheTogJ251bWVyaWMnLFxuICAgIGhvdXI6ICcyLWRpZ2l0JyxcbiAgICBtaW51dGU6ICcyLWRpZ2l0JyxcbiAgICB0aW1lWm9uZU5hbWU6ICdzaG9ydCdcbiAgfSk7XG5cbiAgcmV0dXJuIGBcbiAgICA8IURPQ1RZUEUgaHRtbD5cbiAgICA8aHRtbD5cbiAgICA8aGVhZD5cbiAgICAgIDxtZXRhIGNoYXJzZXQ9XCJ1dGYtOFwiPlxuICAgICAgPG1ldGEgbmFtZT1cInZpZXdwb3J0XCIgY29udGVudD1cIndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjBcIj5cbiAgICAgIDx0aXRsZT5Gb3JtIFJlc3BvbnNlPC90aXRsZT5cbiAgICAgIDxzdHlsZT5cbiAgICAgICAgYm9keSB7XG4gICAgICAgICAgZm9udC1mYW1pbHk6IC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgJ1NlZ29lIFVJJywgUm9ib3RvLCAnSGVsdmV0aWNhIE5ldWUnLCBBcmlhbCwgc2Fucy1zZXJpZjtcbiAgICAgICAgICBsaW5lLWhlaWdodDogMS42O1xuICAgICAgICAgIGNvbG9yOiAjMzMzO1xuICAgICAgICAgIG1heC13aWR0aDogNjAwcHg7XG4gICAgICAgICAgbWFyZ2luOiAwIGF1dG87XG4gICAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjVmNWY1O1xuICAgICAgICB9XG4gICAgICAgIC5lbWFpbC1jb250YWluZXIge1xuICAgICAgICAgIGJhY2tncm91bmQ6IHdoaXRlO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7XG4gICAgICAgICAgYm94LXNoYWRvdzogMCAycHggOHB4IHJnYmEoMCwwLDAsMC4xKTtcbiAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgICB9XG4gICAgICAgIC5oZWFkZXIge1xuICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2NjdlZWEgMCUsICM3NjRiYTIgMTAwJSk7XG4gICAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICAgIHBhZGRpbmc6IDMwcHg7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICB9XG4gICAgICAgIC5oZWFkZXIgaDEge1xuICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICBmb250LXNpemU6IDI0cHg7XG4gICAgICAgICAgZm9udC13ZWlnaHQ6IDYwMDtcbiAgICAgICAgfVxuICAgICAgICAuaGVhZGVyIHAge1xuICAgICAgICAgIG1hcmdpbjogMTBweCAwIDAgMDtcbiAgICAgICAgICBvcGFjaXR5OiAwLjk7XG4gICAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICB9XG4gICAgICAgIC5jb250ZW50IHtcbiAgICAgICAgICBwYWRkaW5nOiAzMHB4O1xuICAgICAgICB9XG4gICAgICAgIC5yZXNwb25zZS1zZWN0aW9uIHtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyNXB4O1xuICAgICAgICAgIHBhZGRpbmctYm90dG9tOiAyNXB4O1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZTVlNWU1O1xuICAgICAgICB9XG4gICAgICAgIC5yZXNwb25zZS1zZWN0aW9uOmxhc3QtY2hpbGQge1xuICAgICAgICAgIGJvcmRlci1ib3R0b206IG5vbmU7XG4gICAgICAgICAgcGFkZGluZy1ib3R0b206IDA7XG4gICAgICAgIH1cbiAgICAgICAgLnNlY3Rpb24tdGl0bGUge1xuICAgICAgICAgIGNvbG9yOiAjNjY3ZWVhO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gICAgICAgICAgbGV0dGVyLXNwYWNpbmc6IDFweDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICB9XG4gICAgICAgIC5maWVsZCB7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgfVxuICAgICAgICAuZmllbGQtbGFiZWwge1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgICAgY29sb3I6ICM1NTU7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogNXB4O1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICAgICAgfVxuICAgICAgICAuZmllbGQtdmFsdWUge1xuICAgICAgICAgIGNvbG9yOiAjMzMzO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTVweDtcbiAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgIGJhY2tncm91bmQ6ICNmOGY5ZmE7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgIGJvcmRlci1sZWZ0OiAzcHggc29saWQgIzY2N2VlYTtcbiAgICAgICAgfVxuICAgICAgICAuZmllbGQtdmFsdWUuZW1wdHkge1xuICAgICAgICAgIGNvbG9yOiAjOTk5O1xuICAgICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgICAgICAgICBib3JkZXItbGVmdC1jb2xvcjogI2RkZDtcbiAgICAgICAgfVxuICAgICAgICAuZm9vdGVyIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjhmOWZhO1xuICAgICAgICAgIHBhZGRpbmc6IDIwcHggMzBweDtcbiAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICAgIGNvbG9yOiAjNjY2O1xuICAgICAgICB9XG4gICAgICAgIC5mb290ZXIgYSB7XG4gICAgICAgICAgY29sb3I6ICM2NjdlZWE7XG4gICAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgICAgICB9XG4gICAgICAgIC50aW1lc3RhbXAge1xuICAgICAgICAgIGJhY2tncm91bmQ6ICNmMGYwZjA7XG4gICAgICAgICAgcGFkZGluZzogMTBweCAzMHB4O1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDtcbiAgICAgICAgICBjb2xvcjogIzY2NjtcbiAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgI2U1ZTVlNTtcbiAgICAgICAgfVxuICAgICAgICAubG9nbyB7XG4gICAgICAgICAgd2lkdGg6IDEyMHB4O1xuICAgICAgICAgIGhlaWdodDogYXV0bztcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4O1xuICAgICAgICB9XG4gICAgICA8L3N0eWxlPlxuICAgIDwvaGVhZD5cbiAgICA8Ym9keT5cbiAgICAgIDxkaXYgY2xhc3M9XCJlbWFpbC1jb250YWluZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImhlYWRlclwiPlxuICAgICAgICAgIDxpbWcgc3JjPVwiaHR0cHM6Ly9pbWFnZXMuY3RmYXNzZXRzLm5ldC9xa3puZnpjaWt2NTEveFdwc1VBeXBCclJnQWptYnlMR1l5L2I5NjlmNDM1MzE3NGU0ZjIwOTk5NmViZjYwYWY4ZjdjL2Fsb2FfLV93aGl0ZS5zdmdcIiBhbHQ9XCJBbG9hXCIgY2xhc3M9XCJsb2dvXCI+XG4gICAgICAgICAgPGgxPk5ldyBGb3JtIFJlc3BvbnNlPC9oMT5cbiAgICAgICAgICA8cD4ke3Nhbml0aXplSFRNTChmb3JtLnRpdGxlIHx8ICdVbnRpdGxlZCBGb3JtJyl9PC9wPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0aW1lc3RhbXBcIj5cbiAgICAgICAgICA8c3Ryb25nPlN1Ym1pdHRlZDo8L3N0cm9uZz4gJHt0aW1lc3RhbXB9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICBcbiAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cbiAgICAgICAgICAke2dlbmVyYXRlUmVzcG9uc2VGaWVsZHMoZm9ybS5maWVsZHMsIHJlc3BvbnNlcyl9XG4gICAgICAgIDwvZGl2PlxuICAgICAgICBcbiAgICAgICAgPGRpdiBjbGFzcz1cImZvb3RlclwiPlxuICAgICAgICAgIDxwPlxuICAgICAgICAgICAgVGhpcyByZXNwb25zZSB3YXMgc3VibWl0dGVkIHZpYSB5b3VyIGN1c3RvbSBmb3JtLjxicj5cbiAgICAgICAgICAgIDxhIGhyZWY9XCIke3Byb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0JBU0VfVVJMIHx8ICdodHRwczovL2N1c3RvbS1mb3Jtcy14aS52ZXJjZWwuYXBwJ30vcmVzcG9uc2VzLyR7Zm9ybS5pZH1cIj5cbiAgICAgICAgICAgICAgVmlldyBhbGwgcmVzcG9uc2VzIOKGklxuICAgICAgICAgICAgPC9hPlxuICAgICAgICAgIDwvcD5cbiAgICAgICAgICA8cCBzdHlsZT1cIm1hcmdpbi10b3A6IDE1cHg7IGNvbG9yOiAjOTk5O1wiPlxuICAgICAgICAgICAgUG93ZXJlZCBieSA8c3Ryb25nPkFsb2HCriBBZ2VuY3k8L3N0cm9uZz5cbiAgICAgICAgICA8L3A+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgPC9ib2R5PlxuICAgIDwvaHRtbD5cbiAgYDtcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVSZXNwb25zZUZpZWxkcyhmaWVsZHMsIHJlc3BvbnNlcykge1xuICAvLyBHcm91cCBmaWVsZHMgYnkgc2VjdGlvblxuICBjb25zdCBzZWN0aW9ucyA9IHt9O1xuICBcbiAgZmllbGRzLmZvckVhY2goZmllbGQgPT4ge1xuICAgIGNvbnN0IHNlY3Rpb24gPSBmaWVsZC52YWxpZGF0aW9uPy5zZWN0aW9uIHx8ICdHZW5lcmFsIEluZm9ybWF0aW9uJztcbiAgICBpZiAoIXNlY3Rpb25zW3NlY3Rpb25dKSB7XG4gICAgICBzZWN0aW9uc1tzZWN0aW9uXSA9IFtdO1xuICAgIH1cbiAgICBzZWN0aW9uc1tzZWN0aW9uXS5wdXNoKGZpZWxkKTtcbiAgfSk7XG5cbiAgbGV0IGh0bWwgPSAnJztcbiAgXG4gIE9iamVjdC5lbnRyaWVzKHNlY3Rpb25zKS5mb3JFYWNoKChbc2VjdGlvbk5hbWUsIHNlY3Rpb25GaWVsZHNdKSA9PiB7XG4gICAgaHRtbCArPSBgXG4gICAgICA8ZGl2IGNsYXNzPVwicmVzcG9uc2Utc2VjdGlvblwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwic2VjdGlvbi10aXRsZVwiPiR7c2FuaXRpemVIVE1MKHNlY3Rpb25OYW1lKX08L2Rpdj5cbiAgICBgO1xuICAgIFxuICAgIHNlY3Rpb25GaWVsZHMuZm9yRWFjaChmaWVsZCA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHJlc3BvbnNlc1tmaWVsZC5maWVsZF9uYW1lXSB8fCByZXNwb25zZXNbZmllbGQubmFtZV07XG4gICAgICBjb25zdCBkaXNwbGF5VmFsdWUgPSBmb3JtYXRGaWVsZFZhbHVlKHZhbHVlLCBmaWVsZCk7XG4gICAgICBjb25zdCBzYW5pdGl6ZWRMYWJlbCA9IHNhbml0aXplSFRNTChmaWVsZC5maWVsZF9sYWJlbCB8fCBmaWVsZC5sYWJlbCB8fCAnVW5uYW1lZCBGaWVsZCcpO1xuICAgICAgXG4gICAgICBodG1sICs9IGBcbiAgICAgICAgPGRpdiBjbGFzcz1cImZpZWxkXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZpZWxkLWxhYmVsXCI+JHtzYW5pdGl6ZWRMYWJlbH08L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmllbGQtdmFsdWUgJHshZGlzcGxheVZhbHVlID8gJ2VtcHR5JyA6ICcnfVwiPlxuICAgICAgICAgICAgJHtkaXNwbGF5VmFsdWUgfHwgJ05vIHJlc3BvbnNlIHByb3ZpZGVkJ31cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICBgO1xuICAgIH0pO1xuICAgIFxuICAgIGh0bWwgKz0gJzwvZGl2Pic7XG4gIH0pO1xuICBcbiAgcmV0dXJuIGh0bWw7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdEZpZWxkVmFsdWUodmFsdWUsIGZpZWxkKSB7XG4gIGlmICghdmFsdWUpIHJldHVybiAnJztcbiAgXG4gIC8vIEhhbmRsZSBhcnJheXMgKGNoZWNrYm94ZXMsIG11bHRpLXNlbGVjdClcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgaWYgKHZhbHVlLmxlbmd0aCA9PT0gMCkgcmV0dXJuICcnO1xuICAgIHJldHVybiB2YWx1ZS5tYXAodiA9PiBg4oCiICR7c2FuaXRpemVIVE1MKFN0cmluZyh2KSl9YCkuam9pbignPGJyPicpO1xuICB9XG4gIFxuICAvLyBIYW5kbGUgcmF0aW5nIGZpZWxkc1xuICBpZiAoZmllbGQuZmllbGRfdHlwZSA9PT0gJ3JhdGluZycgfHwgZmllbGQudHlwZSA9PT0gJ3JhdGluZycpIHtcbiAgICBjb25zdCByYXRpbmcgPSBwYXJzZUludCh2YWx1ZSwgMTApO1xuICAgIGlmIChpc05hTihyYXRpbmcpIHx8IHJhdGluZyA8IDAgfHwgcmF0aW5nID4gNSkge1xuICAgICAgcmV0dXJuICdJbnZhbGlkIHJhdGluZyc7XG4gICAgfVxuICAgIHJldHVybiBgJHtyYXRpbmd9IC8gNSDirZBgO1xuICB9XG4gIFxuICAvLyBIYW5kbGUgbG9uZyB0ZXh0IHdpdGggbGluZSBicmVha3MgLSBzYW5pdGl6ZSB0byBwcmV2ZW50IFhTU1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgIGNvbnN0IHNhbml0aXplZCA9IHNhbml0aXplSFRNTCh2YWx1ZSk7XG4gICAgaWYgKHZhbHVlLmluY2x1ZGVzKCdcXG4nKSkge1xuICAgICAgcmV0dXJuIHNhbml0aXplZC5yZXBsYWNlKC9cXG4vZywgJzxicj4nKTtcbiAgICB9XG4gICAgcmV0dXJuIHNhbml0aXplZDtcbiAgfVxuICBcbiAgcmV0dXJuIHNhbml0aXplSFRNTChTdHJpbmcodmFsdWUpKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgeyBzZW5kRm9ybVJlc3BvbnNlRW1haWwgfTsiXSwibmFtZXMiOlsiUmVzZW5kIiwic2FuaXRpemVFbWFpbCIsInNhbml0aXplVGV4dCIsInNhbml0aXplSFRNTCIsInJlc2VuZCIsInByb2Nlc3MiLCJlbnYiLCJSRVNFTkRfQVBJX0tFWSIsInNlbmRGb3JtUmVzcG9uc2VFbWFpbCIsImZvcm0iLCJyZXNwb25zZXMiLCJyZWNpcGllbnRFbWFpbCIsImNvbnNvbGUiLCJsb2ciLCJzdWNjZXNzIiwic2tpcHBlZCIsIm1lc3NhZ2UiLCJzYW5pdGl6ZWRSZWNpcGllbnQiLCJlcnJvciIsInNhbml0aXplZFRpdGxlIiwidGl0bGUiLCJyZXBsYWNlIiwic3Vic3RyaW5nIiwiaHRtbENvbnRlbnQiLCJnZW5lcmF0ZUVtYWlsSFRNTCIsImRhdGEiLCJlbWFpbHMiLCJzZW5kIiwiZnJvbSIsInRvIiwic3ViamVjdCIsImh0bWwiLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9Mb2NhbGVTdHJpbmciLCJ3ZWVrZGF5IiwieWVhciIsIm1vbnRoIiwiZGF5IiwiaG91ciIsIm1pbnV0ZSIsInRpbWVab25lTmFtZSIsImdlbmVyYXRlUmVzcG9uc2VGaWVsZHMiLCJmaWVsZHMiLCJORVhUX1BVQkxJQ19CQVNFX1VSTCIsImlkIiwic2VjdGlvbnMiLCJmb3JFYWNoIiwiZmllbGQiLCJzZWN0aW9uIiwidmFsaWRhdGlvbiIsInB1c2giLCJPYmplY3QiLCJlbnRyaWVzIiwic2VjdGlvbk5hbWUiLCJzZWN0aW9uRmllbGRzIiwidmFsdWUiLCJmaWVsZF9uYW1lIiwibmFtZSIsImRpc3BsYXlWYWx1ZSIsImZvcm1hdEZpZWxkVmFsdWUiLCJzYW5pdGl6ZWRMYWJlbCIsImZpZWxkX2xhYmVsIiwibGFiZWwiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJtYXAiLCJ2IiwiU3RyaW5nIiwiam9pbiIsImZpZWxkX3R5cGUiLCJ0eXBlIiwicmF0aW5nIiwicGFyc2VJbnQiLCJpc05hTiIsInNhbml0aXplZCIsImluY2x1ZGVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/email.js\n");

/***/ }),

/***/ "(rsc)/./lib/security.js":
/*!*************************!*\
  !*** ./lib/security.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RateLimiter: () => (/* binding */ RateLimiter),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   generateSecureToken: () => (/* binding */ generateSecureToken),\n/* harmony export */   sanitizeArray: () => (/* binding */ sanitizeArray),\n/* harmony export */   sanitizeEmail: () => (/* binding */ sanitizeEmail),\n/* harmony export */   sanitizeFieldName: () => (/* binding */ sanitizeFieldName),\n/* harmony export */   sanitizeFileName: () => (/* binding */ sanitizeFileName),\n/* harmony export */   sanitizeHTML: () => (/* binding */ sanitizeHTML),\n/* harmony export */   sanitizeNumber: () => (/* binding */ sanitizeNumber),\n/* harmony export */   sanitizeSQLIdentifier: () => (/* binding */ sanitizeSQLIdentifier),\n/* harmony export */   sanitizeText: () => (/* binding */ sanitizeText),\n/* harmony export */   sanitizeURL: () => (/* binding */ sanitizeURL),\n/* harmony export */   validateCSRFToken: () => (/* binding */ validateCSRFToken),\n/* harmony export */   validateFileUpload: () => (/* binding */ validateFileUpload)\n/* harmony export */ });\n/* harmony import */ var isomorphic_dompurify__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! isomorphic-dompurify */ \"(rsc)/./node_modules/isomorphic-dompurify/index.js\");\n/* harmony import */ var isomorphic_dompurify__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(isomorphic_dompurify__WEBPACK_IMPORTED_MODULE_0__);\n\n// Input validation and sanitization utilities\n/**\n * Sanitize HTML content to prevent XSS attacks\n */ function sanitizeHTML(dirty) {\n    if (!dirty) return \"\";\n    // Configure DOMPurify to be very strict\n    const config = {\n        ALLOWED_TAGS: [\n            \"b\",\n            \"i\",\n            \"em\",\n            \"strong\",\n            \"a\",\n            \"p\",\n            \"br\"\n        ],\n        ALLOWED_ATTR: [\n            \"href\"\n        ],\n        ALLOW_DATA_ATTR: false,\n        ALLOW_UNKNOWN_PROTOCOLS: false,\n        SAFE_FOR_TEMPLATES: true,\n        WHOLE_DOCUMENT: false,\n        RETURN_DOM: false,\n        RETURN_DOM_FRAGMENT: false,\n        RETURN_TRUSTED_TYPE: false,\n        FORCE_BODY: false,\n        SANITIZE_DOM: true,\n        IN_PLACE: false,\n        USE_PROFILES: false,\n        ALLOW_ARIA_ATTR: false,\n        ALLOW_DATA_ATTR: false,\n        DISALLOWED_TAGS: [\n            \"script\",\n            \"style\",\n            \"iframe\",\n            \"object\",\n            \"embed\",\n            \"link\"\n        ]\n    };\n    return isomorphic_dompurify__WEBPACK_IMPORTED_MODULE_0___default().sanitize(dirty, config);\n}\n/**\n * Sanitize plain text input (removes all HTML)\n */ function sanitizeText(input) {\n    if (!input) return \"\";\n    if (typeof input !== \"string\") {\n        input = String(input);\n    }\n    // Remove all HTML tags and decode HTML entities\n    const decoded = input.replace(/<[^>]*>/g, \"\") // Remove HTML tags\n    .replace(/&lt;/g, \"<\").replace(/&gt;/g, \">\").replace(/&quot;/g, '\"').replace(/&#x27;/g, \"'\").replace(/&amp;/g, \"&\").trim();\n    // Remove any potential script injections\n    return decoded.replace(/javascript:/gi, \"\").replace(/on\\w+\\s*=/gi, \"\").replace(/<script[^>]*>.*?<\\/script>/gi, \"\").replace(/eval\\(/gi, \"\").replace(/expression\\(/gi, \"\");\n}\n/**\n * Validate and sanitize email addresses\n */ function sanitizeEmail(email) {\n    if (!email || typeof email !== \"string\") return \"\";\n    // Basic email validation regex\n    const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\n    const sanitized = email.toLowerCase().trim();\n    if (!emailRegex.test(sanitized)) {\n        throw new Error(\"Invalid email format\");\n    }\n    // Additional check for common injection patterns\n    if (sanitized.includes(\"\\n\") || sanitized.includes(\"\\r\") || sanitized.includes(\"%0a\") || sanitized.includes(\"%0d\")) {\n        throw new Error(\"Invalid email format - possible injection attempt\");\n    }\n    return sanitized;\n}\n/**\n * Validate and sanitize URLs\n */ function sanitizeURL(url) {\n    if (!url || typeof url !== \"string\") return \"\";\n    try {\n        const parsed = new URL(url);\n        // Only allow http(s) and mailto protocols\n        if (![\n            \"http:\",\n            \"https:\",\n            \"mailto:\"\n        ].includes(parsed.protocol)) {\n            throw new Error(\"Invalid URL protocol\");\n        }\n        // Prevent javascript: and data: URLs\n        if (url.toLowerCase().includes(\"javascript:\") || url.toLowerCase().includes(\"data:\")) {\n            throw new Error(\"Potentially malicious URL\");\n        }\n        return parsed.href;\n    } catch (error) {\n        throw new Error(\"Invalid URL format\");\n    }\n}\n/**\n * Sanitize file names to prevent directory traversal\n */ function sanitizeFileName(fileName) {\n    if (!fileName || typeof fileName !== \"string\") return \"\";\n    // Remove any path components and dangerous characters\n    return fileName.replace(/^.*[\\\\\\/]/, \"\") // Remove path\n    .replace(/\\.{2,}/g, \".\") // Remove multiple dots\n    .replace(/[^a-zA-Z0-9._-]/g, \"_\") // Replace special chars with underscore\n    .substring(0, 255); // Limit length\n}\n/**\n * Validate and sanitize form field names (no special characters)\n */ function sanitizeFieldName(name) {\n    if (!name || typeof name !== \"string\") return \"\";\n    // Only allow alphanumeric, underscore, and hyphen\n    return name.replace(/[^a-zA-Z0-9_-]/g, \"_\").substring(0, 100);\n}\n/**\n * Validate numeric input\n */ function sanitizeNumber(input, min = null, max = null) {\n    const num = Number(input);\n    if (isNaN(num)) {\n        throw new Error(\"Invalid number format\");\n    }\n    if (min !== null && num < min) {\n        throw new Error(`Number must be at least ${min}`);\n    }\n    if (max !== null && num > max) {\n        throw new Error(`Number must be at most ${max}`);\n    }\n    return num;\n}\n/**\n * Sanitize array input (for checkboxes, multi-select)\n */ function sanitizeArray(input, allowedValues = null) {\n    if (!Array.isArray(input)) {\n        return [];\n    }\n    const sanitized = input.filter((item)=>item !== null && item !== undefined).map((item)=>sanitizeText(String(item)));\n    if (allowedValues && Array.isArray(allowedValues)) {\n        return sanitized.filter((item)=>allowedValues.includes(item));\n    }\n    return sanitized;\n}\n/**\n * Validate file upload\n */ function validateFileUpload(file, options = {}) {\n    const { maxSize = 10 * 1024 * 1024, allowedTypes = [\n        \"text/plain\",\n        \"text/markdown\",\n        \"text/x-markdown\",\n        \"application/x-markdown\"\n    ], allowedExtensions = [\n        \".txt\",\n        \".md\",\n        \".markdown\"\n    ] } = options;\n    if (!file) {\n        throw new Error(\"No file provided\");\n    }\n    // Check file size\n    if (file.size > maxSize) {\n        throw new Error(`File size exceeds maximum allowed size of ${maxSize / 1024 / 1024}MB`);\n    }\n    // Check file type\n    if (allowedTypes.length > 0 && !allowedTypes.includes(file.type)) {\n        throw new Error(\"File type not allowed\");\n    }\n    // Check file extension\n    const fileName = file.name || \"\";\n    const hasValidExtension = allowedExtensions.some((ext)=>fileName.toLowerCase().endsWith(ext));\n    if (!hasValidExtension) {\n        throw new Error(\"File extension not allowed\");\n    }\n    // Check for double extensions that might bypass filters\n    if (fileName.split(\".\").length > 2) {\n        const parts = fileName.split(\".\");\n        const beforeLast = parts[parts.length - 2];\n        const suspiciousExtensions = [\n            \"exe\",\n            \"js\",\n            \"php\",\n            \"asp\",\n            \"jsp\"\n        ];\n        if (suspiciousExtensions.includes(beforeLast.toLowerCase())) {\n            throw new Error(\"Suspicious file name detected\");\n        }\n    }\n    return true;\n}\n/**\n * Generate a secure random token\n */ function generateSecureToken(length = 32) {\n    const chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n    let token = \"\";\n    if (false) {} else {\n        // Server-side fallback\n        const crypto = __webpack_require__(/*! crypto */ \"crypto\");\n        for(let i = 0; i < length; i++){\n            token += chars[crypto.randomInt(chars.length)];\n        }\n    }\n    return token;\n}\n/**\n * Validate CSRF token\n */ function validateCSRFToken(requestToken, sessionToken) {\n    if (!requestToken || !sessionToken) {\n        return false;\n    }\n    // Use timing-safe comparison to prevent timing attacks\n    if (requestToken.length !== sessionToken.length) {\n        return false;\n    }\n    let result = 0;\n    for(let i = 0; i < requestToken.length; i++){\n        result |= requestToken.charCodeAt(i) ^ sessionToken.charCodeAt(i);\n    }\n    return result === 0;\n}\n/**\n * Sanitize SQL identifiers (table names, column names)\n * Note: Prefer parameterized queries instead of this\n */ function sanitizeSQLIdentifier(identifier) {\n    if (!identifier || typeof identifier !== \"string\") return \"\";\n    // Only allow alphanumeric and underscore\n    const sanitized = identifier.replace(/[^a-zA-Z0-9_]/g, \"\");\n    // Ensure it doesn't start with a number\n    if (/^\\d/.test(sanitized)) {\n        return \"_\" + sanitized;\n    }\n    return sanitized.substring(0, 64); // Limit length\n}\n/**\n * Rate limit check helper\n */ class RateLimiter {\n    constructor(maxRequests = 10, windowMs = 60000){\n        this.maxRequests = maxRequests;\n        this.windowMs = windowMs;\n        this.requests = new Map();\n    }\n    check(identifier) {\n        const now = Date.now();\n        const windowStart = now - this.windowMs;\n        if (!this.requests.has(identifier)) {\n            this.requests.set(identifier, []);\n        }\n        const timestamps = this.requests.get(identifier);\n        // Remove old timestamps\n        const validTimestamps = timestamps.filter((ts)=>ts > windowStart);\n        if (validTimestamps.length >= this.maxRequests) {\n            return false; // Rate limit exceeded\n        }\n        validTimestamps.push(now);\n        this.requests.set(identifier, validTimestamps);\n        // Clean up old entries periodically\n        if (Math.random() < 0.01) {\n            this.cleanup();\n        }\n        return true;\n    }\n    cleanup() {\n        const now = Date.now();\n        const windowStart = now - this.windowMs;\n        for (const [identifier, timestamps] of this.requests.entries()){\n            const validTimestamps = timestamps.filter((ts)=>ts > windowStart);\n            if (validTimestamps.length === 0) {\n                this.requests.delete(identifier);\n            } else {\n                this.requests.set(identifier, validTimestamps);\n            }\n        }\n    }\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\n    sanitizeHTML,\n    sanitizeText,\n    sanitizeEmail,\n    sanitizeURL,\n    sanitizeFileName,\n    sanitizeFieldName,\n    sanitizeNumber,\n    sanitizeArray,\n    validateFileUpload,\n    generateSecureToken,\n    validateCSRFToken,\n    sanitizeSQLIdentifier,\n    RateLimiter\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RztRQUNwQixNQUFNRSxjQUFjRixNQUFNLElBQUksQ0FBQ0osUUFBUTtRQUV2QyxLQUFLLE1BQU0sQ0FBQ0osWUFBWWEsV0FBVyxJQUFJLElBQUksQ0FBQ1IsUUFBUSxDQUFDZ0IsT0FBTyxHQUFJO1lBQzlELE1BQU1OLGtCQUFrQkYsV0FBV25ELE1BQU0sQ0FBQ3NELENBQUFBLEtBQU1BLEtBQUtOO1lBRXJELElBQUlLLGdCQUFnQjFDLE1BQU0sS0FBSyxHQUFHO2dCQUNoQyxJQUFJLENBQUNnQyxRQUFRLENBQUNpQixNQUFNLENBQUN0QjtZQUN2QixPQUFPO2dCQUNMLElBQUksQ0FBQ0ssUUFBUSxDQUFDTyxHQUFHLENBQUNaLFlBQVllO1lBQ2hDO1FBQ0Y7SUFDRjtBQUNGO0FBRUEsaUVBQWU7SUFDYjVHO0lBQ0FtQjtJQUNBTTtJQUNBUTtJQUNBTztJQUNBRztJQUNBRTtJQUNBTTtJQUNBUTtJQUNBaUI7SUFDQVc7SUFDQUs7SUFDQUU7QUFDRixDQUFDLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jdXN0b20tZm9ybXMvLi9saWIvc2VjdXJpdHkuanM/MWMzNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgRE9NUHVyaWZ5IGZyb20gJ2lzb21vcnBoaWMtZG9tcHVyaWZ5JztcblxuLy8gSW5wdXQgdmFsaWRhdGlvbiBhbmQgc2FuaXRpemF0aW9uIHV0aWxpdGllc1xuXG4vKipcbiAqIFNhbml0aXplIEhUTUwgY29udGVudCB0byBwcmV2ZW50IFhTUyBhdHRhY2tzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzYW5pdGl6ZUhUTUwoZGlydHkpIHtcbiAgaWYgKCFkaXJ0eSkgcmV0dXJuICcnO1xuICBcbiAgLy8gQ29uZmlndXJlIERPTVB1cmlmeSB0byBiZSB2ZXJ5IHN0cmljdFxuICBjb25zdCBjb25maWcgPSB7XG4gICAgQUxMT1dFRF9UQUdTOiBbJ2InLCAnaScsICdlbScsICdzdHJvbmcnLCAnYScsICdwJywgJ2JyJ10sXG4gICAgQUxMT1dFRF9BVFRSOiBbJ2hyZWYnXSxcbiAgICBBTExPV19EQVRBX0FUVFI6IGZhbHNlLFxuICAgIEFMTE9XX1VOS05PV05fUFJPVE9DT0xTOiBmYWxzZSxcbiAgICBTQUZFX0ZPUl9URU1QTEFURVM6IHRydWUsXG4gICAgV0hPTEVfRE9DVU1FTlQ6IGZhbHNlLFxuICAgIFJFVFVSTl9ET006IGZhbHNlLFxuICAgIFJFVFVSTl9ET01fRlJBR01FTlQ6IGZhbHNlLFxuICAgIFJFVFVSTl9UUlVTVEVEX1RZUEU6IGZhbHNlLFxuICAgIEZPUkNFX0JPRFk6IGZhbHNlLFxuICAgIFNBTklUSVpFX0RPTTogdHJ1ZSxcbiAgICBJTl9QTEFDRTogZmFsc2UsXG4gICAgVVNFX1BST0ZJTEVTOiBmYWxzZSxcbiAgICBBTExPV19BUklBX0FUVFI6IGZhbHNlLFxuICAgIEFMTE9XX0RBVEFfQVRUUjogZmFsc2UsXG4gICAgRElTQUxMT1dFRF9UQUdTOiBbJ3NjcmlwdCcsICdzdHlsZScsICdpZnJhbWUnLCAnb2JqZWN0JywgJ2VtYmVkJywgJ2xpbmsnXSxcbiAgfTtcbiAgXG4gIHJldHVybiBET01QdXJpZnkuc2FuaXRpemUoZGlydHksIGNvbmZpZyk7XG59XG5cbi8qKlxuICogU2FuaXRpemUgcGxhaW4gdGV4dCBpbnB1dCAocmVtb3ZlcyBhbGwgSFRNTClcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplVGV4dChpbnB1dCkge1xuICBpZiAoIWlucHV0KSByZXR1cm4gJyc7XG4gIGlmICh0eXBlb2YgaW5wdXQgIT09ICdzdHJpbmcnKSB7XG4gICAgaW5wdXQgPSBTdHJpbmcoaW5wdXQpO1xuICB9XG4gIFxuICAvLyBSZW1vdmUgYWxsIEhUTUwgdGFncyBhbmQgZGVjb2RlIEhUTUwgZW50aXRpZXNcbiAgY29uc3QgZGVjb2RlZCA9IGlucHV0XG4gICAgLnJlcGxhY2UoLzxbXj5dKj4vZywgJycpIC8vIFJlbW92ZSBIVE1MIHRhZ3NcbiAgICAucmVwbGFjZSgvJmx0Oy9nLCAnPCcpXG4gICAgLnJlcGxhY2UoLyZndDsvZywgJz4nKVxuICAgIC5yZXBsYWNlKC8mcXVvdDsvZywgJ1wiJylcbiAgICAucmVwbGFjZSgvJiN4Mjc7L2csIFwiJ1wiKVxuICAgIC5yZXBsYWNlKC8mYW1wOy9nLCAnJicpXG4gICAgLnRyaW0oKTtcbiAgICBcbiAgLy8gUmVtb3ZlIGFueSBwb3RlbnRpYWwgc2NyaXB0IGluamVjdGlvbnNcbiAgcmV0dXJuIGRlY29kZWRcbiAgICAucmVwbGFjZSgvamF2YXNjcmlwdDovZ2ksICcnKVxuICAgIC5yZXBsYWNlKC9vblxcdytcXHMqPS9naSwgJycpXG4gICAgLnJlcGxhY2UoLzxzY3JpcHRbXj5dKj4uKj88XFwvc2NyaXB0Pi9naSwgJycpXG4gICAgLnJlcGxhY2UoL2V2YWxcXCgvZ2ksICcnKVxuICAgIC5yZXBsYWNlKC9leHByZXNzaW9uXFwoL2dpLCAnJyk7XG59XG5cbi8qKlxuICogVmFsaWRhdGUgYW5kIHNhbml0aXplIGVtYWlsIGFkZHJlc3Nlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2FuaXRpemVFbWFpbChlbWFpbCkge1xuICBpZiAoIWVtYWlsIHx8IHR5cGVvZiBlbWFpbCAhPT0gJ3N0cmluZycpIHJldHVybiAnJztcbiAgXG4gIC8vIEJhc2ljIGVtYWlsIHZhbGlkYXRpb24gcmVnZXhcbiAgY29uc3QgZW1haWxSZWdleCA9IC9eW2EtekEtWjAtOS5fJSstXStAW2EtekEtWjAtOS4tXStcXC5bYS16QS1aXXsyLH0kLztcbiAgXG4gIGNvbnN0IHNhbml0aXplZCA9IGVtYWlsLnRvTG93ZXJDYXNlKCkudHJpbSgpO1xuICBcbiAgaWYgKCFlbWFpbFJlZ2V4LnRlc3Qoc2FuaXRpemVkKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBlbWFpbCBmb3JtYXQnKTtcbiAgfVxuICBcbiAgLy8gQWRkaXRpb25hbCBjaGVjayBmb3IgY29tbW9uIGluamVjdGlvbiBwYXR0ZXJuc1xuICBpZiAoc2FuaXRpemVkLmluY2x1ZGVzKCdcXG4nKSB8fCBzYW5pdGl6ZWQuaW5jbHVkZXMoJ1xccicpIHx8IFxuICAgICAgc2FuaXRpemVkLmluY2x1ZGVzKCclMGEnKSB8fCBzYW5pdGl6ZWQuaW5jbHVkZXMoJyUwZCcpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGVtYWlsIGZvcm1hdCAtIHBvc3NpYmxlIGluamVjdGlvbiBhdHRlbXB0Jyk7XG4gIH1cbiAgXG4gIHJldHVybiBzYW5pdGl6ZWQ7XG59XG5cbi8qKlxuICogVmFsaWRhdGUgYW5kIHNhbml0aXplIFVSTHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplVVJMKHVybCkge1xuICBpZiAoIXVybCB8fCB0eXBlb2YgdXJsICE9PSAnc3RyaW5nJykgcmV0dXJuICcnO1xuICBcbiAgdHJ5IHtcbiAgICBjb25zdCBwYXJzZWQgPSBuZXcgVVJMKHVybCk7XG4gICAgXG4gICAgLy8gT25seSBhbGxvdyBodHRwKHMpIGFuZCBtYWlsdG8gcHJvdG9jb2xzXG4gICAgaWYgKCFbJ2h0dHA6JywgJ2h0dHBzOicsICdtYWlsdG86J10uaW5jbHVkZXMocGFyc2VkLnByb3RvY29sKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIFVSTCBwcm90b2NvbCcpO1xuICAgIH1cbiAgICBcbiAgICAvLyBQcmV2ZW50IGphdmFzY3JpcHQ6IGFuZCBkYXRhOiBVUkxzXG4gICAgaWYgKHVybC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdqYXZhc2NyaXB0OicpIHx8IFxuICAgICAgICB1cmwudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZGF0YTonKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdQb3RlbnRpYWxseSBtYWxpY2lvdXMgVVJMJyk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBwYXJzZWQuaHJlZjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgVVJMIGZvcm1hdCcpO1xuICB9XG59XG5cbi8qKlxuICogU2FuaXRpemUgZmlsZSBuYW1lcyB0byBwcmV2ZW50IGRpcmVjdG9yeSB0cmF2ZXJzYWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplRmlsZU5hbWUoZmlsZU5hbWUpIHtcbiAgaWYgKCFmaWxlTmFtZSB8fCB0eXBlb2YgZmlsZU5hbWUgIT09ICdzdHJpbmcnKSByZXR1cm4gJyc7XG4gIFxuICAvLyBSZW1vdmUgYW55IHBhdGggY29tcG9uZW50cyBhbmQgZGFuZ2Vyb3VzIGNoYXJhY3RlcnNcbiAgcmV0dXJuIGZpbGVOYW1lXG4gICAgLnJlcGxhY2UoL14uKltcXFxcXFwvXS8sICcnKSAvLyBSZW1vdmUgcGF0aFxuICAgIC5yZXBsYWNlKC9cXC57Mix9L2csICcuJykgLy8gUmVtb3ZlIG11bHRpcGxlIGRvdHNcbiAgICAucmVwbGFjZSgvW15hLXpBLVowLTkuXy1dL2csICdfJykgLy8gUmVwbGFjZSBzcGVjaWFsIGNoYXJzIHdpdGggdW5kZXJzY29yZVxuICAgIC5zdWJzdHJpbmcoMCwgMjU1KTsgLy8gTGltaXQgbGVuZ3RoXG59XG5cbi8qKlxuICogVmFsaWRhdGUgYW5kIHNhbml0aXplIGZvcm0gZmllbGQgbmFtZXMgKG5vIHNwZWNpYWwgY2hhcmFjdGVycylcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplRmllbGROYW1lKG5hbWUpIHtcbiAgaWYgKCFuYW1lIHx8IHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykgcmV0dXJuICcnO1xuICBcbiAgLy8gT25seSBhbGxvdyBhbHBoYW51bWVyaWMsIHVuZGVyc2NvcmUsIGFuZCBoeXBoZW5cbiAgcmV0dXJuIG5hbWVcbiAgICAucmVwbGFjZSgvW15hLXpBLVowLTlfLV0vZywgJ18nKVxuICAgIC5zdWJzdHJpbmcoMCwgMTAwKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBudW1lcmljIGlucHV0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzYW5pdGl6ZU51bWJlcihpbnB1dCwgbWluID0gbnVsbCwgbWF4ID0gbnVsbCkge1xuICBjb25zdCBudW0gPSBOdW1iZXIoaW5wdXQpO1xuICBcbiAgaWYgKGlzTmFOKG51bSkpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgbnVtYmVyIGZvcm1hdCcpO1xuICB9XG4gIFxuICBpZiAobWluICE9PSBudWxsICYmIG51bSA8IG1pbikge1xuICAgIHRocm93IG5ldyBFcnJvcihgTnVtYmVyIG11c3QgYmUgYXQgbGVhc3QgJHttaW59YCk7XG4gIH1cbiAgXG4gIGlmIChtYXggIT09IG51bGwgJiYgbnVtID4gbWF4KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBOdW1iZXIgbXVzdCBiZSBhdCBtb3N0ICR7bWF4fWApO1xuICB9XG4gIFxuICByZXR1cm4gbnVtO1xufVxuXG4vKipcbiAqIFNhbml0aXplIGFycmF5IGlucHV0IChmb3IgY2hlY2tib3hlcywgbXVsdGktc2VsZWN0KVxuICovXG5leHBvcnQgZnVuY3Rpb24gc2FuaXRpemVBcnJheShpbnB1dCwgYWxsb3dlZFZhbHVlcyA9IG51bGwpIHtcbiAgaWYgKCFBcnJheS5pc0FycmF5KGlucHV0KSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICBcbiAgY29uc3Qgc2FuaXRpemVkID0gaW5wdXRcbiAgICAuZmlsdGVyKGl0ZW0gPT4gaXRlbSAhPT0gbnVsbCAmJiBpdGVtICE9PSB1bmRlZmluZWQpXG4gICAgLm1hcChpdGVtID0+IHNhbml0aXplVGV4dChTdHJpbmcoaXRlbSkpKTtcbiAgXG4gIGlmIChhbGxvd2VkVmFsdWVzICYmIEFycmF5LmlzQXJyYXkoYWxsb3dlZFZhbHVlcykpIHtcbiAgICByZXR1cm4gc2FuaXRpemVkLmZpbHRlcihpdGVtID0+IGFsbG93ZWRWYWx1ZXMuaW5jbHVkZXMoaXRlbSkpO1xuICB9XG4gIFxuICByZXR1cm4gc2FuaXRpemVkO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlIGZpbGUgdXBsb2FkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUZpbGVVcGxvYWQoZmlsZSwgb3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IHtcbiAgICBtYXhTaXplID0gMTAgKiAxMDI0ICogMTAyNCwgLy8gMTBNQiBkZWZhdWx0XG4gICAgYWxsb3dlZFR5cGVzID0gWyd0ZXh0L3BsYWluJywgJ3RleHQvbWFya2Rvd24nLCAndGV4dC94LW1hcmtkb3duJywgJ2FwcGxpY2F0aW9uL3gtbWFya2Rvd24nXSxcbiAgICBhbGxvd2VkRXh0ZW5zaW9ucyA9IFsnLnR4dCcsICcubWQnLCAnLm1hcmtkb3duJ11cbiAgfSA9IG9wdGlvbnM7XG4gIFxuICBpZiAoIWZpbGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGZpbGUgcHJvdmlkZWQnKTtcbiAgfVxuICBcbiAgLy8gQ2hlY2sgZmlsZSBzaXplXG4gIGlmIChmaWxlLnNpemUgPiBtYXhTaXplKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBGaWxlIHNpemUgZXhjZWVkcyBtYXhpbXVtIGFsbG93ZWQgc2l6ZSBvZiAke21heFNpemUgLyAxMDI0IC8gMTAyNH1NQmApO1xuICB9XG4gIFxuICAvLyBDaGVjayBmaWxlIHR5cGVcbiAgaWYgKGFsbG93ZWRUeXBlcy5sZW5ndGggPiAwICYmICFhbGxvd2VkVHlwZXMuaW5jbHVkZXMoZmlsZS50eXBlKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignRmlsZSB0eXBlIG5vdCBhbGxvd2VkJyk7XG4gIH1cbiAgXG4gIC8vIENoZWNrIGZpbGUgZXh0ZW5zaW9uXG4gIGNvbnN0IGZpbGVOYW1lID0gZmlsZS5uYW1lIHx8ICcnO1xuICBjb25zdCBoYXNWYWxpZEV4dGVuc2lvbiA9IGFsbG93ZWRFeHRlbnNpb25zLnNvbWUoZXh0ID0+IFxuICAgIGZpbGVOYW1lLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgoZXh0KVxuICApO1xuICBcbiAgaWYgKCFoYXNWYWxpZEV4dGVuc2lvbikge1xuICAgIHRocm93IG5ldyBFcnJvcignRmlsZSBleHRlbnNpb24gbm90IGFsbG93ZWQnKTtcbiAgfVxuICBcbiAgLy8gQ2hlY2sgZm9yIGRvdWJsZSBleHRlbnNpb25zIHRoYXQgbWlnaHQgYnlwYXNzIGZpbHRlcnNcbiAgaWYgKGZpbGVOYW1lLnNwbGl0KCcuJykubGVuZ3RoID4gMikge1xuICAgIGNvbnN0IHBhcnRzID0gZmlsZU5hbWUuc3BsaXQoJy4nKTtcbiAgICBjb25zdCBiZWZvcmVMYXN0ID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMl07XG4gICAgY29uc3Qgc3VzcGljaW91c0V4dGVuc2lvbnMgPSBbJ2V4ZScsICdqcycsICdwaHAnLCAnYXNwJywgJ2pzcCddO1xuICAgIFxuICAgIGlmIChzdXNwaWNpb3VzRXh0ZW5zaW9ucy5pbmNsdWRlcyhiZWZvcmVMYXN0LnRvTG93ZXJDYXNlKCkpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1N1c3BpY2lvdXMgZmlsZSBuYW1lIGRldGVjdGVkJyk7XG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSBhIHNlY3VyZSByYW5kb20gdG9rZW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdlbmVyYXRlU2VjdXJlVG9rZW4obGVuZ3RoID0gMzIpIHtcbiAgY29uc3QgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODknO1xuICBsZXQgdG9rZW4gPSAnJztcbiAgXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuY3J5cHRvKSB7XG4gICAgY29uc3QgYXJyYXkgPSBuZXcgVWludDhBcnJheShsZW5ndGgpO1xuICAgIHdpbmRvdy5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKGFycmF5KTtcbiAgICBcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB0b2tlbiArPSBjaGFyc1thcnJheVtpXSAlIGNoYXJzLmxlbmd0aF07XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIFNlcnZlci1zaWRlIGZhbGxiYWNrXG4gICAgY29uc3QgY3J5cHRvID0gcmVxdWlyZSgnY3J5cHRvJyk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdG9rZW4gKz0gY2hhcnNbY3J5cHRvLnJhbmRvbUludChjaGFycy5sZW5ndGgpXTtcbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiB0b2tlbjtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBDU1JGIHRva2VuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZUNTUkZUb2tlbihyZXF1ZXN0VG9rZW4sIHNlc3Npb25Ub2tlbikge1xuICBpZiAoIXJlcXVlc3RUb2tlbiB8fCAhc2Vzc2lvblRva2VuKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIFxuICAvLyBVc2UgdGltaW5nLXNhZmUgY29tcGFyaXNvbiB0byBwcmV2ZW50IHRpbWluZyBhdHRhY2tzXG4gIGlmIChyZXF1ZXN0VG9rZW4ubGVuZ3RoICE9PSBzZXNzaW9uVG9rZW4ubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIFxuICBsZXQgcmVzdWx0ID0gMDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXF1ZXN0VG9rZW4ubGVuZ3RoOyBpKyspIHtcbiAgICByZXN1bHQgfD0gcmVxdWVzdFRva2VuLmNoYXJDb2RlQXQoaSkgXiBzZXNzaW9uVG9rZW4uY2hhckNvZGVBdChpKTtcbiAgfVxuICBcbiAgcmV0dXJuIHJlc3VsdCA9PT0gMDtcbn1cblxuLyoqXG4gKiBTYW5pdGl6ZSBTUUwgaWRlbnRpZmllcnMgKHRhYmxlIG5hbWVzLCBjb2x1bW4gbmFtZXMpXG4gKiBOb3RlOiBQcmVmZXIgcGFyYW1ldGVyaXplZCBxdWVyaWVzIGluc3RlYWQgb2YgdGhpc1xuICovXG5leHBvcnQgZnVuY3Rpb24gc2FuaXRpemVTUUxJZGVudGlmaWVyKGlkZW50aWZpZXIpIHtcbiAgaWYgKCFpZGVudGlmaWVyIHx8IHR5cGVvZiBpZGVudGlmaWVyICE9PSAnc3RyaW5nJykgcmV0dXJuICcnO1xuICBcbiAgLy8gT25seSBhbGxvdyBhbHBoYW51bWVyaWMgYW5kIHVuZGVyc2NvcmVcbiAgY29uc3Qgc2FuaXRpemVkID0gaWRlbnRpZmllci5yZXBsYWNlKC9bXmEtekEtWjAtOV9dL2csICcnKTtcbiAgXG4gIC8vIEVuc3VyZSBpdCBkb2Vzbid0IHN0YXJ0IHdpdGggYSBudW1iZXJcbiAgaWYgKC9eXFxkLy50ZXN0KHNhbml0aXplZCkpIHtcbiAgICByZXR1cm4gJ18nICsgc2FuaXRpemVkO1xuICB9XG4gIFxuICByZXR1cm4gc2FuaXRpemVkLnN1YnN0cmluZygwLCA2NCk7IC8vIExpbWl0IGxlbmd0aFxufVxuXG4vKipcbiAqIFJhdGUgbGltaXQgY2hlY2sgaGVscGVyXG4gKi9cbmV4cG9ydCBjbGFzcyBSYXRlTGltaXRlciB7XG4gIGNvbnN0cnVjdG9yKG1heFJlcXVlc3RzID0gMTAsIHdpbmRvd01zID0gNjAwMDApIHtcbiAgICB0aGlzLm1heFJlcXVlc3RzID0gbWF4UmVxdWVzdHM7XG4gICAgdGhpcy53aW5kb3dNcyA9IHdpbmRvd01zO1xuICAgIHRoaXMucmVxdWVzdHMgPSBuZXcgTWFwKCk7XG4gIH1cbiAgXG4gIGNoZWNrKGlkZW50aWZpZXIpIHtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IHdpbmRvd1N0YXJ0ID0gbm93IC0gdGhpcy53aW5kb3dNcztcbiAgICBcbiAgICBpZiAoIXRoaXMucmVxdWVzdHMuaGFzKGlkZW50aWZpZXIpKSB7XG4gICAgICB0aGlzLnJlcXVlc3RzLnNldChpZGVudGlmaWVyLCBbXSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHRpbWVzdGFtcHMgPSB0aGlzLnJlcXVlc3RzLmdldChpZGVudGlmaWVyKTtcbiAgICBcbiAgICAvLyBSZW1vdmUgb2xkIHRpbWVzdGFtcHNcbiAgICBjb25zdCB2YWxpZFRpbWVzdGFtcHMgPSB0aW1lc3RhbXBzLmZpbHRlcih0cyA9PiB0cyA+IHdpbmRvd1N0YXJ0KTtcbiAgICBcbiAgICBpZiAodmFsaWRUaW1lc3RhbXBzLmxlbmd0aCA+PSB0aGlzLm1heFJlcXVlc3RzKSB7XG4gICAgICByZXR1cm4gZmFsc2U7IC8vIFJhdGUgbGltaXQgZXhjZWVkZWRcbiAgICB9XG4gICAgXG4gICAgdmFsaWRUaW1lc3RhbXBzLnB1c2gobm93KTtcbiAgICB0aGlzLnJlcXVlc3RzLnNldChpZGVudGlmaWVyLCB2YWxpZFRpbWVzdGFtcHMpO1xuICAgIFxuICAgIC8vIENsZWFuIHVwIG9sZCBlbnRyaWVzIHBlcmlvZGljYWxseVxuICAgIGlmIChNYXRoLnJhbmRvbSgpIDwgMC4wMSkgeyAvLyAxJSBjaGFuY2UgdG8gY2xlYW4gdXBcbiAgICAgIHRoaXMuY2xlYW51cCgpO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBcbiAgY2xlYW51cCgpIHtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IHdpbmRvd1N0YXJ0ID0gbm93IC0gdGhpcy53aW5kb3dNcztcbiAgICBcbiAgICBmb3IgKGNvbnN0IFtpZGVudGlmaWVyLCB0aW1lc3RhbXBzXSBvZiB0aGlzLnJlcXVlc3RzLmVudHJpZXMoKSkge1xuICAgICAgY29uc3QgdmFsaWRUaW1lc3RhbXBzID0gdGltZXN0YW1wcy5maWx0ZXIodHMgPT4gdHMgPiB3aW5kb3dTdGFydCk7XG4gICAgICBcbiAgICAgIGlmICh2YWxpZFRpbWVzdGFtcHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRoaXMucmVxdWVzdHMuZGVsZXRlKGlkZW50aWZpZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5yZXF1ZXN0cy5zZXQoaWRlbnRpZmllciwgdmFsaWRUaW1lc3RhbXBzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICBzYW5pdGl6ZUhUTUwsXG4gIHNhbml0aXplVGV4dCxcbiAgc2FuaXRpemVFbWFpbCxcbiAgc2FuaXRpemVVUkwsXG4gIHNhbml0aXplRmlsZU5hbWUsXG4gIHNhbml0aXplRmllbGROYW1lLFxuICBzYW5pdGl6ZU51bWJlcixcbiAgc2FuaXRpemVBcnJheSxcbiAgdmFsaWRhdGVGaWxlVXBsb2FkLFxuICBnZW5lcmF0ZVNlY3VyZVRva2VuLFxuICB2YWxpZGF0ZUNTUkZUb2tlbixcbiAgc2FuaXRpemVTUUxJZGVudGlmaWVyLFxuICBSYXRlTGltaXRlclxufTsiXSwibmFtZXMiOlsiRE9NUHVyaWZ5Iiwic2FuaXRpemVIVE1MIiwiZGlydHkiLCJjb25maWciLCJBTExPV0VEX1RBR1MiLCJBTExPV0VEX0FUVFIiLCJBTExPV19EQVRBX0FUVFIiLCJBTExPV19VTktOT1dOX1BST1RPQ09MUyIsIlNBRkVfRk9SX1RFTVBMQVRFUyIsIldIT0xFX0RPQ1VNRU5UIiwiUkVUVVJOX0RPTSIsIlJFVFVSTl9ET01fRlJBR01FTlQiLCJSRVRVUk5fVFJVU1RFRF9UWVBFIiwiRk9SQ0VfQk9EWSIsIlNBTklUSVpFX0RPTSIsIklOX1BMQUNFIiwiVVNFX1BST0ZJTEVTIiwiQUxMT1dfQVJJQV9BVFRSIiwiRElTQUxMT1dFRF9UQUdTIiwic2FuaXRpemUiLCJzYW5pdGl6ZVRleHQiLCJpbnB1dCIsIlN0cmluZyIsImRlY29kZWQiLCJyZXBsYWNlIiwidHJpbSIsInNhbml0aXplRW1haWwiLCJlbWFpbCIsImVtYWlsUmVnZXgiLCJzYW5pdGl6ZWQiLCJ0b0xvd2VyQ2FzZSIsInRlc3QiLCJFcnJvciIsImluY2x1ZGVzIiwic2FuaXRpemVVUkwiLCJ1cmwiLCJwYXJzZWQiLCJVUkwiLCJwcm90b2NvbCIsImhyZWYiLCJlcnJvciIsInNhbml0aXplRmlsZU5hbWUiLCJmaWxlTmFtZSIsInN1YnN0cmluZyIsInNhbml0aXplRmllbGROYW1lIiwibmFtZSIsInNhbml0aXplTnVtYmVyIiwibWluIiwibWF4IiwibnVtIiwiTnVtYmVyIiwiaXNOYU4iLCJzYW5pdGl6ZUFycmF5IiwiYWxsb3dlZFZhbHVlcyIsIkFycmF5IiwiaXNBcnJheSIsImZpbHRlciIsIml0ZW0iLCJ1bmRlZmluZWQiLCJtYXAiLCJ2YWxpZGF0ZUZpbGVVcGxvYWQiLCJmaWxlIiwib3B0aW9ucyIsIm1heFNpemUiLCJhbGxvd2VkVHlwZXMiLCJhbGxvd2VkRXh0ZW5zaW9ucyIsInNpemUiLCJsZW5ndGgiLCJ0eXBlIiwiaGFzVmFsaWRFeHRlbnNpb24iLCJzb21lIiwiZXh0IiwiZW5kc1dpdGgiLCJzcGxpdCIsInBhcnRzIiwiYmVmb3JlTGFzdCIsInN1c3BpY2lvdXNFeHRlbnNpb25zIiwiZ2VuZXJhdGVTZWN1cmVUb2tlbiIsImNoYXJzIiwidG9rZW4iLCJ3aW5kb3ciLCJjcnlwdG8iLCJhcnJheSIsIlVpbnQ4QXJyYXkiLCJnZXRSYW5kb21WYWx1ZXMiLCJpIiwicmVxdWlyZSIsInJhbmRvbUludCIsInZhbGlkYXRlQ1NSRlRva2VuIiwicmVxdWVzdFRva2VuIiwic2Vzc2lvblRva2VuIiwicmVzdWx0IiwiY2hhckNvZGVBdCIsInNhbml0aXplU1FMSWRlbnRpZmllciIsImlkZW50aWZpZXIiLCJSYXRlTGltaXRlciIsImNvbnN0cnVjdG9yIiwibWF4UmVxdWVzdHMiLCJ3aW5kb3dNcyIsInJlcXVlc3RzIiwiTWFwIiwiY2hlY2siLCJub3ciLCJEYXRlIiwid2luZG93U3RhcnQiLCJoYXMiLCJzZXQiLCJ0aW1lc3RhbXBzIiwiZ2V0IiwidmFsaWRUaW1lc3RhbXBzIiwidHMiLCJwdXNoIiwiTWF0aCIsInJhbmRvbSIsImNsZWFudXAiLCJlbnRyaWVzIiwiZGVsZXRlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/security.js\n");

/***/ }),

/***/ "(rsc)/./lib/supabase.js":
/*!*************************!*\
  !*** ./lib/supabase.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://eycgzjqwowrdmjlzqqyg.supabase.co\" || 0;\nconst supabasePublishableKey = \"sb_publishable_eG0lH_ACpyOjqG44mN_5PA_1-oFLr5n\" || 0;\n// Only check for environment variables in production or when actually using the client\nlet supabase = null;\nif (supabaseUrl && supabasePublishableKey) {\n    supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabasePublishableKey);\n} else if (false) {}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBcUQ7QUFFckQsTUFBTUMsY0FBY0MsMENBQW9DLElBQUk7QUFDNUQsTUFBTUcseUJBQXlCSCxnREFBZ0QsSUFBSTtBQUVuRix1RkFBdUY7QUFDdkYsSUFBSUssV0FBVztBQUVmLElBQUlOLGVBQWVJLHdCQUF3QjtJQUN6Q0UsV0FBV1AsbUVBQVlBLENBQUNDLGFBQWFJO0FBQ3ZDLE9BQU8sSUFBSUgsS0FBeUIsRUFBYyxFQUVqRDtBQUVtQiIsInNvdXJjZXMiOlsid2VicGFjazovL2N1c3RvbS1mb3Jtcy8uL2xpYi9zdXBhYmFzZS5qcz8xNTk4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XG5cbmNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIHx8ICcnO1xuY29uc3Qgc3VwYWJhc2VQdWJsaXNoYWJsZUtleSA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1BVQkxJU0hBQkxFX0tFWSB8fCAnJztcblxuLy8gT25seSBjaGVjayBmb3IgZW52aXJvbm1lbnQgdmFyaWFibGVzIGluIHByb2R1Y3Rpb24gb3Igd2hlbiBhY3R1YWxseSB1c2luZyB0aGUgY2xpZW50XG5sZXQgc3VwYWJhc2UgPSBudWxsO1xuXG5pZiAoc3VwYWJhc2VVcmwgJiYgc3VwYWJhc2VQdWJsaXNoYWJsZUtleSkge1xuICBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VQdWJsaXNoYWJsZUtleSk7XG59IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcbiAgY29uc29sZS5lcnJvcignV2FybmluZzogU3VwYWJhc2UgZW52aXJvbm1lbnQgdmFyaWFibGVzIGFyZSBtaXNzaW5nJyk7XG59XG5cbmV4cG9ydCB7IHN1cGFiYXNlIH07Il0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsInN1cGFiYXNlUHVibGlzaGFibGVLZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9QVUJMSVNIQUJMRV9LRVkiLCJzdXBhYmFzZSIsImNvbnNvbGUiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/dompurify","vendor-chunks/resend","vendor-chunks/isomorphic-dompurify"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fresponses%2Froute&page=%2Fapi%2Fresponses%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fresponses%2Froute.js&appDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Fcustom-forms%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frosspalmer%2FRoss%20GitHub%20Projects%2Fcustom-forms&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();