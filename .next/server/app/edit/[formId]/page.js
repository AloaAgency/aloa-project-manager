(()=>{var e={};e.id=809,e.ids=[809],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8180:(e,a,t)=>{"use strict";t.r(a),t.d(a,{GlobalError:()=>o.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=t(482),l=t(9108),r=t(2563),o=t.n(r),i=t(8300),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);t.d(a,n);let d=["",{children:["edit",{children:["[formId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,4373)),"/Users/rosspalmer/Ross GitHub Projects/custom-forms/app/edit/[formId]/page.js"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,3384)),"/Users/rosspalmer/Ross GitHub Projects/custom-forms/app/layout.js"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/rosspalmer/Ross GitHub Projects/custom-forms/app/edit/[formId]/page.js"],m="/edit/[formId]/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/edit/[formId]/page",pathname:"/edit/[formId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},4030:(e,a,t)=>{Promise.resolve().then(t.bind(t,8273))},9938:(e,a,t)=>{Promise.resolve().then(t.bind(t,4669))},293:(e,a,t)=>{Promise.resolve().then(t.t.bind(t,2583,23)),Promise.resolve().then(t.t.bind(t,6840,23)),Promise.resolve().then(t.t.bind(t,8771,23)),Promise.resolve().then(t.t.bind(t,3225,23)),Promise.resolve().then(t.t.bind(t,9295,23)),Promise.resolve().then(t.t.bind(t,3982,23))},8273:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>u});var s=t(2295),l=t(3729),r=t(2254),o=t(7075);let i=(0,o.Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),n=(0,o.Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var d=t(5269),c=t(6075),m=t(4669),x=t(9491);function u(){let e=(0,r.useParams)(),a=(0,r.useRouter)(),[t,o]=(0,l.useState)(null),[u,p]=(0,l.useState)([]),[h,f]=(0,l.useState)(""),[b,g]=(0,l.useState)(!0),[y,j]=(0,l.useState)(!1),[v,N]=(0,l.useState)(!1);(0,l.useEffect)(()=>{k()},[e.formId]);let k=async()=>{try{let a=await fetch(`/api/forms/by-id/${e.formId}`);if(!a.ok)throw Error("Failed to fetch form");let t=await a.json();o(t),p(t.form_fields||[]),f(t.title||"")}catch(e){console.error("Error fetching form:",e),m.default.error("Failed to load form"),a.push("/dashboard")}finally{g(!1)}},w=(e,a,t)=>{p(u.map(s=>s.id===e?{...s,[a]:t}:s)),N(!0)},P=e=>{f(e),N(!0)},_=async()=>{j(!0);try{if(!(await fetch(`/api/forms/edit-fields/${e.formId}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({fields:u,title:h})})).ok)throw Error("Failed to update form");m.default.success("Form updated successfully!"),N(!1)}catch(e){console.error("Error updating form:",e),m.default.error("Failed to update form")}finally{j(!1)}};return b?s.jsx("div",{className:"min-h-screen bg-gradient-subtle flex items-center justify-center",children:s.jsx(x.Z,{message:"Loading form editor..."})}):t?(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-subtle",children:[s.jsx("div",{className:"bg-aloa-black text-aloa-white shadow-lg sticky top-0 z-10",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>a.push("/dashboard"),className:"p-2 hover:bg-aloa-white/10 rounded-lg transition-colors",children:s.jsx(i,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{children:[s.jsx("h1",{className:"text-xl font-display font-bold",children:"Edit Form"}),s.jsx("p",{className:"text-sm text-aloa-white/70",children:"Update form details and fields"})]})]}),(0,s.jsxs)("button",{onClick:_,disabled:!v||y,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ${v&&!y?"bg-aloa-white text-aloa-black hover:bg-opacity-90":"bg-aloa-white/20 text-aloa-white/50 cursor-not-allowed"}`,children:[s.jsx(n,{className:"w-4 h-4"}),y?"Saving...":"Save Changes"]})]})})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,s.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 flex items-start gap-3",children:[s.jsx(d.Z,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{className:"text-sm text-amber-800",children:[s.jsx("p",{className:"font-semibold mb-1",children:"Important: Only edit text content"}),s.jsx("p",{children:"Changing field types or structure may break existing responses. Only edit labels, placeholders, and help text."})]})]})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"bg-aloa-white rounded-lg shadow-md p-6 mb-6",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[s.jsx(c.Z,{className:"w-5 h-5 text-aloa-black mt-2"}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-medium text-aloa-gray mb-2",children:"Form Title"}),s.jsx("input",{type:"text",value:h,onChange:e=>P(e.target.value),className:"w-full px-4 py-2 border-2 border-aloa-sand rounded-lg focus:border-aloa-black focus:outline-none transition-colors text-lg font-medium",placeholder:"Enter form title..."})]})]})})}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12",children:[s.jsx("h2",{className:"text-lg font-semibold text-aloa-black mb-4",children:"Form Fields"}),s.jsx("div",{className:"space-y-4",children:u.map((e,a)=>s.jsx("div",{className:"bg-aloa-white rounded-lg shadow-md p-6",children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-10 h-10 bg-aloa-black text-aloa-white rounded-full flex items-center justify-center font-bold",children:a+1})}),(0,s.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-aloa-gray mb-1",children:"Question / Label"}),s.jsx("input",{type:"text",value:e.field_label||"",onChange:a=>w(e.id,"field_label",a.target.value),className:"w-full px-4 py-2 border-2 border-aloa-sand rounded-lg focus:border-aloa-black focus:outline-none transition-colors"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-aloa-gray mb-1",children:"Field Type"}),s.jsx("div",{className:"px-4 py-2 bg-gray-100 border-2 border-gray-200 rounded-lg text-gray-600",children:e.field_type})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-aloa-gray mb-1",children:"Field Name"}),s.jsx("div",{className:"px-4 py-2 bg-gray-100 border-2 border-gray-200 rounded-lg text-gray-600 font-mono text-sm",children:e.field_name})]})]}),["text","email","tel","url","number","textarea"].includes(e.field_type)&&(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-aloa-gray mb-1",children:"Placeholder Text"}),s.jsx("input",{type:"text",value:e.placeholder||"",onChange:a=>w(e.id,"placeholder",a.target.value),className:"w-full px-4 py-2 border-2 border-aloa-sand rounded-lg focus:border-aloa-black focus:outline-none transition-colors",placeholder:"Enter placeholder text..."})]}),["select","radio","checkbox"].includes(e.field_type)&&e.options&&(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-aloa-gray mb-1",children:"Options"}),s.jsx("textarea",{value:e.options.join("\n"),onChange:a=>w(e.id,"options",a.target.value.split("\n").filter(e=>e.trim())),className:"w-full px-4 py-2 border-2 border-aloa-sand rounded-lg focus:border-aloa-black focus:outline-none transition-colors",rows:e.options.length+1,placeholder:"One option per line..."})]}),(0,s.jsxs)("div",{className:"flex items-center gap-6 text-sm",children:[void 0!==e.required&&(0,s.jsxs)("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",checked:e.required,onChange:a=>w(e.id,"required",a.target.checked),className:"rounded border-aloa-sand text-aloa-black focus:ring-aloa-black"}),s.jsx("span",{className:"text-aloa-gray",children:"Required field"})]}),e.section&&(0,s.jsxs)("div",{className:"text-aloa-gray",children:["Section: ",s.jsx("span",{className:"font-medium text-aloa-black",children:e.section})]})]})]})]})},e.id))})]})]}):null}},9491:(e,a,t)=>{"use strict";t.d(a,{Z:()=>r});var s=t(2295),l=t(5716);function r({message:e="Loading...",size:a="default"}){let t={small:"w-8 h-8",default:"w-16 h-16",large:"w-24 h-24"};return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[200px] p-8",children:[s.jsx(l.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},className:"relative",children:(0,s.jsxs)("div",{className:`${t[a]} relative`,children:[s.jsx("div",{className:"absolute inset-0 bg-aloa-black rounded-full animate-ping opacity-20"}),s.jsx("div",{className:`${t[a]} bg-aloa-black rounded-full animate-pulse`})]})}),e&&s.jsx(l.E.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-4 text-sm font-display uppercase tracking-wider text-aloa-gray",children:e})]})}},5269:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(7075).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6075:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});let s=(0,t(7075).Z)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},4373:(e,a,t)=>{"use strict";t.r(a),t.d(a,{$$typeof:()=>r,__esModule:()=>l,default:()=>o});let s=(0,t(6843).createProxy)(String.raw`/Users/rosspalmer/Ross GitHub Projects/custom-forms/app/edit/[formId]/page.js`),{__esModule:l,$$typeof:r}=s,o=s.default},3384:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>o,metadata:()=>r});var s=t(5036);t(7272);var l=t(9636);let r={title:"Aloa Custom Form Maker - Beautiful Forms from Markdown",description:"Create beautiful forms from markdown files with unique URLs"};function o({children:e}){return s.jsx("html",{lang:"en",children:(0,s.jsxs)("body",{className:"bg-aloa-cream",children:[s.jsx(l.x7,{position:"top-right",toastOptions:{style:{background:"#0A0A0A",color:"#FAF6F0",borderRadius:"0",border:"2px solid #0A0A0A"}}}),e]})})}},7272:()=>{}};var a=require("../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[638,525,639],()=>t(8180));module.exports=s})();