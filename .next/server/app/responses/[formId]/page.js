(()=>{var e={};e.id=881,e.ids=[881],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7736:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var a=s(482),r=s(9108),n=s(2563),i=s.n(n),o=s(8300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d=["",{children:["responses",{children:["[formId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5916)),"/Users/rosspalmer/Ross GitHub Projects/custom-forms/app/responses/[formId]/page.js"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,3384)),"/Users/rosspalmer/Ross GitHub Projects/custom-forms/app/layout.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/rosspalmer/Ross GitHub Projects/custom-forms/app/responses/[formId]/page.js"],m="/responses/[formId]/page",p={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/responses/[formId]/page",pathname:"/responses/[formId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9938:(e,t,s)=>{Promise.resolve().then(s.bind(s,4669))},1211:(e,t,s)=>{Promise.resolve().then(s.bind(s,5514))},293:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,6840,23)),Promise.resolve().then(s.t.bind(s,8771,23)),Promise.resolve().then(s.t.bind(s,3225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,3982,23))},5514:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var a=s(2295),r=s(3729),n=s(2254),i=s(7075);let o=(0,i.Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);var l=s(8271);let d=(0,i.Z)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),c=(0,i.Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var m=s(5716),p=s(9491),u=s(4669);function h(){let e=(0,n.useParams)(),t=(0,n.useRouter)(),[s,i]=(0,r.useState)(null),[h,x]=(0,r.useState)([]),[f,b]=(0,r.useState)(!0),[g,y]=(0,r.useState)(null);(0,r.useEffect)(()=>{j()},[e.formId]);let j=async()=>{try{let[t,s]=await Promise.all([fetch(`/api/forms/by-id/${e.formId}`),fetch(`/api/responses?formId=${e.formId}`)]);if(!t.ok||!s.ok)throw Error("Failed to fetch data");let a=await t.json(),r=await s.json();i(a),x(r)}catch(e){console.error("Error fetching data:",e),u.default.error("Failed to load responses"),t.push("/dashboard")}finally{b(!1)}},v=async e=>{if(confirm("Are you sure you want to delete this response? This action cannot be undone."))try{if(!(await fetch(`/api/responses/${e}`,{method:"DELETE"})).ok)throw Error("Failed to delete response");u.default.success("Response deleted successfully"),x(h.filter(t=>t._id!==e))}catch(e){console.error("Error deleting response:",e),u.default.error("Failed to delete response")}},k=e=>new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),w=e=>{y(g===e?null:e)};return f?a.jsx("div",{className:"min-h-screen bg-gradient-subtle flex items-center justify-center",children:a.jsx(p.Z,{message:"Loading responses..."})}):s?a.jsx("div",{className:"min-h-screen bg-gradient-subtle",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12",children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("button",{onClick:()=>t.push("/dashboard"),className:"mb-4 text-aloa-black hover:text-aloa-gray transition-colors font-display uppercase tracking-wider text-sm",children:"← Back to Dashboard"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl sm:text-3xl font-display font-bold text-aloa-black uppercase tracking-tight mb-2",children:s.title}),a.jsx("p",{className:"text-sm font-display uppercase tracking-wider",children:(0,a.jsxs)("span",{className:"bg-aloa-sand px-3 py-1 text-aloa-black inline-block",children:[h.length," response",1!==h.length?"s":""]})})]}),h.length>0&&(0,a.jsxs)("button",{onClick:()=>{if(!s||0===h.length){u.default.error("No data to export");return}let e=e=>{if(null==e)return"";let t=String(e);return t.includes(",")||t.includes('"')||t.includes("\n")?`"${t.replace(/"/g,'""')}"`:t},t=[["Submitted At",...s.fields.map(e=>e.label)].map(e).join(","),...h.map(t=>[k(t.submittedAt),...s.fields.map(e=>{let s=t.data instanceof Map?t.data.get(e.name):t.data[e.name]||"";return Array.isArray(s)?s.join("; "):s})].map(e).join(","))].join("\n"),a=new Blob([t],{type:"text/csv"}),r=URL.createObjectURL(a),n=document.createElement("a");n.href=r,n.download=`${s.title.toLowerCase().replace(/\s+/g,"-")}-responses.csv`,n.click(),URL.revokeObjectURL(r),u.default.success("Exported to CSV")},className:"btn-secondary flex items-center justify-center",children:[a.jsx(o,{className:"w-5 h-5 mr-2"}),"Export CSV"]})]})]}),0===h.length?(0,a.jsxs)("div",{className:"card text-center py-16",children:[a.jsx("p",{className:"text-xl text-aloa-gray mb-8 font-body",children:"No responses yet"}),a.jsx("button",{onClick:()=>window.open(`/forms/${s.urlId}`,"_blank"),className:"btn-primary mx-auto",children:"View Form"})]}):a.jsx("div",{className:"space-y-3 sm:space-y-4",children:h.map(e=>(0,a.jsxs)("div",{className:"card hover:shadow-xl transition-all duration-300",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex-1 cursor-pointer",onClick:()=>w(e._id),children:(0,a.jsxs)("p",{className:"text-sm font-display uppercase tracking-wider text-aloa-black",children:["Submitted ",k(e.submittedAt)]})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>v(e._id),className:"p-2 hover:bg-red-100 text-red-600 hover:text-red-700 transition-all duration-200",title:"Delete Response",children:a.jsx(l.Z,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>w(e._id),className:"p-2 hover:bg-aloa-sand transition-all duration-200",children:g===e._id?a.jsx(d,{className:"w-5 h-5 transition-transform"}):a.jsx(c,{className:"w-5 h-5 transition-transform"})})]})]}),g===e._id&&a.jsx(m.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"mt-6 pt-6 border-t-2 border-aloa-sand",children:a.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:s.fields.map(t=>{let s=e.data instanceof Map?e.data.get(t.name):e.data[t.name];return!s||Array.isArray(s)&&0===s.length?null:(0,a.jsxs)("div",{className:"bg-aloa-sand p-3",children:[a.jsx("p",{className:"text-xs font-display uppercase tracking-wider text-aloa-gray mb-1",children:t.label}),a.jsx("p",{className:"text-aloa-black font-body break-words",children:Array.isArray(s)?s.join(", "):s})]},t._id||t.id)})})})]},e._id))})]})}):null}},9491:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var a=s(2295),r=s(5716);function n({message:e="Loading...",size:t="default"}){let s={small:"w-8 h-8",default:"w-16 h-16",large:"w-24 h-24"};return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[200px] p-8",children:[a.jsx(r.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},className:"relative",children:(0,a.jsxs)("div",{className:`${s[t]} relative`,children:[a.jsx("div",{className:"absolute inset-0 bg-aloa-black rounded-full animate-ping opacity-20"}),a.jsx("div",{className:`${s[t]} bg-aloa-black rounded-full animate-pulse`})]})}),e&&a.jsx(r.E.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-4 text-sm font-display uppercase tracking-wider text-aloa-gray",children:e})]})}},8271:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(7075).Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},3384:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,metadata:()=>n});var a=s(5036);s(7272);var r=s(9636);let n={title:"Aloa Custom Form Maker - Beautiful Forms from Markdown",description:"Create beautiful forms from markdown files with unique URLs"};function i({children:e}){return a.jsx("html",{lang:"en",children:(0,a.jsxs)("body",{className:"bg-aloa-cream",children:[a.jsx(r.x7,{position:"top-right",toastOptions:{style:{background:"#0A0A0A",color:"#FAF6F0",borderRadius:"0",border:"2px solid #0A0A0A"}}}),e]})})}},5916:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>r,default:()=>i});let a=(0,s(6843).createProxy)(String.raw`/Users/rosspalmer/Ross GitHub Projects/custom-forms/app/responses/[formId]/page.js`),{__esModule:r,$$typeof:n}=a,i=a.default},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[638,525,639],()=>s(7736));module.exports=a})();