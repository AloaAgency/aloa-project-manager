(()=>{var e={};e.id=5806,e.ids=[5806],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},50116:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>i.Z,__next_app__:()=>p,originalPathname:()=>d,pages:()=>c,routeModule:()=>m,tree:()=>l}),s(23529),s(68874),s(20784),s(35866);var t=s(23191),r=s(88716),i=s(87506),o=s(95231),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);s.d(a,n);let l=["",{children:["ai-analysis",{children:["[formId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,23529)),"/Users/rosspalmer/Ross GitHub Projects/aloa-web-design-project-manager/app/ai-analysis/[formId]/page.js"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,68874)),"/Users/rosspalmer/Ross GitHub Projects/aloa-web-design-project-manager/app/layout.js"],error:[()=>Promise.resolve().then(s.bind(s,20784)),"/Users/rosspalmer/Ross GitHub Projects/aloa-web-design-project-manager/app/error.js"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/rosspalmer/Ross GitHub Projects/aloa-web-design-project-manager/app/ai-analysis/[formId]/page.js"],d="/ai-analysis/[formId]/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/ai-analysis/[formId]/page",pathname:"/ai-analysis/[formId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},35241:(e,a,s)=>{Promise.resolve().then(s.bind(s,54157))},54157:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>w});var t=s(10326),r=s(17577),i=s(35047),o=s(98360),n=s(31540),l=s(5932),c=s(21405),d=s(1572),p=s(24061),m=s(17069),u=s(30361),h=s(24230);let x=(0,s(62881).Z)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var g=s(55795),b=s(79392),f=s(56813),y=s(40381);function v(){let e=(0,i.useParams)(),a=(0,i.useRouter)(),[f,v]=(0,r.useState)(null),[w,j]=(0,r.useState)(null),[k,N]=(0,r.useState)(!0),[A,S]=(0,r.useState)(!1),[C,E]=(0,r.useState)(!1),[Z,$]=(0,r.useState)({recipientEmail:"",recipientName:"",ccEmails:"",customSubject:"",isClientFacing:!0}),[P,F]=(0,r.useState)(!1),[R,M]=(0,r.useState)(null),[q,I]=(0,r.useState)(!1),T=async()=>{w&&f&&(document.body.classList.add("printing-pdf"),window.print(),setTimeout(()=>{document.body.classList.remove("printing-pdf")},100),y.ZP.success("Opening print dialog - save as PDF for best results"))},L=async()=>{try{let{generateEmailPreview:e,parseAnalysisText:a}=await s.e(9516).then(s.bind(s,89516)),t=D(w,Z.isClientFacing),r={summary:w.executiveSummary||"",consensusAreas:w.consensusAreas||[],divergenceAreas:w.conflictAreas?w.conflictAreas.map(e=>({topic:e.topic,viewpoints:e.viewpoints?e.viewpoints.map(e=>({label:e.percentage>50?"Majority view":e.percentage>30?"Significant perspective":"Alternative approach",percentage:e.percentage,description:e.description})):[]})):[],synthesis:t.includes("## Synthesis")?t.split("## Synthesis")[1].split("##")[0].trim():"",recommendations:!Z.isClientFacing&&w.recommendations?w.recommendations.map(e=>`${e.title}: ${e.description}`):[],statistics:{totalResponses:w.totalResponses||0,consensusScore:w.consensusScore||0,completionRate:w.completionRate,averageTime:w.averageTime}},i={html:_(f.title,r,Z.recipientName,Z.isClientFacing),preview:{subject:Z.customSubject||(Z.isClientFacing?`Your Input Summary: ${f.title}`:`AI Analysis Report: ${f.title}`),greeting:Z.recipientName?`Dear ${Z.recipientName},`:"Hello,",isClientFacing:Z.isClientFacing,sections:[]}};M(i),I(!0)}catch(e){console.error("Error generating preview:",e),y.ZP.error("Failed to generate preview")}},_=(e,a,s,t)=>"",z=async()=>{if(!Z.recipientEmail){y.ZP.error("Please enter a recipient email");return}F(!0);try{let a={summary:w.executiveSummary||"",consensusAreas:w.consensusAreas||[],divergenceAreas:w.conflictAreas?w.conflictAreas.map(e=>({topic:e.topic,viewpoints:e.viewpoints?e.viewpoints.map(e=>({label:e.percentage>50?"Majority view":e.percentage>30?"Significant perspective":"Alternative approach",percentage:e.percentage,description:e.description})):[]})):[],synthesis:Z.isClientFacing?G(w):"",recommendations:!Z.isClientFacing&&w.recommendations?w.recommendations.map(e=>`${e.title}: ${e.description}`):[],statistics:{totalResponses:w.totalResponses||0,consensusScore:w.consensusScore||0}},s=JSON.stringify(a),t=await fetch(`/api/ai-analysis/${e.formId}/email`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipientEmail:Z.recipientEmail,recipientName:Z.recipientName,analysisText:s,formTitle:f.title,ccEmails:Z.ccEmails?Z.ccEmails.split(",").map(e=>e.trim()).filter(Boolean):[],customSubject:Z.customSubject||(Z.isClientFacing?`Your Input Summary: ${f.title}`:`AI Analysis Report: ${f.title}`),isClientFacing:Z.isClientFacing})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to send email")}y.ZP.success("Analysis email sent successfully!"),E(!1),$({recipientEmail:"",recipientName:"",ccEmails:"",customSubject:"",isClientFacing:!0})}catch(e){console.error("Error sending email:",e),y.ZP.error(e.message||"Failed to send email")}finally{F(!1)}},G=e=>{let a="";if(e.consensusAreas&&e.consensusAreas.length>0){let s=e.consensusAreas[0];a+=`**Build on Strong Foundations:** Your team's ${s.agreementPercentage||"strong"}% agreement on ${s.topic.toLowerCase()} provides a solid foundation. This should be your north star as you move forward.

`}e.conflictAreas&&e.conflictAreas.length>0&&(a+="**Embrace Diverse Perspectives:** The varying viewpoints aren't obstacles but rather indicators of a thoughtful team considering multiple angles. ",e.conflictAreas.some(e=>e.viewpoints&&e.viewpoints.some(e=>e.percentage>40&&e.percentage<60))?a+="With relatively even splits on certain topics, consider pilot programs or A/B testing to validate different approaches.":a+="With clear majority/minority splits, consider implementing the majority view while creating specific accommodations for minority concerns.",a+=`

`),a+=`**Immediate Next Steps:**
1. Focus first on areas with ${e.consensusScore||80}% or higher agreement to build momentum
2. Create working groups for areas with divergent views to develop integrated solutions
3. Establish success metrics that reflect both consensus priorities and diverse perspectives

`;let s=e.consensusScore||0;return a+(`**Key Insight:** Your team shows ${s}% overall alignment, which is `+(s>70?"exceptionally strong":s>50?"healthy":"an opportunity for further dialogue"))+". The areas of difference are well-defined and manageable, suggesting a team that's thoughtfully engaged with the challenges at hand."},D=(e,a=!1)=>{let s="";if(e.executiveSummary&&(s+=`## Executive Summary
${e.executiveSummary}

`),a){if(e.consensusAreas&&e.consensusAreas.length>0&&(s+=`## Where Your Team Strongly Agrees

`,e.consensusAreas.forEach(e=>{s+=`### ${e.topic}
${e.description}
*${e.agreementPercentage}% of participants share this view*

`,e.description.length>50&&(s+=`This consensus suggests that ${e.topic.toLowerCase()} is a critical priority that should anchor your strategy moving forward.

`)})),e.conflictAreas&&e.conflictAreas.length>0&&(s+=`## Where Perspectives Differ

These differences aren't roadblocksâ€”they're opportunities to create a more comprehensive solution that addresses diverse needs:

`,e.conflictAreas.forEach(e=>{s+=`### ${e.topic}

Your team has identified multiple valid approaches:

`,e.viewpoints.forEach((e,a)=>{s+=`**${0===a?"One perspective":1===a?"Another view":"An additional approach"} (${e.percentage}% of team):** ${e.description}

`}),s+=`*Synthesis:* These different viewpoints on ${e.topic.toLowerCase()} suggest an opportunity to implement a hybrid approach that leverages the strengths of each perspective.

`})),s+=`## Synthesis & Recommended Path Forward

`,e.consensusAreas&&e.consensusAreas.length>0){let a=e.consensusAreas[0];s+=`**Build on Strong Foundations:** Your team's ${a.agreementPercentage}% agreement on ${a.topic.toLowerCase()} provides a solid foundation. This should be your north star as you move forward.

`}e.conflictAreas&&e.conflictAreas.length>0&&(s+="**Embrace Diverse Perspectives:** The varying viewpoints aren't obstacles but rather indicators of a thoughtful team considering multiple angles. ",e.conflictAreas.some(e=>e.viewpoints.some(e=>e.percentage>40&&e.percentage<60))?s+=`With relatively even splits on certain topics, consider pilot programs or A/B testing to validate different approaches.

`:s+=`With clear majority/minority splits, consider implementing the majority view while creating specific accommodations for minority concerns.

`),s+=`**Immediate Next Steps:**
1. Focus first on areas with ${e.consensusScore}% or higher agreement to build momentum
2. Create working groups for areas with divergent views to develop integrated solutions
3. Establish success metrics that reflect both consensus priorities and diverse perspectives

**Key Insight:** Your team shows ${e.consensusScore}% overall alignment, which is ${e.consensusScore>70?"exceptionally strong":e.consensusScore>50?"healthy":"an opportunity for further dialogue"}. The areas of difference are well-defined and manageable, suggesting a team that's thoughtfully engaged with the challenges at hand.

`}else e.consensusAreas&&e.consensusAreas.length>0&&(s+=`## Key Insights
`,e.consensusAreas.forEach(e=>{s+=`- ${e.topic}: ${e.description} (${e.agreementPercentage}% agreement)
`}),s+="\n"),e.conflictAreas&&e.conflictAreas.length>0&&(s+=`## Areas of Divergence
`,e.conflictAreas.forEach(e=>{s+=`- ${e.topic}:
`,e.viewpoints.forEach(e=>{s+=`  - ${e.percentage}%: ${e.description}
`})}),s+="\n"),e.recommendations&&e.recommendations.length>0&&(s+=`## Recommendations
`,e.recommendations.forEach((e,a)=>{s+=`${a+1}. ${e.title}: ${e.description}`,e.priority&&(s+=` (${e.priority} priority)`),s+="\n"}),s+="\n");return s+=`## Response Statistics
Total Responses: ${e.totalResponses}
Consensus Level: ${e.consensusScore}%
Confidence Score: ${e.confidence}%
`},Y=async()=>{S(!0);try{let a=await fetch(`/api/ai-analysis/${e.formId}`,{method:"POST"});if(!a.ok)throw Error("Analysis failed");let s=await a.json();j(s),y.ZP.success("Analysis complete!")}catch(e){console.error("Error running analysis:",e),y.ZP.error("Failed to analyze responses")}finally{S(!1)}};return k?t.jsx("div",{className:"min-h-screen bg-gradient-subtle flex items-center justify-center",children:t.jsx(b.Z,{message:"Loading form data..."})}):f?t.jsx("div",{className:"min-h-screen bg-gradient-subtle",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("button",{onClick:()=>a.push("/dashboard"),className:"mb-6 inline-flex items-center gap-2 text-aloa-black hover:text-aloa-gray transition-colors font-display uppercase tracking-wider text-xs sm:text-sm group",children:[t.jsx("svg",{className:"w-4 h-4 transition-transform group-hover:-translate-x-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),t.jsx("span",{children:"Back to Dashboard"})]}),(0,t.jsxs)("div",{className:"text-center mb-8",children:[t.jsx("h1",{className:"text-3xl sm:text-4xl font-display font-bold text-aloa-black uppercase tracking-tight mb-2",children:f.title}),(0,t.jsxs)("p",{className:"text-lg text-aloa-gray font-body",children:["Analysis based on ",w?w.totalResponses:"..."," responses"]})]}),(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-start justify-between gap-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-pink-500 shadow-lg",children:t.jsx(o.Z,{className:"w-6 h-6 text-white"})}),t.jsx("span",{className:"text-sm font-display uppercase tracking-wider text-aloa-gray",children:"AI-Powered Insights"})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 w-full lg:w-auto",children:[w&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("button",{onClick:T,className:"px-6 py-3 bg-transparent text-aloa-black border-2 border-aloa-black font-display uppercase tracking-wider hover:bg-aloa-black hover:text-aloa-cream transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-aloa-black focus:ring-offset-2 focus:ring-offset-aloa-cream flex items-center justify-center gap-2 w-full sm:w-auto",children:[t.jsx(n.Z,{className:"w-5 h-5"}),t.jsx("span",{children:"Download PDF"})]}),(0,t.jsxs)("button",{onClick:()=>E(!0),className:"px-6 py-3 bg-transparent text-aloa-black border-2 border-aloa-black font-display uppercase tracking-wider hover:bg-aloa-black hover:text-aloa-cream transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-aloa-black focus:ring-offset-2 focus:ring-offset-aloa-cream flex items-center justify-center gap-2 w-full sm:w-auto",children:[t.jsx(l.Z,{className:"w-5 h-5"}),t.jsx("span",{children:"Send"})]})]}),t.jsx("button",{onClick:Y,disabled:A,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-display uppercase tracking-wider transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 focus:ring-offset-aloa-cream disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 w-full sm:w-auto",children:A?(0,t.jsxs)(t.Fragment,{children:[t.jsx(c.Z,{className:"w-5 h-5 animate-spin"}),t.jsx("span",{children:"Analyzing..."})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(d.Z,{className:"w-5 h-5"}),t.jsx("span",{children:w?"Re-analyze":"Start Analysis"})]})})]})]})]}),!w&&!A&&t.jsx("div",{className:"bg-aloa-white p-12 sm:p-16 border-2 border-aloa-black shadow-xl text-center",children:(0,t.jsxs)("div",{className:"max-w-md mx-auto",children:[t.jsx("div",{className:"mb-8 mx-auto w-24 h-24 bg-gradient-to-br from-purple-100 to-pink-100 border-2 border-purple-300 flex items-center justify-center",children:t.jsx(o.Z,{className:"w-12 h-12 text-purple-600"})}),t.jsx("h2",{className:"text-2xl sm:text-3xl font-display font-bold text-aloa-black mb-4 uppercase",children:"Ready to Analyze"}),t.jsx("p",{className:"text-aloa-gray mb-10 font-body text-sm sm:text-base leading-relaxed",children:"Generate AI-powered insights from your collected responses. The AI will identify areas of consensus, divergence, and provide actionable synthesis."}),(0,t.jsxs)("button",{onClick:Y,className:"px-8 py-4 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-display uppercase tracking-wider transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 focus:ring-offset-aloa-cream inline-flex items-center justify-center gap-2",children:[t.jsx(d.Z,{className:"w-5 h-5"}),t.jsx("span",{children:"Start Analysis"})]})]})}),A&&t.jsx("div",{className:"bg-aloa-white p-12 sm:p-16 border-2 border-aloa-black shadow-xl text-center",children:(0,t.jsxs)("div",{className:"max-w-md mx-auto",children:[t.jsx("div",{className:"mb-8",children:(0,t.jsxs)("div",{className:"relative w-24 h-24 mx-auto",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500 to-pink-500 animate-pulse"}),t.jsx("div",{className:"absolute inset-3 bg-white flex items-center justify-center",children:t.jsx(o.Z,{className:"w-10 h-10 text-purple-600 animate-pulse"})})]})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-display font-bold text-aloa-black mb-3 uppercase",children:"Analyzing Responses..."}),t.jsx("p",{className:"text-aloa-gray font-body text-sm sm:text-base",children:"Our AI is processing all responses to identify patterns and insights"})]})}),w&&(0,t.jsxs)(g.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[t.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 p-6 sm:p-8 border-2 border-purple-400 shadow-xl hover:shadow-2xl transition-all duration-300",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"p-2 bg-purple-600 rounded",children:t.jsx(d.Z,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{className:"flex-1",children:[t.jsx("h2",{className:"text-xl sm:text-2xl font-display font-bold text-aloa-black uppercase mb-4",children:"Executive Summary"}),t.jsx("p",{className:"text-aloa-gray font-body leading-relaxed text-sm sm:text-base",children:w.executiveSummary})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"bg-aloa-white p-6 sm:p-8 border-2 border-aloa-black shadow-lg hover:shadow-xl transition-all duration-300 text-center group hover:-translate-y-1",children:[t.jsx(p.Z,{className:"w-10 h-10 text-blue-500 mx-auto mb-3 group-hover:scale-110 transition-transform duration-300"}),t.jsx("p",{className:"text-3xl font-display font-bold text-aloa-black mb-1",children:w.totalResponses}),t.jsx("p",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-aloa-gray",children:"Total Responses"})]}),(0,t.jsxs)("div",{className:"bg-aloa-white p-6 sm:p-8 border-2 border-aloa-black shadow-lg hover:shadow-xl transition-all duration-300 text-center group hover:-translate-y-1",children:[t.jsx(m.Z,{className:"w-10 h-10 text-green-500 mx-auto mb-3 group-hover:scale-110 transition-transform duration-300"}),(0,t.jsxs)("p",{className:"text-3xl font-display font-bold text-aloa-black mb-1",children:[w.consensusScore,"%"]}),t.jsx("p",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-aloa-gray",children:"Consensus Level"})]}),(0,t.jsxs)("div",{className:"bg-aloa-white p-6 sm:p-8 border-2 border-aloa-black shadow-lg hover:shadow-xl transition-all duration-300 text-center group hover:-translate-y-1",children:[t.jsx(o.Z,{className:"w-10 h-10 text-purple-500 mx-auto mb-3 group-hover:scale-110 transition-transform duration-300"}),(0,t.jsxs)("p",{className:"text-3xl font-display font-bold text-aloa-black mb-1",children:[w.confidence,"%"]}),t.jsx("p",{className:"text-xs sm:text-sm font-display uppercase tracking-wider text-aloa-gray",children:"Confidence Score"})]})]}),w.consensusAreas&&w.consensusAreas.length>0&&(0,t.jsxs)("div",{className:"bg-aloa-white p-6 sm:p-8 border-2 border-aloa-black shadow-xl hover:shadow-2xl transition-all duration-300",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-2 bg-green-500 rounded",children:t.jsx(u.Z,{className:"w-6 h-6 text-white"})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-display font-bold text-aloa-black uppercase",children:"Areas of Agreement"})]}),t.jsx("div",{className:"space-y-4",children:w.consensusAreas.map((e,a)=>(0,t.jsxs)(g.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*a},className:"flex items-start gap-3 p-4 bg-green-50 border-2 border-green-300 hover:border-green-400 transition-all duration-200 hover:shadow-md",children:[t.jsx(h.Z,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-1"}),(0,t.jsxs)("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-display font-bold text-aloa-black uppercase text-sm sm:text-base mb-2",children:e.topic}),t.jsx("p",{className:"text-aloa-gray font-body text-sm sm:text-base leading-relaxed mb-2",children:e.description}),(0,t.jsxs)("span",{className:"inline-block text-xs font-display uppercase tracking-wider text-green-600 bg-green-100 px-2 py-1",children:[e.agreementPercentage,"% agreement"]})]})]},a))})]}),w.conflictAreas&&w.conflictAreas.length>0&&(0,t.jsxs)("div",{className:"bg-aloa-white p-6 sm:p-8 border-2 border-aloa-black shadow-xl hover:shadow-2xl transition-all duration-300",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-2 bg-orange-500 rounded",children:t.jsx(x,{className:"w-6 h-6 text-white"})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-display font-bold text-aloa-black uppercase",children:"Areas of Divergence"})]}),t.jsx("div",{className:"space-y-4",children:w.conflictAreas.map((e,a)=>(0,t.jsxs)(g.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*a},className:"p-4 bg-orange-50 border-2 border-orange-300 hover:border-orange-400 transition-all duration-200 hover:shadow-md",children:[t.jsx("h3",{className:"font-display font-bold text-aloa-black uppercase text-sm sm:text-base mb-3",children:e.topic}),t.jsx("div",{className:"space-y-3",children:e.viewpoints.map((e,a)=>t.jsx("div",{className:"pl-4 border-l-3 border-orange-400",children:(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsxs)("span",{className:"inline-block text-xs font-display uppercase tracking-wider text-orange-700 bg-orange-100 px-2 py-1",children:[e.percentage,"%"]}),t.jsx("p",{className:"text-sm sm:text-base text-aloa-gray font-body leading-relaxed flex-1",children:e.description})]})},a))})]},a))})]}),w.recommendations&&w.recommendations.length>0&&(0,t.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-purple-50 p-6 sm:p-8 border-2 border-blue-400 shadow-xl hover:shadow-2xl transition-all duration-300",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[t.jsx("div",{className:"p-2 bg-blue-600 rounded",children:t.jsx(m.Z,{className:"w-6 h-6 text-white"})}),t.jsx("h2",{className:"text-xl sm:text-2xl font-display font-bold text-aloa-black uppercase",children:"Actionable Recommendations"})]}),t.jsx("div",{className:"space-y-4",children:w.recommendations.map((e,a)=>(0,t.jsxs)(g.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*a},className:"flex items-start gap-3",children:[t.jsx("span",{className:"flex-shrink-0 w-10 h-10 bg-blue-600 text-white flex items-center justify-center font-display font-bold text-base",children:a+1}),(0,t.jsxs)("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-display font-bold text-aloa-black uppercase text-sm sm:text-base mb-2",children:e.title}),t.jsx("p",{className:"text-aloa-gray font-body text-sm sm:text-base leading-relaxed mb-2",children:e.description}),e.priority&&(0,t.jsxs)("span",{className:`inline-block px-3 py-1 text-xs font-display uppercase tracking-wider ${"high"===e.priority?"bg-red-100 text-red-700 border border-red-300":"medium"===e.priority?"bg-yellow-100 text-yellow-700 border border-yellow-300":"bg-green-100 text-green-700 border border-green-300"}`,children:[e.priority," priority"]})]})]},a))})]}),w.stakeholderMessage&&t.jsx("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 p-6 sm:p-8 border-2 border-indigo-400 shadow-xl hover:shadow-2xl transition-all duration-300",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"p-2 bg-indigo-600 rounded",children:t.jsx(p.Z,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("div",{className:"flex-1",children:[t.jsx("h2",{className:"text-xl sm:text-2xl font-display font-bold text-aloa-black uppercase mb-4",children:"Message to Stakeholders"}),(0,t.jsxs)("p",{className:"text-aloa-gray font-body leading-relaxed italic text-sm sm:text-base",children:['"',w.stakeholderMessage,'"']})]})]})})]}),C&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center p-4 z-50 overflow-y-auto",children:(0,t.jsxs)(g.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-aloa-white border-2 border-aloa-black shadow-2xl max-w-lg w-full my-8 max-h-[90vh] overflow-y-auto relative",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between sticky top-0 bg-aloa-white p-8 pb-4 border-b-2 border-aloa-black z-10",children:[t.jsx("h3",{className:"text-xl font-display font-bold text-aloa-black uppercase",children:"Send Analysis Report"}),t.jsx("button",{onClick:()=>E(!1),className:"w-8 h-8 flex items-center justify-center text-aloa-gray hover:text-aloa-black hover:bg-aloa-sand transition-all duration-200 rounded-full",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsxs)("div",{className:"space-y-2 px-8 pb-8",children:[(0,t.jsxs)("div",{className:"mb-6",children:[t.jsx("label",{className:"block text-sm font-display uppercase tracking-wider text-aloa-gray mb-3",children:"Email Type"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[t.jsx("button",{type:"button",onClick:()=>$({...Z,isClientFacing:!0}),className:`flex-1 px-4 py-3 text-sm font-display uppercase tracking-wider transition-all duration-200 ${Z.isClientFacing?"bg-aloa-black text-aloa-cream shadow-md":"bg-aloa-white text-aloa-gray border-2 border-aloa-black hover:bg-aloa-sand"}`,children:"Client-Facing"}),t.jsx("button",{type:"button",onClick:()=>$({...Z,isClientFacing:!1}),className:`flex-1 px-4 py-3 text-sm font-display uppercase tracking-wider transition-all duration-200 ${Z.isClientFacing?"bg-aloa-white text-aloa-gray border-2 border-aloa-black hover:bg-aloa-sand":"bg-aloa-black text-aloa-cream shadow-md"}`,children:"Internal"})]})]}),(0,t.jsxs)("div",{className:"mb-5",children:[t.jsx("label",{className:"block text-sm font-display uppercase tracking-wider text-aloa-gray mb-2",children:"Recipient Email *"}),t.jsx("input",{type:"email",value:Z.recipientEmail,onChange:e=>$({...Z,recipientEmail:e.target.value}),className:"w-full px-4 py-3 bg-aloa-white border-2 border-aloa-black focus:outline-none focus:ring-2 focus:ring-aloa-black focus:ring-offset-2 focus:ring-offset-white transition-all duration-200 hover:shadow-md placeholder:text-aloa-gray",placeholder:"recipient@example.com",required:!0})]}),(0,t.jsxs)("div",{className:"mb-5",children:[t.jsx("label",{className:"block text-sm font-display uppercase tracking-wider text-aloa-gray mb-2",children:"Recipient Name"}),t.jsx("input",{type:"text",value:Z.recipientName,onChange:e=>$({...Z,recipientName:e.target.value}),className:"w-full px-4 py-3 bg-aloa-white border-2 border-aloa-black focus:outline-none focus:ring-2 focus:ring-aloa-black focus:ring-offset-2 focus:ring-offset-white transition-all duration-200 hover:shadow-md placeholder:text-aloa-gray",placeholder:"John Doe"})]}),(0,t.jsxs)("div",{className:"mb-5",children:[t.jsx("label",{className:"block text-sm font-display uppercase tracking-wider text-aloa-gray mb-2",children:"CC Emails (comma-separated)"}),t.jsx("input",{type:"text",value:Z.ccEmails,onChange:e=>$({...Z,ccEmails:e.target.value}),className:"w-full px-4 py-3 bg-aloa-white border-2 border-aloa-black focus:outline-none focus:ring-2 focus:ring-aloa-black focus:ring-offset-2 focus:ring-offset-white transition-all duration-200 hover:shadow-md placeholder:text-aloa-gray",placeholder:"cc1@example.com, cc2@example.com"})]}),(0,t.jsxs)("div",{className:"mb-5",children:[t.jsx("label",{className:"block text-sm font-display uppercase tracking-wider text-aloa-gray mb-2",children:"Custom Subject (optional)"}),t.jsx("input",{type:"text",value:Z.customSubject,onChange:e=>$({...Z,customSubject:e.target.value}),className:"w-full px-4 py-3 bg-aloa-white border-2 border-aloa-black focus:outline-none focus:ring-2 focus:ring-aloa-black focus:ring-offset-2 focus:ring-offset-white transition-all duration-200 hover:shadow-md placeholder:text-aloa-gray",placeholder:Z.isClientFacing?`Your Input Summary: ${f?.title||"Form"}`:`AI Analysis Report: ${f?.title||"Form"}`})]})]}),q&&R&&(0,t.jsxs)("div",{className:"mx-8 mt-6 p-4 bg-aloa-sand border-2 border-aloa-black",children:[t.jsx("h4",{className:"text-sm font-display uppercase tracking-wider text-aloa-black mb-2",children:"Email Preview"}),(0,t.jsxs)("div",{className:"text-xs text-aloa-gray space-y-1 mb-3 font-body",children:[(0,t.jsxs)("p",{className:"flex justify-between",children:[t.jsx("span",{className:"font-display uppercase tracking-wider",children:"Subject:"}),t.jsx("span",{className:"text-aloa-black truncate ml-2",children:R.preview.subject})]}),(0,t.jsxs)("p",{className:"flex justify-between",children:[t.jsx("span",{className:"font-display uppercase tracking-wider",children:"Type:"}),t.jsx("span",{className:"text-aloa-black",children:R.preview.isClientFacing?"Client-Facing":"Internal"})]})]}),t.jsx("div",{className:"bg-aloa-white border-2 border-aloa-black",style:{height:"250px",overflow:"hidden",position:"relative"},children:t.jsx("iframe",{srcDoc:R.html,style:{width:"200%",height:"500px",border:"none",transform:"scale(0.5)",transformOrigin:"top left",position:"absolute",top:0,left:0},title:"Email Preview",sandbox:"allow-same-origin"})})]}),(0,t.jsxs)("div",{className:"flex gap-3 mt-8 px-8 pb-12",children:[t.jsx("button",{onClick:()=>{E(!1),I(!1),M(null)},className:"flex-1 px-4 py-3 bg-transparent text-aloa-black border-2 border-aloa-black font-display uppercase tracking-wider hover:bg-aloa-black hover:text-aloa-cream transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-aloa-black focus:ring-offset-2 focus:ring-offset-white disabled:opacity-50 disabled:cursor-not-allowed",disabled:P,children:"Cancel"}),q?t.jsx("button",{onClick:()=>{I(!1),M(null)},className:"flex-1 px-4 py-3 bg-transparent text-aloa-black border-2 border-aloa-black font-display uppercase tracking-wider hover:bg-aloa-black hover:text-aloa-cream transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-aloa-black focus:ring-offset-2 focus:ring-offset-white",children:"Edit"}):(0,t.jsxs)("button",{onClick:L,className:"flex-1 px-4 py-3 bg-transparent text-aloa-black border-2 border-aloa-black font-display uppercase tracking-wider hover:bg-aloa-black hover:text-aloa-cream transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-aloa-black focus:ring-offset-2 focus:ring-offset-white flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!Z.recipientEmail,children:[t.jsx(c.Z,{className:"w-4 h-4"}),"Preview"]}),t.jsx("button",{onClick:z,className:"flex-1 px-4 py-3 bg-aloa-black text-aloa-cream font-display uppercase tracking-wider hover:bg-opacity-90 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-aloa-black focus:ring-offset-2 focus:ring-offset-white active:scale-95 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",disabled:P||!Z.recipientEmail,children:P?(0,t.jsxs)(t.Fragment,{children:[t.jsx(c.Z,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(l.Z,{className:"w-4 h-4"}),"Send"]})})]})]})})]})}):null}function w(){return t.jsx(f.Z,{requireAuth:!0,redirectTo:"/auth/login",children:t.jsx(v,{})})}},56813:(e,a,s)=>{"use strict";s.d(a,{Z:()=>l});var t=s(10326),r=s(17577),i=s(35047);s(66954);var o=s(9015),n=s(41291);function l({children:e,allowedRoles:a=[],redirectTo:s="/auth/login",requireAuth:l=!0}){let c=(0,i.useRouter)(),[d,p]=(0,r.useState)(!0),[m,u]=(0,r.useState)(!1),[h,x]=(0,r.useState)(null),[g,b]=(0,r.useState)(null);return d?t.jsx("div",{className:"min-h-screen bg-gradient-subtle flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"Checking permissions..."})]})}):g||!m?t.jsx("div",{className:"min-h-screen bg-gradient-subtle flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-xl max-w-md w-full",children:[t.jsx("div",{className:"flex justify-center mb-6",children:t.jsx("div",{className:"p-4 bg-red-100 rounded-full",children:t.jsx(o.Z,{className:"w-8 h-8 text-red-600"})})}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900 text-center mb-2",children:"Access Restricted"}),t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,t.jsxs)("div",{className:"flex items-start",children:[t.jsx(n.Z,{className:"w-5 h-5 text-red-600 mt-0.5 mr-2 flex-shrink-0"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-red-800 text-sm",children:g||"You do not have permission to access this page."}),h&&(0,t.jsxs)("p",{className:"text-red-600 text-xs mt-1",children:["Your role: ",t.jsx("span",{className:"font-semibold",children:h})]})]})]})}),(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx("button",{onClick:()=>c.back(),className:"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Go Back"}),t.jsx("button",{onClick:()=>c.push("/dashboard"),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Go to Dashboard"})]})]})}):e}},79392:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var t=s(10326),r=s(55795);function i({message:e="Loading...",size:a="default"}){let s={small:"w-8 h-8",default:"w-16 h-16",large:"w-24 h-24"};return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[200px] p-8",children:[t.jsx(r.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},className:"relative",children:(0,t.jsxs)("div",{className:`${s[a]} relative`,children:[t.jsx("div",{className:"absolute inset-0 bg-aloa-black rounded-full animate-ping opacity-20"}),t.jsx("div",{className:`${s[a]} bg-aloa-black rounded-full animate-pulse`})]})}),e&&t.jsx(r.E.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-4 text-sm font-display uppercase tracking-wider text-aloa-gray",children:e})]})}},66954:(e,a,s)=>{"use strict";s.d(a,{e:()=>i});var t=s(70474);let r=null;function i(){if(r)return r;let e="https://eycgzjqwowrdmjlzqqyg.supabase.co",a="sb_publishable_eG0lH_ACpyOjqG44mN_5PA_1-oFLr5n";if(console.log("Creating Supabase browser client with:",{url:e,keyPrefix:a?a.substring(0,20)+"...":"NO KEY"}),!e||!a)throw console.error("Missing Supabase environment variables"),Error("Supabase configuration is missing");return r=(0,t.createBrowserClient)(e,a)}},24230:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},98360:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("brain",[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]])},41291:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},30361:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},31540:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]])},5932:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]])},21405:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},17069:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(62881).Z)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},23529:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>t});let t=(0,s(68570).createProxy)(String.raw`/Users/rosspalmer/Ross GitHub Projects/aloa-web-design-project-manager/app/ai-analysis/[formId]/page.js#default`)}};var a=require("../../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[9276,5495,9375,6465],()=>s(50116));module.exports=t})();