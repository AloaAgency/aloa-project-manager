"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[482],{3482:function(e,t,a){a.r(t),a.d(t,{default:function(){return r}});var l=a(7437),s=a(2265),n=a(2489),i=a(9397),c=a(401),o=a(3229);function r(e){var t,a,r,d;let{applet:x,projectId:u,projectletId:p,onUpdate:h}=e,[m,g]=(0,s.useState)((null===(t=x.config)||void 0===t?void 0:t.heading)||"Project Deliverables"),[v,f]=(0,s.useState)((null===(a=x.config)||void 0===a?void 0:a.description)||"Please review the following materials:"),[b,j]=(0,s.useState)((null===(r=x.config)||void 0===r?void 0:r.links)||[]),[y,w]=(0,s.useState)((null===(d=x.config)||void 0===d?void 0:d.allow_client_acknowledgment)!==!1),[k,N]=(0,s.useState)(!1),[C,S]=(0,s.useState)(!1),[_,Z]=(0,s.useState)(!1);(0,s.useEffect)(()=>{var e,t,a,l;g((null===(e=x.config)||void 0===e?void 0:e.heading)||"Project Deliverables"),f((null===(t=x.config)||void 0===t?void 0:t.description)||"Please review the following materials:"),j((null===(a=x.config)||void 0===a?void 0:a.links)||[]),w((null===(l=x.config)||void 0===l?void 0:l.allow_client_acknowledgment)!==!1),N(!1),Z(!1)},[x.id]);let E=(e,t,a)=>{let l=[...b];l[e]={...l[e],[t]:a},j(l),N(!0),Z(!1)},P=e=>{j(b.filter((t,a)=>a!==e)),N(!0),Z(!1)},D=async()=>{S(!0);try{(await fetch("/api/aloa-projects/".concat(u,"/projectlets/").concat(p,"/applets/").concat(x.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({config:{heading:m,description:v,links:b,allow_client_acknowledgment:y}})})).ok&&(N(!1),Z(!0),h&&h(),setTimeout(()=>Z(!1),2e3))}catch(e){console.error("Error saving applet:",e)}finally{S(!1)}};return(0,l.jsxs)("div",{className:"mt-3 space-y-3 p-3 bg-gray-50 rounded-lg",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Heading"}),(0,l.jsx)("input",{type:"text",value:m,onChange:e=>{g(e.target.value),N(!0),Z(!1)},className:"w-full text-sm px-2 py-1 border rounded bg-white",placeholder:"Enter heading text"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Description"}),(0,l.jsx)("textarea",{value:v,onChange:e=>{f(e.target.value),N(!0),Z(!1)},className:"w-full text-sm px-2 py-1 border rounded bg-white",rows:"2",placeholder:"Enter description text"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Links"}),(0,l.jsxs)("div",{className:"space-y-2",children:[b.map((e,t)=>(0,l.jsxs)("div",{className:"p-2 bg-white border rounded space-y-2",children:[(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("input",{type:"text",value:e.text||"",onChange:e=>E(t,"text",e.target.value),className:"flex-1 text-sm px-2 py-1 border rounded",placeholder:"Link text"}),(0,l.jsx)("button",{onClick:()=>P(t),className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Delete link",children:(0,l.jsx)(n.Z,{className:"w-4 h-4"})})]}),(0,l.jsx)("input",{type:"url",value:e.url||"",onChange:e=>E(t,"url",e.target.value),className:"w-full text-sm px-2 py-1 border rounded",placeholder:"https://example.com"}),(0,l.jsx)("input",{type:"text",value:e.description||"",onChange:e=>E(t,"description",e.target.value),className:"w-full text-sm px-2 py-1 border rounded",placeholder:"Brief description (optional)"})]},t)),(0,l.jsxs)("button",{onClick:()=>{j([...b,{text:"New Link",url:"https://example.com",description:""}]),N(!0),Z(!1)},className:"w-full py-1 px-2 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors flex items-center justify-center gap-1",children:[(0,l.jsx)(i.Z,{className:"w-4 h-4"}),"Add Link"]})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("input",{type:"checkbox",id:"ack-".concat(x.id),checked:y,onChange:e=>{w(e.target.checked),N(!0),Z(!1)},className:"rounded"}),(0,l.jsx)("label",{htmlFor:"ack-".concat(x.id),className:"text-xs text-gray-700",children:"Allow client acknowledgment"})]}),(0,l.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t",children:[(0,l.jsxs)("div",{className:"text-xs text-gray-600",children:[k&&!_&&(0,l.jsx)("span",{className:"text-amber-600",children:"â€¢ Unsaved changes"}),_&&(0,l.jsxs)("span",{className:"text-green-600 flex items-center gap-1",children:[(0,l.jsx)(c.Z,{className:"w-3 h-3"}),"Saved"]})]}),(0,l.jsxs)("button",{onClick:D,disabled:!k||C,className:"px-3 py-1 text-sm rounded-md transition-colors flex items-center gap-1 ".concat(k&&!C?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:[(0,l.jsx)(o.Z,{className:"w-4 h-4"}),C?"Saving...":"Save Changes"]})]})]})}},401:function(e,t,a){a.d(t,{Z:function(){return l}});let l=(0,a(9205).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},3229:function(e,t,a){a.d(t,{Z:function(){return l}});let l=(0,a(9205).Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])}}]);