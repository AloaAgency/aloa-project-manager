(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[809],{8063:function(e,a,l){"use strict";l.d(a,{Z:function(){return t}});let t=(0,l(5531).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},4136:function(e,a,l){"use strict";l.d(a,{Z:function(){return t}});let t=(0,l(5531).Z)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},1482:function(e,a,l){Promise.resolve().then(l.bind(l,6542))},6542:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return u}});var t=l(7437),s=l(2265),r=l(4033),i=l(5531);let o=(0,i.Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),n=(0,i.Z)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var d=l(8063),c=l(4136),m=l(5925),x=l(2462);function u(){let e=(0,r.useParams)(),a=(0,r.useRouter)(),[l,i]=(0,s.useState)(null),[u,h]=(0,s.useState)([]),[p,f]=(0,s.useState)(""),[b,g]=(0,s.useState)(!0),[y,j]=(0,s.useState)(!1),[N,v]=(0,s.useState)(!1);(0,s.useEffect)(()=>{k()},[e.formId]);let k=async()=>{try{let a=await fetch("/api/forms/by-id/".concat(e.formId));if(!a.ok)throw Error("Failed to fetch form");let l=await a.json();i(l),h(l.form_fields||[]),f(l.title||"")}catch(e){console.error("Error fetching form:",e),m.default.error("Failed to load form"),a.push("/dashboard")}finally{g(!1)}},w=(e,a,l)=>{h(u.map(t=>t.id===e?{...t,[a]:l}:t)),v(!0)},C=e=>{f(e),v(!0)},E=async()=>{j(!0);try{if(!(await fetch("/api/forms/edit-fields/".concat(e.formId),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({fields:u,title:p})})).ok)throw Error("Failed to update form");m.default.success("Form updated successfully!"),v(!1)}catch(e){console.error("Error updating form:",e),m.default.error("Failed to update form")}finally{j(!1)}};return b?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-subtle flex items-center justify-center",children:(0,t.jsx)(x.Z,{message:"Loading form editor..."})}):l?(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-subtle",children:[(0,t.jsx)("div",{className:"bg-aloa-black text-aloa-white shadow-lg sticky top-0 z-10",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("button",{onClick:()=>a.push("/dashboard"),className:"p-2 hover:bg-aloa-white/10 rounded-lg transition-colors",children:(0,t.jsx)(o,{className:"w-5 h-5"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-display font-bold",children:"Edit Form"}),(0,t.jsx)("p",{className:"text-sm text-aloa-white/70",children:"Update form details and fields"})]})]}),(0,t.jsxs)("button",{onClick:E,disabled:!N||y,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all ".concat(N&&!y?"bg-aloa-white text-aloa-black hover:bg-opacity-90":"bg-aloa-white/20 text-aloa-white/50 cursor-not-allowed"),children:[(0,t.jsx)(n,{className:"w-4 h-4"}),y?"Saving...":"Save Changes"]})]})})}),(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,t.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 flex items-start gap-3",children:[(0,t.jsx)(d.Z,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{className:"text-sm text-amber-800",children:[(0,t.jsx)("p",{className:"font-semibold mb-1",children:"Important: Only edit text content"}),(0,t.jsx)("p",{children:"Changing field types or structure may break existing responses. Only edit labels, placeholders, and help text."})]})]})}),(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsx)("div",{className:"bg-aloa-white rounded-lg shadow-md p-6 mb-6",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(c.Z,{className:"w-5 h-5 text-aloa-black mt-2"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-aloa-gray mb-2",children:"Form Title"}),(0,t.jsx)("input",{type:"text",value:p,onChange:e=>C(e.target.value),className:"w-full px-4 py-2 border-2 border-aloa-sand rounded-lg focus:border-aloa-black focus:outline-none transition-colors text-lg font-medium",placeholder:"Enter form title..."})]})]})})}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-aloa-black mb-4",children:"Form Fields"}),(0,t.jsx)("div",{className:"space-y-4",children:u.map((e,a)=>(0,t.jsx)("div",{className:"bg-aloa-white rounded-lg shadow-md p-6",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("div",{className:"w-10 h-10 bg-aloa-black text-aloa-white rounded-full flex items-center justify-center font-bold",children:a+1})}),(0,t.jsxs)("div",{className:"flex-1 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-aloa-gray mb-1",children:"Question / Label"}),(0,t.jsx)("input",{type:"text",value:e.field_label||"",onChange:a=>w(e.id,"field_label",a.target.value),className:"w-full px-4 py-2 border-2 border-aloa-sand rounded-lg focus:border-aloa-black focus:outline-none transition-colors"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-aloa-gray mb-1",children:"Field Type"}),(0,t.jsx)("div",{className:"px-4 py-2 bg-gray-100 border-2 border-gray-200 rounded-lg text-gray-600",children:e.field_type})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-aloa-gray mb-1",children:"Field Name"}),(0,t.jsx)("div",{className:"px-4 py-2 bg-gray-100 border-2 border-gray-200 rounded-lg text-gray-600 font-mono text-sm",children:e.field_name})]})]}),["text","email","tel","url","number","textarea"].includes(e.field_type)&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-aloa-gray mb-1",children:"Placeholder Text"}),(0,t.jsx)("input",{type:"text",value:e.placeholder||"",onChange:a=>w(e.id,"placeholder",a.target.value),className:"w-full px-4 py-2 border-2 border-aloa-sand rounded-lg focus:border-aloa-black focus:outline-none transition-colors",placeholder:"Enter placeholder text..."})]}),["select","radio","checkbox"].includes(e.field_type)&&e.options&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-aloa-gray mb-1",children:"Options"}),(0,t.jsx)("textarea",{value:e.options.join("\n"),onChange:a=>w(e.id,"options",a.target.value.split("\n").filter(e=>e.trim())),className:"w-full px-4 py-2 border-2 border-aloa-sand rounded-lg focus:border-aloa-black focus:outline-none transition-colors",rows:e.options.length+1,placeholder:"One option per line..."})]}),(0,t.jsxs)("div",{className:"flex items-center gap-6 text-sm",children:[void 0!==e.required&&(0,t.jsxs)("label",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:e.required,onChange:a=>w(e.id,"required",a.target.checked),className:"rounded border-aloa-sand text-aloa-black focus:ring-aloa-black"}),(0,t.jsx)("span",{className:"text-aloa-gray",children:"Required field"})]}),e.section&&(0,t.jsxs)("div",{className:"text-aloa-gray",children:["Section: ",(0,t.jsx)("span",{className:"font-medium text-aloa-black",children:e.section})]})]})]})]})},e.id))})]})]}):null}},2462:function(e,a,l){"use strict";l.d(a,{Z:function(){return r}});var t=l(7437),s=l(2187);function r(e){let{message:a="Loading...",size:l="default"}=e,r={small:"w-8 h-8",default:"w-16 h-16",large:"w-24 h-24"};return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[200px] p-8",children:[(0,t.jsx)(s.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},className:"relative",children:(0,t.jsxs)("div",{className:"".concat(r[l]," relative"),children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-aloa-black rounded-full animate-ping opacity-20"}),(0,t.jsx)("div",{className:"".concat(r[l]," bg-aloa-black rounded-full animate-pulse")})]})}),a&&(0,t.jsx)(s.E.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"mt-4 text-sm font-display uppercase tracking-wider text-aloa-gray",children:a})]})}}},function(e){e.O(0,[293,971,938,744],function(){return e(e.s=1482)}),_N_E=e.O()}]);