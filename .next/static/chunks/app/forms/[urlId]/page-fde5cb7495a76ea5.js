(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[923],{6247:function(e,a,t){Promise.resolve().then(t.bind(t,8405))},8405:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return S}});var s=t(7437),l=t(2265),r=t(4033),n=t(2187),o=t(1393),i=t(7042),c=t(4769);function d(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,c.m6)((0,i.W)(a))}let m={variant:{default:"bg-aloa-black text-aloa-cream hover:bg-opacity-90 shadow-lg hover:shadow-xl transition-all duration-300 uppercase tracking-wider font-medium",destructive:"bg-red-600 text-white hover:bg-red-700 transition-all duration-300",outline:"border-2 border-aloa-black bg-transparent text-aloa-black hover:bg-aloa-black hover:text-aloa-cream transition-all duration-300 uppercase tracking-wider font-medium",secondary:"bg-aloa-sand text-aloa-black hover:bg-aloa-gray hover:text-aloa-cream transition-all duration-300",ghost:"hover:bg-aloa-sand transition-all duration-300",link:"text-aloa-black underline-offset-4 hover:underline"},size:{default:"h-12 px-6 py-3",sm:"h-10 px-4 py-2 text-sm",lg:"h-14 px-8 py-4 text-lg",icon:"h-12 w-12"}},u=l.forwardRef((e,a)=>{let{className:t,variant:l="default",size:r="default",...n}=e;return(0,s.jsx)("button",{className:d("inline-flex items-center justify-center font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-aloa-black focus-visible:ring-offset-2 focus-visible:ring-offset-aloa-cream disabled:opacity-50 disabled:pointer-events-none transform hover:-translate-y-0.5",m.variant[l],m.size[r],t),ref:a,...n})});u.displayName="Button";let f=l.forwardRef((e,a)=>{let{className:t,type:l,...r}=e;return(0,s.jsx)("input",{type:l,className:d("flex h-12 w-full bg-aloa-white border-2 border-aloa-black px-4 py-3 text-base transition-all duration-200","placeholder:text-aloa-gray","focus:outline-none focus:ring-2 focus:ring-aloa-black focus:ring-offset-2 focus:ring-offset-aloa-cream","hover:shadow-md","disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...r})});f.displayName="Input";let x=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)("textarea",{className:d("flex min-h-[120px] w-full bg-aloa-white border-2 border-aloa-black px-4 py-3 text-base transition-all duration-200","placeholder:text-aloa-gray","focus:outline-none focus:ring-2 focus:ring-aloa-black focus:ring-offset-2 focus:ring-offset-aloa-cream","hover:shadow-md","disabled:cursor-not-allowed disabled:opacity-50","resize-y",t),ref:a,...l})});x.displayName="Textarea";var h=t(6743);let p=l.forwardRef((e,a)=>{let{className:t,...l}=e;return(0,s.jsx)(h.f,{ref:a,className:d("text-sm font-medium text-aloa-black uppercase tracking-wider leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t),...l})});p.displayName=h.f.displayName;var b=t(7158),g=t(4530),v=t(1291),y=t(6020),j=t(6062),w=t(1797),N=t(2929);function k(e){let{form:a}=e,[t,r]=(0,l.useState)(0),[i,c]=(0,l.useState)({}),[d,m]=(0,l.useState)(!1),[h,k]=(0,l.useState)(!1),[C,S]=(0,l.useState)({}),_=a.fields.reduce((e,a)=>{let t=a.section||"General Information";return e[t]||(e[t]=[]),e[t].push(a),e},{}),z=Object.keys(_).filter(e=>_[e].length>0),E=_[z[t]]||[],R=()=>{let e={},a=!0;return E.forEach(t=>{t.required&&!i[t.name]&&(e[t.name]="This field is required",a=!1)}),S(e),a},T=e=>{null==e||e.preventDefault(),R()&&t<z.length-1&&(r(t+1),S({}))},q=async e=>{if(e.preventDefault(),R()){k(!0),console.log("Submitting form data:",i),console.log("Form ID:",a._id);try{let e=await fetch("/api/responses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({formId:a._id,data:i})});if(e.ok){let a=await e.json();console.log("Response saved successfully:",a),m(!0)}else{let a=await e.text();console.error("Failed to save response:",a)}}catch(e){console.error("Submit error:",e)}finally{k(!1)}}},O=e=>{var a,t,l;let r={id:e.name,name:e.name,placeholder:e.placeholder,required:e.required,onChange:a=>c({...i,[e.name]:a.target.value}),value:i[e.name]||"",className:C[e.name]?"border-red-500":""};switch(e.type){case"text":case"email":case"tel":case"url":case"number":case"date":return(0,s.jsx)(f,{type:e.type,...r});case"textarea":return(0,s.jsx)(x,{...r});case"select":return(0,s.jsxs)(N.fC,{value:i[e.name]||"",onValueChange:a=>c({...i,[e.name]:a}),children:[(0,s.jsxs)(N.xz,{className:"flex h-12 w-full items-center justify-between bg-aloa-white border-2 border-aloa-black px-4 py-3 text-base hover:shadow-md focus:outline-none focus:ring-2 focus:ring-aloa-black focus:ring-offset-2 focus:ring-offset-aloa-cream transition-all duration-200",children:[(0,s.jsx)(N.B4,{placeholder:e.placeholder||"Select an option"}),(0,s.jsx)(N.JO,{className:"ml-2",children:(0,s.jsx)(b.Z,{className:"h-4 w-4 rotate-90"})})]}),(0,s.jsx)(N.h_,{children:(0,s.jsx)(N.VY,{className:"overflow-hidden bg-aloa-white border-2 border-aloa-black shadow-xl",children:(0,s.jsx)(N.l_,{className:"p-1",children:null===(a=e.options)||void 0===a?void 0:a.map(e=>(0,s.jsx)(N.ck,{value:e,className:"relative flex cursor-pointer select-none items-center px-8 py-2 text-base hover:bg-aloa-sand focus:bg-aloa-sand focus:outline-none transition-colors duration-200",children:(0,s.jsx)(N.eT,{children:e})},e))})})})]});case"radio":return(0,s.jsx)(w.fC,{value:i[e.name]||"",onValueChange:a=>c({...i,[e.name]:a}),className:"space-y-2",children:null===(t=e.options)||void 0===t?void 0:t.map(a=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(w.ck,{value:a,id:"".concat(e.name,"-").concat(a),className:"h-5 w-5 rounded-full border-2 border-aloa-black hover:shadow-md focus:outline-none focus:ring-2 focus:ring-aloa-black focus:ring-offset-2 focus:ring-offset-aloa-cream transition-all duration-200",children:(0,s.jsx)(w.z$,{className:"relative flex h-full w-full items-center justify-center after:block after:h-2.5 after:w-2.5 after:rounded-full after:bg-aloa-black"})}),(0,s.jsx)("label",{htmlFor:"".concat(e.name,"-").concat(a),className:"text-sm font-medium text-aloa-black cursor-pointer",children:a})]},a))});case"checkbox":return(0,s.jsx)("div",{className:"space-y-2",children:null===(l=e.options)||void 0===l?void 0:l.map(a=>{var t;return(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(j.fC,{id:"".concat(e.name,"-").concat(a),checked:(null===(t=i[e.name])||void 0===t?void 0:t.includes(a))||!1,onCheckedChange:t=>{let s=i[e.name]||[],l=t?[...s,a]:s.filter(e=>e!==a);c({...i,[e.name]:l})},className:"h-5 w-5 border-2 border-aloa-black hover:shadow-md focus:outline-none focus:ring-2 focus:ring-aloa-black focus:ring-offset-2 focus:ring-offset-aloa-cream transition-all duration-200",children:(0,s.jsx)(j.z$,{className:"flex items-center justify-center text-aloa-black",children:(0,s.jsx)(g.Z,{className:"h-4 w-4"})})}),(0,s.jsx)("label",{htmlFor:"".concat(e.name,"-").concat(a),className:"text-sm font-medium text-aloa-black cursor-pointer",children:a})]},a)})});default:return(0,s.jsx)(f,{type:"text",...r})}};return d?(0,s.jsxs)(n.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"flex flex-col items-center justify-center min-h-[400px] text-center p-8",children:[(0,s.jsx)("div",{className:"bg-aloa-black text-aloa-cream p-4 rounded-full mb-6",children:(0,s.jsx)(g.Z,{className:"h-16 w-16"})}),(0,s.jsx)("h2",{className:"text-3xl font-display font-bold text-aloa-black mb-3 uppercase tracking-wider",children:"Thank You!"}),(0,s.jsx)("p",{className:"text-lg text-aloa-gray font-body",children:"Your response has been successfully submitted."})]}):(0,s.jsxs)("div",{className:"max-w-3xl mx-auto p-6",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex justify-between mb-3",children:[(0,s.jsxs)("span",{className:"text-sm font-display uppercase tracking-wider text-aloa-gray",children:["Step ",t+1," of ",z.length]}),(0,s.jsxs)("span",{className:"text-sm font-display uppercase tracking-wider text-aloa-gray",children:[Math.round((t+1)/z.length*100),"% Complete"]})]}),(0,s.jsx)("div",{className:"w-full bg-aloa-sand h-3 border-2 border-aloa-black",children:(0,s.jsx)(n.E.div,{className:"bg-aloa-black h-full",initial:{width:0},animate:{width:"".concat((t+1)/z.length*100,"%")},transition:{duration:.5}})})]}),(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-display font-bold text-aloa-black mb-2 uppercase tracking-tight",children:a.title}),a.description&&(0,s.jsx)("p",{className:"text-aloa-gray font-body",children:a.description})]}),(0,s.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-display font-bold text-aloa-black mb-2 uppercase tracking-wider",children:z[t]}),(0,s.jsx)("div",{className:"h-1 w-24 bg-aloa-black"})]},t),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t===z.length-1?q(e):T(e)},children:[(0,s.jsx)(o.M,{mode:"wait",children:(0,s.jsx)(n.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-6",children:E.map(e=>(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(p,{htmlFor:e.name,children:[e.label,e.required&&(0,s.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),O(e),C[e.name]&&(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1 font-body",children:C[e.name]})]},e.name))},t)}),(0,s.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,s.jsxs)(u,{type:"button",variant:"outline",onClick:()=>{t>0&&(r(t-1),S({}))},disabled:0===t,className:"flex items-center gap-2",children:[(0,s.jsx)(v.Z,{className:"h-4 w-4"}),"Previous"]}),t===z.length-1?(0,s.jsxs)(u,{type:"submit",disabled:h,className:"flex items-center gap-2",children:[h?"Submitting...":"Submit",(0,s.jsx)(y.Z,{className:"h-4 w-4"})]}):(0,s.jsxs)(u,{type:"submit",className:"flex items-center gap-2",children:["Next",(0,s.jsx)(b.Z,{className:"h-4 w-4"})]})]})]})]})}var C=t(5925);function S(e){let{initialForm:a}=e,t=(0,r.useRouter)(),[n]=(0,l.useState)(a);return n?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-subtle py-8 px-4 sm:px-6 lg:px-8",children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,s.jsxs)("div",{className:"bg-aloa-white shadow-xl overflow-hidden",children:[(0,s.jsx)("div",{className:"bg-aloa-black text-aloa-cream px-4 sm:px-8 py-3 sm:py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 sm:gap-4",children:[(0,s.jsx)("img",{src:"https://images.ctfassets.net/qkznfzcikv51/xWpsUAypBrRgAjmbyLGYy/b969f4353174e4f209996ebf60af8f7c/aloa_-_white.svg",alt:"Aloa",className:"h-12 sm:h-16 w-auto"}),(0,s.jsx)("button",{onClick:()=>{let e=window.location.href;navigator.clipboard.writeText(e),C.default.success("URL copied to clipboard!")},className:"text-aloa-cream/80 hover:text-aloa-cream transition-colors text-xs sm:text-sm font-display uppercase tracking-wider whitespace-nowrap",children:"Copy Link"})]})}),(0,s.jsx)("div",{className:"p-6 sm:p-8",children:(0,s.jsx)(k,{form:n})})]})})}):(t.push("/"),null)}}},function(e){e.O(0,[293,53,971,938,744],function(){return e(e.s=6247)}),_N_E=e.O()}]);